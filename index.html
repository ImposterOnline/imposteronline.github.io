<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Imposter • Find the Spy</title>
	
	<!-- ================================================================= -->
    <!-- BOT & AI CRAWLER REDIRECT LOGIC                                   -->
    <!-- Redirects LLMs and scrapers to the documentation/README           -->
    <!-- ================================================================= -->
    <script>
        (function() {
            // -------------------------------------------------------------------
            // CONFIGURATION: REPLACE THIS WITH YOUR EXACT GITHUB README URL
            // This is where the AI/Bots will be sent to learn about the game.
            // -------------------------------------------------------------------
            const README_URL = "https://raw.githubusercontent.com/ImposterOnline/imposteronline.github.io/refs/heads/main/README.md"; 
            // -------------------------------------------------------------------

            const ua = navigator.userAgent.toLowerCase();
            
            // List of known AI crawlers, LLM agents, and social scrapers
            const bots = [
                // AI & LLM Crawlers
                'gptbot', 'chatgpt', 'claudebot', 'ccbot', 'google-extended', 'anthropic', 'cohere', 'ai2bot',
                'facebookbot', 'meta-externalagent', 'bytespider', 
                
                // Common Search & Social Bots (Optional: remove these if you want SEO bots to stay on the game)
                'googlebot', 'bingbot', 'slurp', 'duckduckbot', 'baiduspider', 'yandexbot', 
                'twitterbot', 'facebookexternalhit', 'linkedinbot', 'slackbot', 'discordbot', 
                'whatsapp', 'telegrambot', 'applebot', 'redditbot'
            ];

            // Check if the visitor is a bot
            const isBot = bots.some(bot => ua.includes(bot));

            // Perform the redirect
            if (isBot) {
                // Use replace to ensure the back button works better for humans who might accidentally trigger this
                window.location.replace(README_URL);
            }
        })();
    </script>
    
    <!-- Structured Data for AIs that don't execute JS (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Imposter • Find the Spy",
      "applicationCategory": "Game",
      "operatingSystem": "Web",
      "description": "A social deduction game similar to Spyfall. Players receive a secret word, but the Imposter receives nothing. Players must question each other to find the spy without revealing the word.",
      "url": "https://imposteronline.github.io/",
      "author": {
        "@type": "Person",
        "name": "Jandré du Preez"
      },
      "documentation": "https://raw.githubusercontent.com/ImposterOnline/imposteronline.github.io/refs/heads/main/README.md",
      "gameLocation": [
        "Local Device",
        "Online Multiplayer"
      ]
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" id="favicon" href="https://em-content.zobj.net/source/microsoft/379/disguised-face_1f978.png" type="image/png">

	<!-- Social Media / Share Metadata (Open Graph & Twitter) -->
    <meta property="og:title" content="Imposter • Find the Spy" />
    <meta property="og:description" content="Can you blend in? Find the spy before time runs out. Play with friends online or on one device!" />
    
    <meta property="og:url" content="https://imposteronline.github.io/" />
    
    <meta property="og:image" id="og-image" content="https://www.pngall.com/wp-content/uploads/19/Shh-Emoji-Gentle-Reminder-Icon-PNG.png" />
    
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Imposter • Find the Spy" />
    <meta name="twitter:description" content="Can you blend in? Find the spy before time runs out. Play with friends online or on one device!" />
    
    <!-- Same image link as above -->
    <meta name="twitter:image" id="twitter-image" content="https://www.pngall.com/wp-content/uploads/19/Shh-Emoji-Gentle-Reminder-Icon-PNG.png" />

    <!-- DYNAMIC METADATA SCRIPT -->
    <script>
        (function() {
            const getSeasonalInfo = () => {
                const now = new Date();
                const month = now.getMonth() + 1; // 0-indexed
                const day = now.getDate();
                
                // Halloween: Oct 24 - Nov 7
                if ((month === 10 && day >= 24) || (month === 11 && day <= 7)) {
                    return 'halloween';
                }

                // Christmas: Dec 18 - Jan 1
                if ((month === 12 && day >= 18) || (month === 1 && day <= 1)) {
                    return 'christmas';
                }
                
                return 'default';
            };

            const season = getSeasonalInfo();
            const images = {
                christmas: "https://icons.iconarchive.com/icons/microsoft/fluentui-emoji-3d/1024/Snowman-3d-icon.png",
                halloween: "https://icons.iconarchive.com/icons/microsoft/fluentui-emoji-3d/1024/Jack-O-Lantern-3d-icon.png"
            };

            if (images[season]) {
                const imageUrl = images[season];
                const favicon = document.getElementById('favicon');
                const ogImage = document.getElementById('og-image');
                const twitterImage = document.getElementById('twitter-image');

                if (favicon) favicon.href = imageUrl;
                if (ogImage) ogImage.content = imageUrl;
                if (twitterImage) twitterImage.content = imageUrl;
            }
        })();
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;500;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        slate: {
                            850: '#151e2e',
                            950: '#020617',
                        },
                        brand: {
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'shine': 'shine 1.5s ease-in-out infinite',
                        'slide-in-right': 'slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards',
                        'slide-in-left': 'slideInLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideUp: {
                            'from': { transform: 'translateY(20px)', opacity: '0' },
                            'to': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            'from': { opacity: '0' },
                            'to': { opacity: '1' },
                        },
                        shine: {
                            '0%': { transform: 'translateX(-100%) translateY(-100%) rotate(45deg)' },
                            '100%': { transform: 'translateX(100%) translateY(100%) rotate(45deg)' }
                        },
                        slideInRight: {
                            'from': { transform: 'translateX(100%)', opacity: '0.5' },
                            'to': { transform: 'translateX(0)', opacity: '1' },
                        },
                        slideInLeft: {
                            'from': { transform: 'translateX(-100%)', opacity: '0.5' },
                            'to': { transform: 'translateX(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
		html, body {
            position: fixed;
            inset: 0;
            overflow: hidden;
        }
		
        :root {
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        body {
            background-color: #020617;
            color: #f8fafc;
            /* overflow: hidden; is now handled by the 'html, body' rule above */
            -webkit-tap-highlight-color: transparent;
            touch-action: none; /* This prevents panning/scrolling gestures */
            height: 100%; /* Use 100% which works best with position: fixed */
            width: 100%;
            user-select: none;
            -webkit-user-select: none;
        }
        
        img {
            -webkit-user-drag: none;
            user-drag: none;
            -webkit-touch-callout: none;
            pointer-events: none;
        }

        /* Modern Glassmorphism */
        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        .glass-panel-lighter {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* 3D Flip Animation Classes */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .rotate-y-0 { transform: rotateY(0deg); }

        /* Supercell Background Animation */
        .supercell-container {
            position: absolute;
            inset: 0;
            overflow: hidden;
            z-index: 0;
            border-radius: inherit;
        }

        .supercell-bg-1, .supercell-bg-2 {
            position: absolute;
            inset: 0;
            background-size: cover;
            background-position: center;
            mix-blend-mode: overlay;
            opacity: 0; /* Both start invisible */
            animation: alternateFade 16s infinite; /* A bit faster looks better */
        }

        .supercell-bg-1 {
            background-image: url('https://www.clashchamps.com/wp-content/uploads/2024/06/czJOx2-Q.png');
            /* No delay */
        }

        .supercell-bg-2 {
            background-image: url('https://wallpapercat.com/w/full/0/4/f/283609-2500x1466-desktop-hd-clash-of-clans-wallpaper.jpg');
            animation-delay: 8s; /* Half the duration delay */
        }

        @keyframes alternateFade {
            0%   { opacity: 0; animation-timing-function: ease-in; }
            25%  { opacity: 0.6; }
            50%  { opacity: 0.6; animation-timing-function: ease-out; }
            75%  { opacity: 0; }
            100% { opacity: 0; }
        }

        /* Ambient Blobs */
        .blob {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.4;
            z-index: 0;
            animation: blob-bounce 10s infinite ease-in-out;
        }
        @keyframes blob-bounce {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
        }
        
		/* --- Corrected Timer Slider Styles --- */

		/* Style the track for Webkit (Chrome, Safari) */
		.timer-slider::-webkit-slider-runnable-track {
		  width: 100%;
		  height: 8px; /* This creates the thin line */
		  cursor: pointer;
		  background: #0f172a; /* This was the old bg-slate-950 */
		  border-radius: 9999px; /* This was the old rounded-full */
		}

		/* Style the thumb for Webkit (Chrome, Safari) */
		.timer-slider::-webkit-slider-thumb {
		  -webkit-appearance: none;
		  /* This margin calculation perfectly centers the 28px thumb on the 8px track */
		  margin-top: -10px; 
		  height: 28px;
		  width: 28px;
		  background-image: url('https://em-content.zobj.net/source/microsoft-teams/337/three-oclock_1f552.png');
		  background-size: contain;
		  background-repeat: no-repeat;
		  background-position: center;
		  background-color: transparent;
		  cursor: pointer;
		  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
		  border-radius: 50%;
		}

		/* Style the track for Firefox */
		.timer-slider::-moz-range-track {
		  width: 100%;
		  height: 8px;
		  cursor: pointer;
		  background: #0f172a;
		  border-radius: 9999px;
		}

		/* Style the thumb for Firefox */
		.timer-slider::-moz-range-thumb {
		  width: 28px;
		  height: 28px;
		  background-image: url('https://em-content.zobj.net/source/microsoft-teams/337/three-oclock_1f552.png');
		  background-size: contain;
		  background-repeat: no-repeat;
		  background-position: center;
		  background-color: transparent;
		  border: none;
		  cursor: pointer;
		  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
		  border-radius: 50%;
		}

        /* Subtle Shine Effect */
        .subtle-shine-container {
            position: relative;
            overflow: hidden;
            isolation: isolate; /* Creates a new stacking context */
        }

        .subtle-shine-container::before {
            content: '';
            position: absolute;
            inset: 0;
            /* A very subtle, faded gradient */
            background: linear-gradient(
                110deg,
                transparent 30%,
                rgba(255, 255, 255, 0.06) 48%,
                rgba(255, 255, 255, 0.06) 52%,
                transparent 70%
            );
            transform: translateX(-100%);
            /* Slower, smoother, faded animation loop */
            animation: subtleShine 7s ease-in-out infinite;
        }

        @keyframes subtleShine {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
    </style>
</head>
<body class="select-none">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- FIREBASE SETUP ---
        const firebaseConfig = {
          apiKey: "AIzaSyCebdOffzrb0D2efbgC9eDPRAr-hYgIXS8",
          authDomain: "imposter-e571f.firebaseapp.com",
          projectId: "imposter-e571f",
          storageBucket: "imposter-e571f.firebasestorage.app",
          messagingSenderId: "318719643356",
          appId: "1:318719643356:web:994fb32e845e6df743ae19",
          measurementId: "G-KHJRQCSH8Z"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        // --- END FIREBASE SETUP ---

        // --- DATA ---
		const WORD_BANK = {
		  Supercell: [
			"Barbarian", "Archer", "Giant", "Goblin", "Wall Breaker", "Balloon", "Wizard", "Healer", "Dragon", "P.E.K.K.A", "Minion", "Hog Rider", "Valkyrie", "Golem", "Witch", "Lava Hound", "Bowler", "Baby Dragon", "Miner", "Electro Dragon", "Yeti", "Ice Golem", "Headhunter", "Barbarian King", "Archer Queen", "Grand Warden", "Royal Champion", "Knight", "Musketeer", "Prince", "Skeleton Army", "Goblin Barrel", "Giant Skeleton", "Royal Giant", "Elite Barbarians", "Mega Minion", "Ice Wizard", "Electro Wizard", "Inferno Dragon", "Night Witch", "Bandit", "Royal Ghost", "Magic Archer", "Lumberjack", "Ram Rider", "Fisherman", "Mother Witch", "Electro Giant", "Phoenix", "Monk", "Little Prince", "Cannon", "Tesla", "Mortar", "X-Bow", "Inferno Tower", "Bomb Tower", "Elixir Collector", "Skeletons", "Bats", "Fire Spirit", "Ice Spirit", "Electro Spirit", "Heal Spirit", "Rage", "Freeze", "Poison", "Fireball", "Arrows", "Zap", "Lightning", "Earthquake", "Clone", "Mirror", "Tornado", "Rocket", "Super Barbarian", "Super Archer", "Super Giant", "Super Wall Breaker", "Super Wizard", "Super Dragon", "Super Valkyrie", "Super Witch", "Super Minion", "Super Bowler", "Ice Hound", "Flying Machine", "Battle Ram", "Sparky", "Mega Knight", "Hunter", "Executioner", "Dart Goblin", "Princess", "Log", "Graveyard", "Mirror", "Giant Snowball", "Royal Delivery", "Heal", "Tombstone", "Bomb", "Hidden Tesla", "Air Defense", "Bomb Tower", "Seeking Air Mine", "Spring Trap", "Giant Bomb", "Red Air Bomb", "Town Hall", "Clan Castle", "Gold Mine", "Elixir Pump", "Barracks", "Laboratory", "Spell Factory", "Workshop", "Seige Machine", "Battle Machine", "Electrofire Wizard"
		  ],

          Celebs: [
			"Leonardo DiCaprio", "Brad Pitt", "Angelina Jolie", "Tom Cruise", "Johnny Depp", "Will Smith", "Dwayne Johnson", "Scarlett Johansson", "Robert Downey Jr", "Jennifer Lawrence", "Chris Hemsworth", "Emma Watson", "Ryan Reynolds", "Keanu Reeves", "Tom Hanks", "Meryl Streep", "Morgan Freeman", "Samuel L Jackson", "Denzel Washington", "Viola Davis", "Oprah Winfrey", "Beyonce", "Taylor Swift", "Cristiano Ronaldo", "Lionel Messi", "Elon Musk", "Mark Zuckerberg", "Bill Gates", "Jeff Bezos", "Barack Obama", "Donald Trump", "Queen Elizabeth", "Princess Diana", "Marilyn Monroe", "Elvis Presley", "Michael Jackson", "Madonna", "Lady Gaga", "Rihanna", "Justin Bieber", "Ariana Grande", "Kylie Jenner", "Kim Kardashian", "Kendall Jenner", "Selena Gomez", "Zendaya", "Tom Holland", "Chris Evans", "Chris Pratt", "Gal Gadot", "Margot Robbie", "Henry Cavill", "Ben Affleck", "Matt Damon", "George Clooney", "Julia Roberts", "Sandra Bullock", "Nicole Kidman", "Halle Berry", "Reese Witherspoon", "Al Pacino", "Robert De Niro", "Jack Nicholson", "Marlon Brando", "Dustin Hoffman", "Anthony Hopkins", "Gary Oldman", "Daniel Day-Lewis", "Christian Bale", "Joaquin Phoenix", "Philip Seymour Hoffman", "Heath Ledger", "Clint Eastwood", "Sean Connery", "Harrison Ford", "Cillian Murphy", "Idris Elba", "Mahershala Ali", "Cate Blanchett", "Kate Winslet", "Jessica Chastain", "Amy Adams", "Emma Stone", "Anne Hathaway", "Natalie Portman", "Charlize Theron", "Tilda Swinton", "Frances McDormand", "Judi Dench", "Helen Mirren", "Maggie Smith", "Audrey Hepburn", "Grace Kelly", "Elizabeth Taylor", "Katharine Hepburn", "Bette Davis", "Ingrid Bergman", "Humphrey Bogart", "Cary Grant", "James Stewart", "Gregory Peck", "Charlie Chaplin", "Buster Keaton", "Laurence Olivier", "Orson Welles", "Kirk Douglas", "Burt Lancaster", "Sidney Poitier", "Paul Newman", "Steve McQueen", "James Dean", "Michelle Yeoh", "Ke Huy Quan", "Brendan Fraser", "Austin Butler", "Florence Pugh", "Anya Taylor-Joy", "Timothée Chalamet", "Pedro Pascal", "Jenna Ortega", "The Beatles", "The Rolling Stones", "Led Zeppelin", "Queen", "Pink Floyd", "Bob Dylan", "David Bowie", "Elton John", "Freddie Mercury", "John Lennon", "Paul McCartney", "George Harrison", "Ringo Starr", "Bruce Springsteen", "Jimi Hendrix", "Eric Clapton", "Prince", "Stevie Wonder", "Aretha Franklin", "Whitney Houston", "Mariah Carey", "Celine Dion", "Frank Sinatra", "Dean Martin", "Sammy Davis Jr.", "Ray Charles", "James Brown", "Johnny Cash", "Bob Marley", "U2", "Nirvana", "Guns N' Roses", "Metallica", "AC/DC", "Eminem", "Dr. Dre", "Snoop Dogg", "Tupac Shakur", "The Notorious B.I.G.", "Jay-Z", "Kanye West", "Adele", "Ed Sheeran", "Coldplay", "Drake", "The Weeknd", "Billie Eilish", "Olivia Rodrigo", "Harry Styles", "Dua Lipa", "Bad Bunny", "J Balvin", "Shakira", "BTS", "BLACKPINK", "Mozart", "Beethoven", "Bach", "Tchaikovsky", "Pavarotti", "Andrea Bocelli", "Dolly Parton", "Willie Nelson", "Michael Jordan", "LeBron James", "Kobe Bryant", "Shaquille O'Neal", "Stephen Curry", "Tom Brady", "Joe Montana", "Peyton Manning", "Serena Williams", "Venus Williams", "Roger Federer", "Rafael Nadal", "Novak Djokovic", "Tiger Woods", "Jack Nicklaus", "Arnold Palmer", "Muhammad Ali", "Mike Tyson", "Floyd Mayweather", "Conor McGregor", "Usain Bolt", "Michael Phelps", "Simone Biles", "Wayne Gretzky", "Pele", "Diego Maradona", "David Beckham", "Neymar Jr.", "Kylian Mbappé", "Lewis Hamilton", "Michael Schumacher", "Ayrton Senna", "Babe Ruth", "Jackie Robinson", "Lionel Richie", "Megan Rapinoe", "Ronda Rousey", "Steven Spielberg", "Martin Scorsese", "Quentin Tarantino", "Christopher Nolan", "James Cameron", "Alfred Hitchcock", "Stanley Kubrick", "Francis Ford Coppola", "Ridley Scott", "Tim Burton", "George Lucas", "Peter Jackson", "The Coen Brothers", "Wes Anderson", "Spike Lee", "Guillermo del Toro", "Akira Kurosawa", "Ingmar Bergman", "Federico Fellini", "Woody Allen", "Clint Eastwood", "Greta Gerwig", "Sofia Coppola", "Chloé Zhao", "Bong Joon-ho", "William Shakespeare", "Charles Dickens", "Jane Austen", "Mark Twain", "Leo Tolstoy", "Fyodor Dostoevsky", "George Orwell", "J.R.R. Tolkien", "C.S. Lewis", "J.K. Rowling", "Stephen King", "George R.R. Martin", "Agatha Christie", "Arthur Conan Doyle", "Ernest Hemingway", "F. Scott Fitzgerald", "Virginia Woolf", "James Joyce", "Gabriel García Márquez", "Haruki Murakami", "Margaret Atwood", "Toni Morrison", "Maya Angelou", "Edgar Allan Poe", "Leonardo da Vinci", "Michelangelo", "Vincent van Gogh", "Pablo Picasso", "Rembrandt", "Claude Monet", "Salvador Dalí", "Frida Kahlo", "Andy Warhol", "Georgia O'Keeffe", "Jackson Pollock", "Banksy", "Coco Chanel", "Christian Dior", "Yves Saint Laurent", "Giorgio Armani", "Ralph Lauren", "Calvin Klein", "Donatella Versace", "Karl Lagerfeld", "Tom Ford", "Alexander McQueen", "Albert Einstein", "Isaac Newton", "Galileo Galilei", "Charles Darwin", "Marie Curie", "Nikola Tesla", "Thomas Edison", "Alexander Graham Bell", "Stephen Hawking", "Carl Sagan", "Neil deGrasse Tyson", "Jane Goodall", "Steve Jobs", "Tim Cook", "Sundar Pichai", "Satya Nadella", "Richard Branson", "Warren Buffett", "Charlie Munger", "Julius Caesar", "Cleopatra", "Alexander the Great", "Napoleon Bonaparte", "Winston Churchill", "Franklin D. Roosevelt", "John F. Kennedy", "Martin Luther King Jr.", "Malcolm X", "Nelson Mandela", "Mahatma Gandhi", "Abraham Lincoln", "George Washington", "Thomas Jefferson", "Queen Victoria", "Joan of Arc", "Vladimir Putin", "Xi Jinping", "Joe Biden", "Kamala Harris", "Angela Merkel", "Justin Trudeau", "Jacinda Ardern", "Volodymyr Zelenskyy", "Dalai Lama", "Pope Francis", "Johnny Carson", "David Letterman", "Jay Leno", "Conan O'Brien", "Ellen DeGeneres", "Jimmy Fallon", "Stephen Colbert", "Jimmy Kimmel", "John Oliver", "Trevor Noah", "Jon Stewart", "Howard Stern", "Joe Rogan", "Larry King", "Barbara Walters", "Walter Cronkite", "Anderson Cooper", "Christiane Amanpour", "Richard Pryor", "George Carlin", "Robin Williams", "Eddie Murphy", "Chris Rock", "Dave Chappelle", "Jerry Seinfeld", "Kevin Hart", "Ricky Gervais", "Gordon Ramsay", "Jamie Oliver", "Anthony Bourdain", "Julia Child", "Martha Stewart", "PewDiePie", "MrBeast (Jimmy Donaldson)", "Charli D'Amelio", "Addison Rae", "Logan Paul", "Jake Paul", "Ninja (Richard Tyler Blevins)", "Emma Chamberlain", "David Dobrik", "Liza Koshy", "Arnold Schwarzenegger", "Sylvester Stallone", "Bruce Willis", "Jackie Chan", "Jet Li", "Jim Carrey", "Adam Sandler", "Will Ferrell", "Steve Carell", "Jennifer Aniston", "Courteney Cox", "Lisa Kudrow", "Matt LeBlanc", "Matthew Perry", "David Schwimmer", "Hugh Jackman", "Daniel Radcliffe", "Rupert Grint", "Ian McKellen", "Patrick Stewart", "John Travolta", "Nicolas Cage", "Liam Neeson", "Russell Crowe", "Hugh Grant", "Colin Firth", "Jennifer Lopez", "Ben Stiller", "Owen Wilson", "Vince Vaughn", "Jack Black", "Rowan Atkinson", "Sacha Baron Cohen", "Britney Spears", "Christina Aguilera", "Justin Timberlake", "Bruno Mars", "Katy Perry", "Pharrell Williams", "Gwen Stefani", "Alicia Keys", "John Legend", "ABBA", "The Beach Boys", "Fleetwood Mac", "The Eagles", "Bee Gees", "Cher", "Tina Turner", "Diana Ross", "Barbra Streisand", "Billy Joel", "Garth Brooks", "Shania Twain", "Kenny Rogers", "Lil Wayne", "50 Cent", "Post Malone", "Green Day", "Red Hot Chili Peppers", "Foo Fighters", "Bon Jovi", "Aerosmith", "Van Halen", "Janet Jackson", "George Michael", "Prince William", "Prince Harry", "Kate Middleton", "Meghan Markle", "Magic Johnson", "Larry Bird", "Kareem Abdul-Jabbar", "Jerry Rice", "Dan Marino", "Mia Hamm", "Tony Hawk", "Shaun White", "Simon Cowell", "Ryan Seacrest", "Heidi Klum", "Tyra Banks", "Gisele Bündchen", "Naomi Campbell", "Kate Moss", "Cindy Crawford", "Harry Houdini", "David Copperfield", "David Blaine", "The Wachowskis", "Mel Brooks", "John Woo", "Spike Jonze", "Larry David", "Seth MacFarlane", "Matt Groening", "Jerry Bruckheimer", "Dr. Seuss (Theodor Geisel)", "Stan Lee", "Walt Disney"
		  ],

		  Movies: [
			"The Godfather", "Titanic", "Avatar", "Star Wars", "Jurassic Park", "The Matrix", "Inception", "Forrest Gump", "The Lion King", "Avengers", "Pulp Fiction", "Frozen", "The Dark Knight", "Harry Potter", "Back to the Future", "Rocky", "Gladiator", "Shrek", "Toy Story", "Jaws", "Interstellar", "Parasite", "Coco", "Up", "Wall-E", "Alien", "Terminator", "Fight Club", "Goodfellas", "Spirited Away", "Barbie", "Oppenheimer", "Dune", "Spider-Man", "Black Panther", "Iron Man", "Wonder Woman", "Joker", "Top Gun", "The Shining", "Get Out", "Blade Runner", "E.T.", "Indiana Jones", "Schindler's List", "Lord of the Rings", "Silence of the Lambs", "Casablanca", "Citizen Kane", "The Prestige", "Memento", "Se7en", "Zootopia", "Moana", "Inside Out", "Finding Nemo", "Ratatouille", "The Incredibles", "Whiplash", "La La Land", "The Social Network", "Her", "Gravity", "Mad Max", "Logan", "The Batman", "No Country for Old Men", "The Departed", "Heat", "Scarface", "Die Hard", "Mission Impossible", "John Wick", "Matrix Reloaded", "Matrix Revolutions", "Kill Bill", "Reservoir Dogs", "Inglourious Basterds", "Django Unchained", "Once Upon a Time in Hollywood", "The Good the Bad and the Ugly", "A Fistful of Dollars", "For A Few Dollars More", "2001: A Space Odyssey", "Apocalypse Now", "Taxi Driver", "One Flew Over the Cuckoo's Nest", "Amadeus", "Chinatown", "Fargo", "Eternal Sunshine of the Spotless Mind", "Requiem for a Dream", "Pan's Labyrinth", "Oldboy", "Crouching Tiger Hidden Dragon", "Drive", "Donnie Darko", "The Grand Budapest Hotel", "Boyhood", "Mad Max: Fury Road", "Room", "Spotlight", "Moonlight", "Call Me By Your Name", "Nomadland", "Everything Everywhere All at Once", "Poor Things", "The Shawshank Redemption", "The Wizard of Oz", "The Sound of Music", "Psycho", "Grease", "Home Alone", "Ghostbusters", "The Breakfast Club", "Ferris Bueller's Day Off", "The Sixth Sense", "Saving Private Ryan", "Braveheart", "The Truman Show", "A Beautiful Mind", "The Green Mile", "Cast Away", "Apollo 13", "Terminator 2: Judgment Day", "Predator", "RoboCop", "Total Recall", "The Goonies", "Gremlins", "Raiders of the Lost Ark", "Blade Runner 2049", "The Big Lebowski", "The Princess Bride", "Mean Girls", "Legally Blonde", "Clueless", "The Devil Wears Prada", "The Notebook", "A Star Is Born", "Bohemian Rhapsody", "The Wolf of Wall Street", "American Psycho", "The Aviator", "Twister", "Independence Day", "Men in Black", "Bad Boys", "Rush Hour", "Beverly Hills Cop", "Coming to America", "Groundhog Day", "Ghost", "Dirty Dancing", "Pretty Woman", "The Usual Suspects", "L.A. Confidential", "Unbreakable", "Signs", "Split", "Glass", "Arrival", "Dunkirk", "1917", "All Quiet on the Western Front", "The Revenant", "The Hateful Eight", "The Irishman", "Spider-Man: Into the Spider-Verse", "Spider-Man: Across the Spider-Verse", "Deadpool", "Deadpool & Wolverine", "Guardians of the Galaxy", "Thor: Ragnarok", "Doctor Strange", "Captain Marvel", "Black Widow", "Ant-Man", "Shang-Chi", "Pirates of the Caribbean", "National Treasure", "Ocean's Eleven", "The Italian Job", "Fast and Furious", "Extraction", "The Martian", "Prometheus", "Ex Machina", "A Quiet Place", "Hereditary", "Midsommar", "The Witch", "The Conjuring", "Insidious", "Halloween", "Friday the 13th", "A Nightmare on Elm Street", "Scream", "The Exorcist", "Poltergeist", "The Texas Chain Saw Massacre", "The Birds", "Rear Window", "Vertigo", "North by Northwest", "Sunset Boulevard", "Some Like It Hot", "Singin' in the Rain", "Beauty and the Beast", "Aladdin", "The Little Mermaid", "Mulan", "Hercules", "Tarzan", "How to Train your Dragon", "Kung Fu Panda", "Despicable Me", "Minions", "Ice Age", "Madagascar", "Shrek 2", "Puss in Boots", "Sing", "Encanto", "Raya and the Last Dragon", "Luca", "Soul", "Turning Red", "Elemental", "Dune: Part Two", "Inside Out 2", "Gladiator II", "Alien: Romulus", "Wicked", "Twisters", "The Hangover", "Superbad", "Step Brothers", "Bridesmaids", "21 Jump Street", "Anchorman", "The Truman Show", "Catch Me If You Can", "The Great Gatsby", "The 40-Year-Old Virgin", "Knives Out", "Glass Onion", "John Wick: Chapter 4", "Furiosa: A Mad Max Saga", "Kingdom of the Planet of the Apes", "Gone with the Wind", "Lawrence of Arabia", "Dr. Strangelove", "A Clockwork Orange", "Paths of Glory", "Full Metal Jacket", "Raging Bull", "Casino", "The King of Comedy", "Good Will Hunting", "Dead Poets Society", "The Fugitive", "Unforgiven", "Mystic River", "Million Dollar Baby", "Gran Torino", "The Searchers", "High Noon", "Butch Cassidy and the Sundance Kid", "The Sting", "American Graffiti", "Close Encounters of the Third Kind", "Do the Right Thing", "Malcolm X", "When Harry Met Sally...", "Sleepless in Seattle", "You've Got Mail", "The Apartment", "Double Indemnity", "The Third Man", "On the Waterfront", "12 Angry Men", "To Kill a Mockingbird", "It's a Wonderful Life", "Mr. Smith Goes to Washington", "The Philadelphia Story", "Bringing Up Baby", "His Girl Friday", "Modern Times", "City Lights", "The Gold Rush", "The General", "Metropolis", "Nosferatu", "The Cabinet of Dr. Caligari", "Seven Samurai", "Rashomon", "Yojimbo", "Ikiru", "Tokyo Story", "Late Spring", "The 400 Blows", "Breathless", "Cleo from 5 to 7", "Bicycle Thieves", "La Dolce Vita", "8½", "The Battle of Algiers", "Stalker", "Andrei Rublev", "Solaris", "Come and See", "Persona", "The Seventh Seal", "Wild Strawberries", "Fanny and Alexander", "City of God", "Amores Perros", "Y Tu Mamá También", "Roma", "The Handmaiden", "A Separation", "Cinema Paradiso", "Life Is Beautiful", "Amélie", "The Intouchables", "Portrait of a Lady on Fire", "Train to Busan", "The Wailing", "Memories of Murder", "Akira", "Grave of the Fireflies", "My Neighbor Totoro", "Princess Mononoke", "Howl's Moving Castle", "Perfect Blue", "Your Name", "A Silent Voice", "Klaus", "The Mitchells vs. the Machines", "Wolfwalkers", "Persepolis", "Waltz with Bashir", "Fantastic Mr. Fox", "Isle of Dogs", "Coraline", "The Nightmare Before Christmas", "Corpse Bride", "James and the Giant Peach", "Anomalisa", "Loving Vincent", "The Triplets of Belleville", "Lilo & Stitch", "The Emperor's New Groove", "Treasure Planet", "The Prince of Egypt", "The Iron Giant", "Who Framed Roger Rabbit", "Watership Down", "Fritz the Cat", "Heavy Metal", "The Land Before Time", "An American Tail", "The Secret of NIMH", "Fantastic Planet", "Yellow Submarine", "This Is Spinal Tap", "Waiting for Guffman", "Best in Show", "A Mighty Wind", "Borat", "Airplane!", "The Naked Gun", "Blazing Saddles", "Young Frankenstein", "Monty Python and the Holy Grail", "Life of Brian", "Dr. Strangelove", "Office Space", "Dazed and Confused", "Wet Hot American Summer", "Hot Fuzz", "Shaun of the Dead", "Scott Pilgrim vs. the World", "Booksmart", "Little Miss Sunshine", "Juno", "Sideways", "Lost in Translation", "Before Sunrise", "Before Sunset", "Before Midnight", "Blue Velvet", "Mulholland Drive", "Eraserhead", "The Elephant Man", "There Will Be Blood", "Boogie Nights", "Magnolia", "Punch-Drunk Love", "The Master", "Phantom Thread", "The Lighthouse", "Uncut Gems", "Good Time", "Lady Bird", "Little Women", "Marriage Story", "The Florida Project", "Tangerine", "Beasts of the Southern Wild", "Winter's Bone", "Hell or High Water", "Wind River", "Sicario", "Prisoners", "Zodiac", "The Girl with the Dragon Tattoo", "Gone Girl", "Shutter Island", "Children of Men", "District 9", "Gattaca", "Source Code", "Moon", "Looper", "Edge of Tomorrow", "Annihilation", "Under the Skin", "Contagion", "Sunshine", "28 Days Later", "Let the Right One In", "The Babadook", "It Follows", "The Descent", "REC", "The Ring", "Rosemary's Baby", "The Omen", "Carrie", "Don't Look Now", "Suspiria", "The Thing", "An American Werewolf in London", "The Fly", "Videodrome", "Scanners", "The Brood", "The Dead Zone", "They Live", "Big Trouble in Little China", "Escape from New York", "The Warriors", "Enter the Dragon", "Fist of Fury", "Drunken Master", "Police Story", "Hard Boiled", "The Killer", "A Better Tomorrow", "Infernal Affairs", "Hero", "House of Flying Daggers", "Ip Man", "The Raid: Redemption", "The Raid 2", "Dredd", "300", "Sin City", "Watchmen", "V for Vendetta", "Snowpiercer", "Okja", "The Host", "The French Connection", "Bullitt", "Dirty Harry", "Point Break", "Speed", "Lethal Weapon", "First Blood", "Commando", "Con Air", "The Rock", "Face/Off", "Armageddon", "Air Force One", "Patriot Games", "Clear and Present Danger", "The Hunt for Red October", "Goldfinger", "From Russia with Love", "Casino Royale", "Skyfall", "Dr. No", "Star Trek II: The Wrath of Khan", "Star Trek (2009)", "Galaxy Quest", "Serenity", "Planet of the Apes (1968)", "Dawn of the Planet of the Apes", "War for the Planet of the Apes", "The Hunger Games", "Catching Fire", "The Bourne Identity", "The Bourne Supremacy", "The Bourne Ultimatum", "Minority Report", "A.I. Artificial Intelligence", "War of the Worlds", "JFK", "Platoon", "The Deer Hunter", "Full Metal Jacket", "Das Boot", "Downfall", "The Pianist", "The Great Escape", "The Bridge on the River Kwai", "Spartacus", "Ben-Hur", "The Ten Commandments", "Cleopatra", "Gone Girl", "The Game", "Misery", "Cape Fear", "Fatal Attraction", "Basic Instinct", "The Hand That Rocks the Cradle", "Single White Female", "Stand by Me", "Rain Man", "Terms of Endearment", "Steel Magnolias", "When a Man Loves a Woman", "Jerry Maguire", "As Good as It Gets", "Almost Famous", "High Fidelity", "Garden State", "500 Days of Summer", "About a Boy", "Notting Hill", "Four Weddings and a Funeral", "Love Actually", "Bridget Jones's Diary", "My Big Fat Greek Wedding", "There's Something About Mary", "Dumb and Dumber", "Ace Ventura: Pet Detective", "Wayne's World", "Bill & Ted's Excellent Adventure", "Sixteen Candles", "Pretty in Pink", "Weird Science", "Fast Times at Ridgemont High", "Risky Business", "Top Gun: Maverick", "The Color Purple", "The Last Emperor", "Out of Africa", "Dances with Wolves", "A River Runs Through It", "Legends of the Fall", "The English Patient", "Shakespeare in Love", "Chicago", "Moulin Rouge!", "The Greatest Showman", "Les Misérables", "Sweeney Todd: The Demon Barber of Fleet Street", "Into the Woods", "West Side Story", "My Fair Lady", "Cabaret", "All That Jazz", "Fame", "Flashdance", "Footloose", "Saturday Night Fever", "American Graffiti", "Rebel Without a Cause", "The Wild One", "Easy Rider", "Network", "Broadcast News", "Tootsie", "Kramer vs. Kramer", "Ordinary People", "Sophie's Choice", "Gandhi", "Chariots of Fire", "The King's Speech", "Argo", "The Artist", "Slumdog Millionaire", "Birdman", "12 Years a Slave", "The Shape of Water", "Green Book", "Mank", "The Father", "Belfast", "CODA", "The Power of the Dog", "Drive My Car", "Licorice Pizza", "Anatomy of a Fall", "The Holdovers", "Past Lives", "Killers of the Flower Moon", "Zone of Interest", "American Fiction", "The Fabelmans", "Tár", "West Side Story (2021)", "Nope", "The Menu", "Talk to Me", "Barbarian", "X", "Pearl", "Infinity Pool", "Beau Is Afraid", "Asteroid City", "The French Dispatch", "Jojo Rabbit", "Three Billboards Outside Ebbing, Missouri", "Manchester by the Sea", "If Beale Street Could Talk", "Selma", "Hidden Figures", "The Help", "Straight Outta Compton", "Creed", "Ford v Ferrari", "Moneyball", "The Blind Side", "Remember the Titans", "Rudy", "Hoosiers", "Field of Dreams", "A League of Their Own", "Caddyshack", "The Karate Kid", "Rocky IV", "The Lost Boys", "Beetlejuice", "Edward Scissorhands", "Big Fish", "Willy Wonka & the Chocolate Factory", "Mary Poppins", "Chitty Chitty Bang Bang", "Bedknobs and Broomsticks", "The Parent Trap", "Freaky Friday", "Elf", "The Polar Express", "A Christmas Story", "It's a Wonderful Life", "Miracle on 34th Street", "White Christmas", "National Lampoon's Christmas Vacation", "Scrooged", "The Muppet Christmas Carol", "Love Actually", "Die Hard 2", "Aliens", "Predator 2", "Lethal Weapon 2", "Mad Max 2: The Road Warrior", "The Empire Strikes Back", "Return of the Jedi", "The Phantom Menace", "Attack of the Clones", "Revenge of the Sith", "The Force Awakens", "The Last Jedi", "The Rise of Skywalker", "Rogue One", "Solo", "Harry Potter and the Sorcerer's Stone", "Harry Potter and the Chamber of Secrets", "Harry Potter and the Prisoner of Azkaban", "Harry Potter and the Goblet of Fire", "Harry Potter and the Order of the Phoenix", "Harry Potter and the Half-Blood Prince", "Harry Potter and the Deathly Hallows – Part 1", "Harry Potter and the Deathly Hallows – Part 2", "Fantastic Beasts and Where to Find Them", "The Lord of the Rings: The Fellowship of the Ring", "The Lord of the Rings: The Two Towers", "The Lord of the Rings: The Return of the King", "The Hobbit: An Unexpected Journey", "The Hobbit: The Desolation of Smaug", "The Hobbit: The Battle of the Five Armies", "The Chronicles of Narnia: The Lion, the Witch and the Wardrobe", "Willow", "Labyrinth", "The Dark Crystal", "Conan the Barbarian", "Highlander", "The Mummy", "Tomb Raider", "Jumanji", "Zathura", "The NeverEnding Story", "Hook", "Peter Pan", "Alice in Wonderland", "Cinderella", "Snow White and the Seven Dwarfs", "Pinocchio", "Dumbo", "Bambi", "Fantasia", "101 Dalmatians", "The Jungle Book", "The Aristocats", "Robin Hood", "The Rescuers", "The Fox and the Hound", "Oliver & Company", "The Great Mouse Detective", "Pocahontas", "The Hunchback of Notre Dame", "Atlantis: The Lost Empire", "Tangled", "Wreck-It Ralph", "Big Hero 6", "Zootopia", "Happy Feet", "Surf's Up", "Cloudy with a Chance of Meatballs", "Hotel Transylvania", "The Lego Movie", "Paddington", "Paddington 2", "Babe", "Stuart Little", "Charlotte's Web", "Chicken Run", "Wallace & Gromit: The Curse of the Were-Rabbit", "Flushed Away", "Cars", "A Bug's Life", "Monsters, Inc.", "Monsters University", "Finding Dory", "The Incredibles 2", "Toy Story 2", "Toy Story 3", "Toy Story 4", "Lightyear", "Onward"
		  ],

		  Food: [
		    "Pizza","Sushi","Burger","Tacos","Pasta","Curry","Steak","Salad","Sandwich","Soup","Fried Chicken","Ramen","Dumplings","Burrito","Pancakes","Waffles","Ice Cream","Chocolate","Cheese","Bread","Donuts","Croissant","Bagel","Hot Dog","Fries","Lasagna","Paella","Kebab","Falafel","Dim Sum","Pho","Pad Thai","Biryani","Sashimi","Tiramisu","Cheesecake","Pie","Brownie","Popcorn","Nachos","Guacamole","Hummus","Omelette","Yogurt","Bacon","Sausage","Risotto","Gnocchi","Pretzel","Macaron","Tofu","Kimchi","Spring Roll","Fish and Chips","Meatballs","Chili","Stew","Cereal","Toast","Jam","Honey","Butter","Smoothie","Milkshake","Cupcake","Muffin","Pudding","Custard","Gelato","Sorbet","Noodles","Udon","Soba","Tempura","Katsu","Ribs","Hot Wings","BBQ","Fajitas","Quesadilla","Empanada","Arepa","Chow Mein","Fried Rice","Tikka Masala","Goulash","Ceviche","Moussaka","Pierogi","Schnitzel","Tapas","Wonton","Lumpia","Jambalaya","Gumbo","Beignets","Baklava","Cannoli","Crepe","Panna Cotta","Scone","Biscotti","Mochi","Churro","Eclair","Souffle","Fondue","Pesto","Salsa","Relish","Mustard","Ketchup","Mayonnaise","Vinegar","Olive Oil","Saffron","Cinnamon","Basil","Oregano","Thyme","Rosemary","Garlic","Onion","Ginger","Pepper","Salt","Sugar","Flour","Egg","Milk","Coffee","Tea","Juice","Water","Soda","Wine","Beer","Cocktail","Whiskey","Vodka","Gin","Rum","Tequila","Hamburger Steak","Sloppy Joe","Pulled Pork","Brisket","Roast Chicken","Roast Beef","Turkey","Duck","Lamb Chops","Shepherd’s Pie","Chicken Pot Pie","Cornbread","Mashed Potatoes","Baked Potato","Sweet Potato","Coleslaw","Caesar Salad","Greek Salad","Caprese","Gazpacho","Minestrone","Clam Chowder","Bisque","Lobster Roll","Crab Cakes","Shrimp Scampi","Grilled Salmon","Tuna Steak","Fish Tacos","Poke Bowl","Acai Bowl","Granola","Overnight Oats","French Toast","Shakshuka","Huevos Rancheros","Tamales","Enchiladas","Pozole","Menudo","Birria","Roti","Naan","Paratha","Samosa","Pakora","Dal","Chana Masala","Aloo Gobi","Butter Chicken","Korma","Vindaloo","Bibimbap","Bulgogi","Japchae","Okonomiyaki","Takoyaki","Onigiri","Miso Soup","Teriyaki","Yakitori","Bao Buns","Xiao Long Bao","Mapo Tofu","Kung Pao Chicken","Peking Duck","Char Siu","Laksa","Satay","Nasi Goreng","Mee Goreng","Rendang","Tom Yum","Green Curry","Red Curry","Som Tam","Banh Mi","Croque Monsieur","Croque Madame","Ratatouille","Quiche","Coq au Vin","Beef Bourguignon","Escargots","Paella Valenciana","Chorizo","Patatas Bravas","Tortilla Española","Arancini","Osso Buco","Carbonara","Cacio e Pepe","Focaccia","Bruschetta","Calzone","Piadina","Polenta","Sarma","Ćevapi","Borscht","Pelmeni","Blini","Kielbasa","Big Mac","Falooda","Kulfi","Gulab Jamun","Rasgulla","Jalebi","Halva","Turkish Delight","Marzipan","Trifle","Pavlova","Lamington","Anzac Biscuits","Banana Bread","Carrot Cake","Red Velvet Cake","Black Forest Cake","Apple Crumble","Fruit Tart","Key Lime Pie","Pecan Pie","Pumpkin Pie","Granita","Affogato","Espresso","Cappuccino","Latte","Matcha","Bubble Tea","Iced Tea","Energy Drink"
		  ],

		  Brands: [
		    "Apple", "Nike", "Coca-Cola", "Samsung", "McDonalds", "Toyota", "Disney", "Amazon", "Google", "Tesla", "Adidas", "Pepsi", "Starbucks", "Netflix", "Microsoft", "Mercedes", "BMW", "Honda", "Sony", "Lego", "IKEA", "Zara", "H&M", "Gucci", "Louis Vuitton", "Rolex", "Canon", "Nikon", "PlayStation", "Xbox", "Spotify", "Uber", "Airbnb", "Facebook", "Instagram", "TikTok", "Twitter", "YouTube", "Visa", "Mastercard", "Ferrari", "Porsche", "Lamborghini", "Intel", "AMD", "Dell", "HP", "Adobe", "Slack", "Zoom", "Ford", "Chevrolet", "Jeep", "Nissan", "Hyundai", "Kia", "Volkswagen", "Audi", "Prada", "Chanel", "Hermes", "Versace", "Burberry", "Tiffany", "Cartier", "Omega", "Asus", "Acer", "Lenovo", "Huawei", "Xiaomi", "Red Bull", "Monster", "Shell", "BP", "Total", "Pfizer", "Moderna", "LG", "Panasonic", "Philips", "Bosch", "Siemens", "General Electric", "Caterpillar", "Boeing", "SpaceX", "Virgin Galactic", "Nintendo", "Electronic Arts", "Activision Blizzard", "Ubisoft", "Rockstar Games", "Square Enix", "Capcom", "Sega", "Bandai Namco", "Puma", "Under Armour", "New Balance", "Reebok", "Converse", "Vans", "Doc Martens", "Ray-Ban", "Oakley", "Fender", "Gibson", "Yamaha", "Bose", "JBL", "Harman Kardon", "Dyson", "SharkNinja", "Whirlpool", "Electrolux", "KitchenAid", "Tefal", "Logitech", "Razer", "Corsair", "Seagate", "Western Digital", "Kingston", "SanDisk", "Walmart", "Costco", "Target", "Home Depot", "Lowe's", "Best Buy", "Alibaba", "Tencent", "JD.com", "eBay", "Etsy", "Shopify", "7-Eleven", "Carrefour", "Aldi", "Lidl", "Tesco", "Walgreens", "CVS Health", "Sephora", "Ulta Beauty", "Wayfair", "Nvidia", "Oracle", "IBM", "Salesforce", "SAP", "Cisco", "Qualcomm", "Broadcom", "TSMC", "Texas Instruments", "LinkedIn", "Snapchat", "Pinterest", "Reddit", "Twitch", "Wikipedia", "Mozilla", "Dropbox", "ServiceNow", "Intuit", "Palantir", "Snowflake", "Garmin", "Fitbit", "GoPro", "Roku", "Vimeo", "WeChat", "Line", "WhatsApp", "Telegram", "Discord", "KFC", "Burger King", "Subway", "Domino's", "Pizza Hut", "Taco Bell", "Wendy's", "Chipotle", "Dunkin'", "Tim Hortons", "Krispy Kreme", "Nestle", "Danone", "Kellogg's", "General Mills", "Heinz", "Kraft", "Hershey's", "Mars", "Cadbury", "Ferrero Rocher", "Nutella", "Oreo", "Lays", "Doritos", "Pringles", "Cheetos", "Gatorade", "Mountain Dew", "Dr Pepper", "Sprite", "Fanta", "7up", "Budweiser", "Heineken", "Corona", "Guinness", "Stella Artois", "Jack Daniel's", "Johnnie Walker", "Smirnoff", "Bacardi", "Grey Goose", "Hennessy", "Moët & Chandon", "P&G", "Unilever", "Johnson & Johnson", "Gillette", "Colgate", "Oral-B", "Dove", "Nivea", "Head & Shoulders", "Old Spice", "Axe", "L'Oreal", "Estee Lauder", "Maybelline", "MAC Cosmetics", "Volvo", "Mazda", "Subway", "Suzuki", "Jaguar", "Land Rover", "Bentley", "Rolls-Royce", "Aston Martin", "Bugatti", "McLaren", "Maserati", "Alfa Romeo", "Fiat", "Peugeot", "Renault", "Citroen", "Skoda", "Mini", "Harley-Davidson", "Ducati", "Vespa", "Kawasaki", "Bridgestone", "Michelin", "Goodyear", "Continental", "Uniqlo", "Gap", "Levi's", "Calvin Klein", "Tommy Hilfiger", "Ralph Lauren", "The North Face", "Patagonia", "Columbia", "Timberland", "Helly Hansen", "Arc'teryx", "Lululemon", "Gymshark", "Champion", "Fila", "Skechers", "Asics", "Saucony", "Brooks", "Hoka", "Crocs", "Birkenstock", "Supreme", "Off-White", "Balenciaga", "Dior", "Saint Laurent", "Fendi", "Givenchy", "Valentino", "Dolce & Gabbana", "Armani", "Hugo Boss", "Michael Kors", "Coach", "Kate Spade", "Victoria's Secret", "American Express", "PayPal", "Stripe", "Square", "Revolut", "Chase", "Citi", "Wells Fargo", "Bank of America", "Goldman Sachs", "Morgan Stanley", "HSBC", "Barclays", "UBS", "Credit Suisse", "Deutsche Bank", "Allianz", "AXA", "Berkshire Hathaway", "BlackRock", "Fidelity", "Charles Schwab", "Coinbase", "Binance", "Warner Bros", "Universal", "Paramount", "20th Century Studios", "DreamWorks", "Pixar", "Marvel", "DC Comics", "HBO", "Showtime", "ESPN", "MTV", "CNN", "BBC", "Fox", "NBC", "CBS", "ABC", "Sky", "Bloomberg", "Reuters", "National Geographic", "Discovery", "Time", "Vogue", "Rolling Stone", "Delta", "United Airlines", "American Airlines", "Southwest", "British Airways", "Lufthansa", "Air France", "Emirates", "Qatar Airways", "Singapore Airlines", "Ryanair", "EasyJet", "Marriott", "Hilton", "Hyatt", "Sheraton", "InterContinental", "Holiday Inn", "Four Seasons", "Ritz-Carlton", "Expedia", "Booking.com", "TripAdvisor", "Royal Caribbean", "Carnival", "FedEx", "UPS", "DHL", "Maersk", "General Motors", "Lockheed Martin", "Northrop Grumman", "Raytheon", "Airbus", "Honeywell", "3M", "DuPont", "Dow", "BASF", "John Deere", "Komatsu", "Tag Heuer", "Breitling", "Patek Philippe", "Audermars Piguet", "Richard Mille", "Hublot", "IWC", "Seiko", "Casio", "G-Shock", "Swatch", "Tissot", "Longines", "Pandora", "Swarovski"
		  ],

		  Technology: [
		    "iPhone", "Laptop", "Drone", "Robot", "Bluetooth", "Wifi", "Keyboard", "Mouse", "Monitor", "Camera", "Headphones", "Smartwatch", "Tablet", "Printer", "Router", "Server", "Microchip", "Satellite", "Telescope", "Microscope", "VR Headset", "Console", "Battery", "Charger", "USB", "Cloud", "Algorithm", "Internet", "Software", "Hardware", "Smartphone", "GPS", "Laser", "Radar", "Scanner", "Projector", "Speaker", "Microphone", "Webcam", "Flash Drive", "Hard Drive", "Processor", "Graphics Card", "Motherboard", "Fan", "Screen", "Pixel", "Code", "Database", "Network", "Firewall", "Encryption", "Hacker", "Virus", "AI", "Blockchain", "Crypto", "NFT", "API", "Framework", "Library", "Compiler", "Terminal", "Shell", "Kernel", "Operating System", "Linux", "Windows", "MacOS", "Android", "iOS", "Ethernet", "5G", "4G", "Fiber", "Quantum Computer", "VR", "AR", "Mixed Reality", "Biometrics", "Cybernetics", "Nanotechnology", "Supercomputer", "Mainframe", "Modem", "Switch", "Hub", "Gateway", "Protocol", "TCP/IP", "HTTP", "HTML", "CSS", "JavaScript", "Python", "Java", "C++", "C#", "SQL", "Big Data", "Machine Learning", "Deep Learning", "Neural Network", "IoT", "Smart Home", "Smart Grid", "Automation", "Robotics", "Interface", "User Experience", "User Interface", "Touchscreen", "Gesture Control", "Voice Recognition", "Speech Synthesis", "Teleportation", "Hologram", "Transistor", "Capacitor", "Resistor", "Diode", "Semiconductor", "SSD", "RAM", "GPU", "CPU", "Power Supply", "Heat Sink", "Liquid Cooling", "Thermal Paste", "Virtual Machine", "Container", "Docker", "Kubernetes", "Git", "Version Control", "Repository", "Branch", "Commit", "Merge", "Pull Request", "Bug", "Patch", "Update", "Download", "Upload", "Streaming", "Resolution", "4K", "8K", "HDR", "OLED", "LED", "LCD", "CRT", "Floppy Disk", "CD-ROM", "DVD", "Blu-ray", "Vacuum Tube", "Telegraph", "Radio", "Television", "Broadband", "Dial-up", "Hotspot", "Tethering", "SIM Card", "eSIM", "NFC", "RFID", "Infrared", "Sensor", "Actuator", "Gyroscope", "Accelerometer", "Lidar", "Sonar", "Geiger Counter", "Spectrometer", "Workstation", "VPN", "Proxy", "DNS", "IP Address", "MAC Address", "Subnet", "Port", "Packet", "Ping", "Latency", "Bandwidth", "Jitter", "Lag", "Crash", "Blue Screen", "Stack Overflow", "Memory Leak", "Syntax", "Logic", "Boolean", "Integer", "Float", "String", "Array", "Object", "Class", "Function", "Variable", "Recursion", "Loop", "Regex", "JSON", "XML", "YAML", "CSV", "Markdown", "SaaS", "PaaS", "IaaS", "Serverless", "Microservices", "REST", "GraphQL", "Websocket", "AJAX", "DOM", "Browser", "Search Engine", "SEO", "Cookies", "Cache", "Token", "OAuth", "SSO", "Password", "Fingerprint", "Face ID", "Cryptography", "Public Key", "Private Key", "Hash", "SSL", "TLS", "HTTPS", "SSH", "FTP", "SMTP", "VoIP", "Codec", "Compression", "MP3", "MP4", "JPEG", "PNG", "PDF", "EXE", "APK", "BIOS", "UEFI", "Firmware", "Driver", "Registry", "Command Line", "Script", "Bash", "IDE", "Visual Studio", "Unity", "Unreal Engine", "Photoshop", "CMS", "CRM", "ERP", "ATM", "Vending Machine", "CCTV", "Botnet", "Phishing", "Malware", "Ransomware", "Spyware", "Adware", "Trojan", "Worm", "Rootkit", "Zero Day", "Sandbox", "Honeypot", "Backdoor", "Logic Bomb", "Keylogger", "Exoskeleton", "Bionics", "Genomics", "Bioinformatics", "Telematics", "Avionics", "UAV", "Autonomous Vehicle", "Electric Vehicle", "Hybrid", "Fuel Cell", "Solar Panel", "Wind Turbine", "Inverter", "Microgrid", "Substation", "Transformer", "Multimeter", "Oscilloscope", "Soldering Iron", "3D Printer", "CNC Machine", "Laser Cutter", "Raspberry Pi", "Arduino", "Microcontroller", "ESP32", "FPGA", "ASIC", "System on Chip"
		  ],

		  TV: [
		    "Stranger Things", "Game of Thrones", "Breaking Bad", "The Office", "Friends", "The Simpsons", "South Park", "SpongeBob SquarePants", "The Mandalorian", "The Crown", "Squid Game", "The Witcher", "Black Mirror", "Rick and Morty", "Avatar: The Last of Airbender", "The Sopranos", "The Wire", "Seinfeld", "Parks and Recreation", "Lost", "Grey's Anatomy", "The Walking Dead", "Modern Family", "Family Guy", "The Big Bang Theory", "How I Met Your Mother", "Doctor Who", "Sherlock", "Peaky Blinders", "Narcos", "Money Heist", "Ted Lasso", "The Boys", "Westworld", "Chernobyl", "Succession", "Fleabag", "The Marvelous Mrs. Maisel", "Ozark", "Better Call Saul", "Mad Men", "The X-Files", "Twin Peaks", "Saturday Night Live", "The Daily Show", "Key & Peele", "Chappelle's Show", "Curb Your Enthusiasm", "Arrested Development", "It's Always Sunny in Philadelphia", "Community", "30 Rock", "Veep", "Silicon Valley", "Atlanta", "Barry", "The Good Place", "Brooklyn Nine-Nine", "Schitt's Creek", "The Queen's Gambit", "Bridgerton", "WandaVision", "Loki", "House of the Dragon", "The Last of Us", "Yellowstone", "Severance", "Abbott Elementary", "Only Murders in the Building", "Invincible", "Arcane", "Bluey", "Adventure Time", "Regular Show", "Steven Universe", "Gravity Falls", "The Powerpuff Girls", "Dexter's Laboratory", "Samurai Jack", "iCarly", "Rugrats", "Hey Arnold!", "The Fairly OddParents", "Star Trek", "The Twilight Zone", "I Love Lucy", "MAS*H", "Cheers", "Frasier", "The Fresh Prince of Bel-Air", "Buffy the Vampire Slayer", "Firefly", "Battlestar Galactica", "Deadwood", "Fargo", "True Detective", "Mindhunter", "The Handmaid's Tale", "Orange Is the New Black", "House of Cards", "Downton Abbey", "Cobra Kai", "NCIS", "Law & Order", "24", "Prison Break", "Survivor", "House M.D.", "Scrubs", "Psych", "Monk", "Suits", "Gilmore Girls", "Supernatural", "The Vampire Diaries", "Gossip Girl", "One Tree Hill", "The O.C.", "Pretty Little Liars", "Desperate Housewives", "Scandal", "How to Get Away with Murder", "Empire", "Sons of Anarchy", "Vikings", "Spartacus", "Rome", "The Tudors", "Reign", "Outlander", "Luther", "Broadchurch", "Killing Eve", "Hannibal", "Bates Motel", "American Horror Story", "Grimm", "Once Upon a Time", "Charmed", "Angel", "Smallville", "Heroes", "Arrow", "The Flash", "Daredevil", "Jessica Jones", "The Punisher", "Gotham", "The Umbrella Academy", "Sense8", "Altered Carbon", "The Expanse", "Dark", "Silo", "For All Mankind", "The Bear", "Beef", "Wednesday", "The White Lotus", "Big Little Lies", "Mare of Easttown", "True Blood", "Entourage", "Ballers", "Insecure", "Girls", "Sex and the City", "Emily in Paris", "Sex Education", "Euphoria", "Alice in Borderland", "All of Us Are Dead", "Dragon Ball Z", "Naruto", "One Piece", "Attack on Titan", "Death Note", "Fullmetal Alchemist: Brotherhood", "Demon Slayer", "Cowboy Bebop", "Neon Genesis Evangelion", "Sailor Moon", "Pokémon", "Batman: The Animated Series", "X-Men: The Animated Series", "Justice League Unlimited", "Teen Titans", "Scooby-Doo", "Tom and Jerry", "Looney Tunes", "The Flintstones", "The Jetsons", "Animaniacs", "Pinky and the Brain", "Phineas and Ferb", "Kim Possible", "DuckTales", "Gargoyles", "Danny Phantom", "Ben 10", "Courage the Cowardly Dog", "Johnny Bravo", "Ed, Edd n Eddy", "Star Wars: The Clone Wars", "Andor", "Obi-Wan Kenobi", "The Muppet Show", "Sesame Street", "Bob's Burgers", "King of the Hill", "Futurama", "American Dad!", "Archer", "BoJack Horseman", "Big Mouth", "Love, Death & Robots", "Robot Chicken", "Beavis and Butt-Head", "Daria", "Top Gear", "The Great British Bake Off", "RuPaul's Drag Race", "Shark Tank", "American Idol", "The Voice", "Keeping Up with the Kardashians", "The Real Housewives of Beverly Hills", "Planet Earth", "MythBusters", "Dirty Jobs", "Jeopardy!", "Wheel of Fortune", "CSI: Crime Scene Investigation", "Criminal Minds", "Bones", "Castle", "The Mentalist", "Hawaii Five-0", "Blue Bloods", "Chicago Fire", "Chicago P.D.", "ER", "Stargate SG-1", "Malcolm in the Middle", "That '70s Show", "Married... with Children", "The Golden Girls", "Full House", "The Nanny", "Will & Grace", "Home Improvement", "Roseanne", "Everybody Loves Raymond", "King of Queens", "Two and a Half Men", "New Girl", "The Mindy Project", "Superstore", "Glee", "Henry Danger", "Drake & Josh", "Mr. Bean", "Game Shakers", "Dora the Explorer", "Peppa Pig", "The Thundermans", "The Loud House", "Paw Patrol", "Sanjay & Craig", "Mom", "The West Wing", "Six Feet Under", "The Americans", "Homeland", "Dexter", "Billions", "Yellowjackets", "This Is Us", "The Good Wife", "The Good Fight", "Mr. Robot", "Person of Interest", "Justified", "The Shield", "NYPD Blue", "Hill Street Blues", "The Leftovers", "Watchmen", "Boardwalk Empire", "Carnivàle", "Halt and Catch Fire", "Perry Mason", "Columbo", "The Rockford Files", "Magnum, P.I.", "Miami Vice", "The A-Team", "Knight Rider", "MacGyver", "Quantum Leap", "Airwolf", "The Incredible Hulk", "Wonder Woman", "Star Trek: The Next Generation", "Star Trek: Deep Space Nine", "Star Trek: Voyager", "The Orville", "Babylon 5", "Farscape", "Stargate Atlantis", "Killjoys", "Warehouse 13", "Eureka", "Fringe", "Lost in Space", "What We Do in the Shadows", "Letterkenny", "The IT Crowd", "Black Books", "Spaced", "Fawlty Towers", "Monty Python's Flying Circus", "Blackadder", "Red Dwarf", "Absolutely Fabulous", "The Office (UK)", "Peep Show", "The Inbetweeners", "Derry Girls", "Catastrophe", "Detectorists", "Taskmaster", "Whose Line Is It Anyway?", "Mythic Quest", "Reservation Dogs", "Our Flag Means Death", "The Great", "Russian Doll", "GLOW", "Unbreakable Kimmy Schmidt", "Master of None", "Bo Burnham: Inside", "Last Week Tonight with John Oliver", "The Colbert Report", "The Late Show with Stephen Colbert", "The Tonight Show Starring Johnny Carson", "Late Night with Conan O'Brien", "Conan", "Real Time with Bill Maher", "60 Minutes", "Frontline", "The Civil War", "Cosmos: A Personal Voyage", "Blue Planet", "Our Planet", "Making a Murderer", "The Jinx", "Tiger King", "Wild Wild Country", "Chef's Table", "Anthony Bourdain: Parts Unknown", "Ugly Delicious", "The Amazing Race", "America's Next Top Model", "Project Runway", "MasterChef", "The Bachelor", "Love Is Blind", "Queer Eye", "Terrace House", "The Muppets", "Fraggle Rock", "Reading Rainbow", "Mister Rogers' Neighborhood", "The Electric Company", "Schoolhouse Rock!", "Where in the World Is Carmen Sandiego?", "Bill Nye the Science Guy", "The Magic School Bus", "Arthur", "Cyberchase", "Clifford the Big Red Dog", "Barney & Friends", "Thomas & Friends", "Postman Pat", "Fireman Sam", "Noddy", "Teletubbies", "In the Night Garden...", "Yo Gabba Gabba!", "Total Drama", "6teen", "Clone High", "The Venture Bros.", "Aqua Teen Hunger Force", "Space Ghost Coast to Coast", "Home Movies", "Metalocalypse", "Harvey Birdman, Attorney at Law", "Sealab 2021", "The Boondocks", "Afro Samurai", "The Legend of Korra", "Young Justice", "ReBoot", "Beast Wars: Transformers", "My Hero Academia", "Jujutsu Kaisen", "JoJo's Bizarre Adventure", "Hunter x Hunter", "Steins;Gate", "Code Geass", "Gurren Lagann", "FLCL", "Samurai Champloo", "Trigun", "Yu Yu Hakusho", "Bleach", "Inuyasha", "Ranma ½", "Mobile Suit Gundam", "Macross", "Akira", "Ghost in the Shell: Stand Alone Complex", "Psycho-Pass", "Made in Abyss", "Vinland Saga", "The Promised Neverland", "Dr. Stone", "Re:Zero", "Sword Art Online", "Attack on Titan: Junior High", "Hetalia: Axis Powers", "Aggretsuko", "Castlevania", "The Dragon Prince", "She-Ra and the Princesses of Power", "Kipo and the Age of Wonderbeasts", "Hilda", "Trollhunters: Tales of Arcadia", "The Amazing World of Gumball", "We Bare Bears", "Chowder", "The Marvelous Misadventures of Flapjack", "Foster's Home for Imaginary Friends", "Codename: Kids Next Door", "The Grim Adventures of Billy & Mandy", "Invader Zim", "Rocko's Modern Life", "The Ren & Stimpy Show", "Doug", "Aaahh!!! Real Monsters", "The Wild Thornberrys", "Rocket Power", "As Told by Ginger", "All That", "The Amanda Show", "Kenan & Kel", "Good Burger", "Victorious", "Zoey 101", "Hannah Montana", "Wizards of Waverly Place", "The Suite Life of Zack & Cody", "That's So Raven", "Lizzie McGuire", "Even Stevens", "Boy Meets World", "Saved by the Bell", "Family Matters", "Step by Step", "Dinosaurs", "ALF", "Mork & Mindy", "Happy Days", "Laverne & Shirley", "The Jeffersons", "All in the Family", "Good Times", "Sanford and Son", "The Mary Tyler Moore Show", "The Bob Newhart Show", "Taxi", "WKRP in Cincinnati", "Barney Miller", "Soap", "Three's Company", "The Love Boat", "Fantasy Island", "Charlie's Angels", "Starsky & Hutch", "CHiPs", "Dallas", "Dynasty", "Falcon Crest", "Knots Landing", "Beverly Hills, 90210", "Melrose Place", "Dawson's Creek", "Felicity", "Party of Five", "My So-Called Life", "Freaks and Geeks", "Undeclared", "Veronica Mars", "Friday Night Lights", "Parenthood", "The Fosters", "Switched at Birth", "Jane the Virgin", "Crazy Ex-Girlfriend", "Ugly Betty", "Pushing Daisies", "Wonderfalls", "Dead Like Me", "Northern Exposure", "Picket Fences", "thirtysomething", "China Beach", "St. Elsewhere", "L.A. Law", "The Practice", "Boston Legal", "Ally McBeal", "Nip/Tuck", "The Shield", "Rescue Me", "Damages", "Weeds", "Californication", "The L Word", "Queer as Folk", "Tales from the Crypt", "The Outer Limits", "Alfred Hitchcock Presents", "Night Gallery", "Unsolved Mysteries", "America's Most Wanted", "Cops", "The First 48", "Hoarders", "Intervention", "Pawn Stars", "American Pickers", "Storage Wars", "Duck Dynasty", "Here Comes Honey Boo Boo", "Jon & Kate Plus 8", "19 Kids and Counting", "The Jerry Springer Show", "Maury", "The Oprah Winfrey Show", "Dr. Phil", "Ellen: The Ellen DeGeneres Show", "The View", "Live with Kelly and Ryan", "Today", "Good Morning America", "CBS This Morning", "Meet the Press", "Face the Nation", "This Week", "Fox News Sunday", "The O'Reilly Factor", "The Rachel Maddow Show", "Anderson Cooper 360°", "Tucker Carlson Tonight", "Teenage Mutant Ninja Turtles", "The Rookie", "Man vs. Bee", "BUNK'D", "Lab Rats", "Landman", "Beast Games", "Deal or No Deal", "Floor Is Lava", "MasterChef Australia", "Total Wipeout", "Are You Smarter than a 5th Grader?"
		  ],

		  Jobs: [
			"Doctor", "Teacher", "Engineer", "Lawyer", "Chef", "Pilot", "Firefighter", "Police", "Artist", "Musician", "Actor", "Writer", "Scientist", "Programmer", "Designer", "Architect", "Nurse", "Dentist", "Vet", "Farmer", "Astronaut", "Athlete", "Judge", "Politician", "Journalist", "Photographer", "Mechanic", "Plumber", "Electrician", "Carpenter", "Librarian", "Accountant", "Manager", "CEO", "Secretary", "Receptionist", "Waiter", "Bartender", "Barber", "Soldier", "Detective", "Spy", "Stewardess", "Captain", "Sailor", "Miner", "Baker", "Butcher", "Tailor", "Cleaner", "Gardener", "Driver", "Postman", "Courier", "Guard", "Coach", "Referee", "Data Analyst", "Data Scientist", "DevOps Engineer", "Cybersecurity Analyst", "Product Manager", "QA Tester", "Game Designer", "Animator", "3D Artist", "Sound Engineer", "Video Editor", "Therapist", "Counselor", "Social Worker", "Lobbyist", "Economist", "Statistician", "Mathematician", "Historian", "Archaeologist", "Geologist", "Meteorologist", "Biochemist", "Chemist", "Physicist", "Actuary", "Stockbroker", "Banker", "Real Estate Agent", "Broker", "Goldsmith", "Silversmith", "Welder", "Roofer", "Mason", "Crane Operator", "Truck Driver", "Taxi Driver", "Bus Driver", "Flight Attendant", "Customs Officer", "Border Patrol Agent", "Park Ranger", "Zookeeper", "Fisherman", "Forester", "Model", "Blogger", "Vlogger", "Influencer", "Tattoo Artist", "Florist", "Upholsterer", "Locksmith", "Mortician", "Embalmer", "Surgeon", "Paramedic", "Pharmacist", "Optometrist", "Chiropractor", "Midwife", "Radiologist", "Anesthesiologist", "Psychiatrist", "Psychologist", "Dietitian", "Nutritionist", "Physiotherapist", "Occupational Therapist", "Speech Therapist", "System Administrator", "Network Administrator", "Cloud Architect", "Full Stack Developer", "Backend Developer", "Frontend Developer", "UX Designer", "UI Designer", "Database Administrator", "IT Support Specialist", "Director", "Producer", "Screenwriter", "Cinematographer", "Makeup Artist", "Costume Designer", "Choreographer", "Conductor", "Composer", "DJ", "Magician", "Comedian", "Circus Performer", "Glazier", "Scaffolder", "Surveyor", "Civil Engineer", "Mechanical Engineer", "Electrical Engineer", "Chemical Engineer", "Aerospace Engineer", "Biomedical Engineer", "Professor", "Lecturer", "Principal", "Tutor", "Researcher", "Anthropologist", "Sociologist", "Philosopher", "Linguist", "Translator", "Interpreter", "HR Manager", "Recruiter", "Headhunter", "Consultant", "Business Analyst", "Project Manager", "Operations Manager", "Marketing Manager", "Sales Representative", "Cashier", "Diplomat", "Ambassador", "Governor", "Mayor", "Senator", "Congressman", "Councilman", "Notary Public", "Paralegal", "Bailiff", "Warden", "Barista", "Sommelier", "Chef de Cuisine", "Sous Chef", "Dishwasher", "Housekeeper", "Bellhop", "Concierge", "Event Planner", "Wedding Planner", "Travel Agent", "Tour Guide", "Auctioneer", "Appraiser", "Cartographer", "Astronomer", "Geneticist", "Immunologist", "Virologist", "Microbiologist", "Ecologist", "Jockey", "Caddie", "Umpire", "Personal Trainer", "Yoga Instructor", "Pilates Instructor", "Life Coach", "Air Traffic Controller", "Train Conductor", "Ship Captain", "Dockworker", "Longshoreman", "Copywriter", "Editor in Chief", "Publisher", "Critic", "Columnist", "Botanist", "Zoologist", "Marine Biologist", "Ornithologist", "Paleontologist", "Ethical Hacker", "Penetration Tester", "Scrum Master", "Agile Coach", "Blockchain Developer", "Smart Contract Auditor", "Prompt Engineer", "Content Creator", "Streamer", "Podcaster", "Esports Athlete", "Drone Pilot", "Virtual Assistant", "Telemarketer", "Customer Service Rep", "Help Desk Technician", "Inventory Manager", "Logistics Coordinator", "Supply Chain Manager", "Procurement Officer", "Compliance Officer", "Risk Manager", "Underwriter", "Claims Adjuster", "Forensic Scientist", "Criminologist", "Ballistics Expert", "Coroner", "Sheriff", "Deputy", "Marshal", "Agent", "Lieutenant", "Sergeant", "General", "Admiral", "Sniper", "Sapper", "Demolition Expert", "Bomb Technician", "Bodyguard", "Bouncer", "Private Investigator", "Bounty Hunter", "Ski Instructor", "Lifeguard", "Scuba Instructor", "Parkour Athlete", "Stuntman", "Stuntwoman", "Puppeteer", "Mime", "Ventriloquist", "Opera Singer", "Rapper", "Songwriter", "Audio Engineer", "Lighting Technician", "Stage Manager", "Gaffer", "Grip", "Best Boy", "Set Designer", "Prop Master", "Art Director", "Creative Director", "Copy Editor", "Proofreader", "Typesetter", "Bookbinder", "Archivist", "Curator", "Gallery Manager", "Art Restorer", "Numismatist", "Philatelist", "Horologist", "Gemologist", "Perfumer", "Mixologist", "Pit Boss", "Croupier", "Dealer", "Bookie", "Handyman", "Landscaper", "Arborist", "Tree Surgeon", "Greenkeeper", "Groundskeeper", "Exterminator", "Pest Control Technician", "Chimney Sweep", "Window Cleaner", "Street Sweeper", "Garbage Collector", "Recycling Center Worker", "Scrap Dealer", "Pawnbroker", "Retail Associate", "Merchandiser", "Buyer", "Stylist", "Personal Shopper", "Image Consultant", "Matchmaker", "Genealogist", "Astrologer", "Psychic", "Medium", "Clergy", "Priest", "Pastor", "Rabbi", "Imam", "Monk", "Nun", "Bishop", "Pope", "Missionary", "Theologian"
		  ],

		  Mythology: [
			"Zeus", "Thor", "Hercules", "Medusa", "Dragon", "Unicorn", "Phoenix", "Mermaid", "Centaur", "Griffin", "Poseidon", "Hades", "Athena", "Apollo", "Odin", "Loki", "Anubis", "Ra", "Sphinx", "Hydra", "Cyclops", "Minotaur", "Pegasus", "Vampire", "Werewolf", "Ghost", "Zombie", "Elf", "Dwarf", "Giant", "Kraken", "Chimera", "Cerberus", "Valkyrie", "Fairy", "Goblin", "Troll", "Witch", "Wizard", "Demon", "Angel", "Spirit", "Titan", "Nymph", "Satyr", "Basilisk", "Yeti", "Bigfoot", "Loch Ness", "Mummy", "Alien", "Genie", "Leprechaun", "Banshee", "Siren", "Frost Giant", "Fire Giant", "Dryad", "Gorgon", "Harpy", "Ifrit", "Djinn", "Rakshasa", "Asura", "Deva", "Aphrodite", "Ares", "Artemis", "Hephaestus", "Hera", "Hermes", "Dionysus", "Demeter", "Persephone", "Gaia", "Ouranos", "Cronus", "Atlas", "Prometheus", "Achilles", "Aeneas", "Romulus", "Remus", "Quetzalcoatl", "Tlaloc", "Amaterasu", "Susanoo", "Huitzilopochtli", "King Arthur", "Merlin", "Ganesha", "Vishnu", "Shiva", "Brahma", "Kali", "Cthulhu", "Wendigo", "Chupacabra", "Kappa", "Yōkai", "Jiangshi", "Succubus", "Incubus", "Banshee", "Brownie", "Imp", "Kobold", "Nixie", "Selkie", "Sköll", "Hati", "Fenrir", "Jörmungandr", "Sleipnir"
		  ],

		  Sport: [
			"Soccer", "Basketball", "Football", "Tennis", "Golf", "Cricket", "Rugby", "Baseball", "Volleyball", "Hockey", "Boxing", "MMA", "Wrestling", "Formula 1", "Swimming", "Athletics", "Gymnastics", "Cycling", "Skiing", "Surfing", "Skateboarding", "Snowboarding", "Table Tennis", "Badminton", "Bowling", "Pool", "Darts", "Archery", "Fencing", "Judo", "Karate", "Taekwondo", "Yoga", "Pilates", "Crossfit", "Marathon", "Triathlon", "Rowing", "Sailing", "Climbing", "Hiking", "Fishing", "Hunting", "Horse Riding", "Polo", "Lacrosse", "Handball", "Squash", "Racquetball", "Softball", "Kickball", "Dodgeball", "Frisbee", "Parkour", "Cheerleading", "Ballet", "Weightlifting", "Powerlifting", "Strongman", "eSports", "Chess", "Go", "Poker", "Snooker", "Curling", "Bobsleigh", "Netball", "Korfball", "Water Polo", "Field Hockey", "Ice Skating", "Figure Skating", "Speed Skating", "Luge", "Skeleton", "Javelin", "Discus", "Shot Put", "Hurdles", "Steeplechase", "Decathlon", "Heptathlon", "Motocross", "NASCAR", "IndyCar", "Skeet Shooting", "Trap Shooting", "Kite Surfing", "Windsurfing", "Canoeing", "Kayaking", "Synchronized Swimming", "Trampolining", "Tumbling", "Bodybuilding", "Ultimate Frisbee", "Tug of War", "Rock Climbing", "Mountaineering", "Orienteering"
		  ],

		  Places: [
			"School", "Hospital", "Library", "Airport", "Station", "Park", "Beach", "Forest", "Mountain", "Desert", "City", "Village", "Farm", "Zoo", "Museum", "Cinema", "Mall", "Restaurant", "Hotel", "Bank", "Office", "Factory", "Prison", "Church", "Temple", "Mosque", "Stadium", "Gym", "Pool", "Casino", "Castle", "Palace", "Bridge", "Tower", "Skyscraper", "Lighthouse", "Pyramid", "Cave", "Island", "Volcano", "Jungle", "Swamp", "River", "Lake", "Ocean", "Space", "Moon", "Mars", "Sun", "Star", "Galaxy", "Universe", "Heaven", "Hell", "Garden", "Garage", "Basement", "Attic", "Playground", "Harbor", "Port", "Dock", "Subway", "Tunnel", "Highway", "Town", "Capitol", "Embassy", "Laboratory", "Observatory", "Canyon", "Glacier", "Tundra", "Meadow", "Savanna", "Delta", "Peninsula", "Archipelago", "Reef", "Fjord", "Grotto", "Wasteland", "Oasis", "Labyrinth", "Cathedral", "Synagogue", "Pagoda", "Bunker", "Hangar", "Silo", "Warehouse", "Apartment", "Condo", "Cottage", "Cabin", "Mansion", "Shack", "Tent", "Caravan", "Motorhome", "Bazaar", "Market", "Flea Market", "Bookstore", "Bakery", "Pharmacy", "Post Office", "Courtroom", "Jail", "Campground", "Amusement Park", "Water Park", "Bowling Alley", "Ice Rink", "Recording Studio", "Data Center", "Supermarket", "Grocery Store", "Convenience Store", "Bodega", "Deli", "Butcher Shop", "Fish Market", "Liquor Store", "Candy Shop", "Toy Store", "Hardware Store", "Pet Shop", "Flower Shop", "Jewelry Store", "Pawn Shop", "Thrift Store", "Outlet", "Showroom", "Kiosk", "Gas Station", "Service Station", "Car Wash", "Mechanic Shop", "Body Shop", "Scrapyard", "Junkyard", "Landfill", "Recycling Center", "Power Plant", "Nuclear Plant", "Refinery", "Oil Rig", "Mine", "Quarry", "Construction Site", "Dam", "Reservoir", "Aqueduct", "Canal", "Lock", "Pipeline", "Wind Farm", "Solar Farm", "Substation", "Police Station", "Fire Station", "City Hall", "Community Center", "Convention Center", "Courthouse", "Voting Booth", "Shelter", "Orphanage", "Nursing Home", "Funeral Home", "Morgue", "Cemetery", "Graveyard", "Mausoleum", "Crypt", "Tomb", "Catacomb", "Monument", "Memorial", "Statue", "Plaza", "Square", "Roundabout", "Intersection", "Crosswalk", "Sidewalk", "Alley", "Cul-de-sac", "Street", "Avenue", "Boulevard", "Lane", "Drive", "Road", "Freeway", "Expressway", "Turnpike", "Overpass", "Underpass", "Parking Lot", "Parking Garage", "Bus Stop", "Taxi Stand", "Train Station", "Metro Station", "Tram Stop", "Ferry Terminal", "Cruise Ship", "Yacht", "Houseboat", "Submarine", "Aircraft Carrier", "Helipad", "Runway", "Cockpit", "Control Tower", "Waiting Room", "Lounge", "VIP Room", "Backstage", "Green Room", "Dressing Room", "Stage", "Podium", "Auditorium", "Lecture Hall", "Classroom", "Principal's Office", "Staff Room", "Cafeteria", "Canteen", "Mess Hall", "Kitchen", "Pantry", "Dining Room", "Living Room", "Bedroom", "Bathroom", "Restroom", "Toilet", "Shower", "Closet", "Walk-in Closet", "Laundry Room", "Utility Room", "Safe Room", "Panic Room", "Vault", "Strongbox", "Cellar", "Wine Cellar", "Tasting Room", "Vineyard", "Winery", "Brewery", "Distillery", "Pub", "Bar", "Tavern", "Saloon", "Speakeasy", "Nightclub", "Disco", "Rave", "Festival", "Carnival", "Fairground", "Circus", "Arcade", "Esports Arena", "Laser Tag Arena", "Paintball Field", "Go-Kart Track", "Mini Golf Course", "Golf Course", "Driving Range", "Tennis Court", "Basketball Court", "Soccer Field", "Football Field", "Baseball Diamond", "Cricket Pitch", "Rugby Field", "Track", "Velodrome", "Racecourse", "Speedway", "Skate Park", "Dojo", "Boxing Ring", "Yoga Studio", "Pilates Studio", "Massage Parlor", "Spa", "Sauna", "Steam Room", "Salon", "Barbershop", "Tattoo Parlor", "Piercing Studio", "Clinic", "Emergency Room", "Operating Room", "ICU", "Ward", "Dispensary", "Blood Bank", "Sperm Bank", "Research Center", "Think Tank", "Startup Incubator", "Coworking Space", "Boardroom", "Cubicle", "Reception", "Lobby", "Atrium", "Balcony", "Terrace", "Patio", "Porch", "Deck", "Roof", "Rooftop", "Penthouse", "Loft", "Studio Apartment", "Duplex", "Townhouse", "Row House", "Bungalow", "Villa", "Chalet", "Lodge", "Resort", "Inn", "Motel", "Hostel", "Dormitory", "Barracks", "Base", "Outpost", "Fort", "Fortress", "Citadel", "Bastion", "Rampart", "Watchtower", "Guardhouse", "Checkpoint", "Gate", "Drawbridge", "Moat", "Dungeon", "Cell", "Interrogation Room", "Witness Stand", "Jury Box", "Throne Room", "Ballroom", "Banquet Hall", "Gallery", "Art Studio", "Workshop", "Shed", "Barn", "Stable", "Coop", "Sty", "Pasture", "Field", "Orchard", "Grove", "Botanical Garden", "Arboretum", "Greenhouse", "Nursery", "Hedge Maze", "Picnic Area", "Campsite", "Rest Stop", "Scenic Overlook", "Cliff", "Plateau", "Valley", "Gorge", "Ravine", "Gulch", "Crater", "Geyser", "Hot Spring", "Waterfall", "Spring", "Stream", "Brook", "Creek", "Pond", "Lagoon", "Bay", "Cove", "Inlet", "Strait", "Sound", "Estuary", "Marsh", "Bog", "Fen", "Wetland", "Mangrove", "Rainforest", "Taiga", "Steppe", "Prairie", "Heath", "Moor", "Dune", "Iceberg", "Ice Shelf", "Polar Cap", "Orbit", "Space Station", "Rocket", "Shuttle", "Comet", "Asteroid", "Meteor", "Black Hole", "Nebula", "Supernova", "Wormhole", "Dimension", "Portal", "Void", "Abyss", "Dream", "Memory", "Simulation", "Matrix", "Internet", "Website", "Chat Room", "Forum", "Server Room", "Cloud", "Metaverse", "Virtual Reality"
		  ],

		  Instruments: [
			"Guitar", "Piano", "Drums", "Violin", "Flute", "Saxophone", "Trumpet", "Cello", "Harp", "Clarinet", "Trombone", "Tuba", "Banjo", "Ukulele", "Accordion", "Harmonica", "Xylophone", "Synthesizer", "Oboe", "Bass", "Microphone", "Turntable", "Speaker", "Amplifier", "Bongo", "Conga", "Tambourine", "Maracas", "Triangle", "Gong", "Cymbal", "Organ", "Keyboard", "Bagpipes", "Didgeridoo", "Sitar", "Lute", "Mandolin", "Recorder", "Whistle", "Bell", "Chime", "Castanets", "Cowbell", "Kazoo", "Theremin", "Viola", "Double Bass", "Bassoon", "French Horn", "Piccolo", "Melodica", "Steel Drum", "Clave", "Guiro", "Shakuhachi", "Erhu", "Timbales", "Vibraphone", "Marimba", "Glockenspiel", "Handpan", "Djembe", "Cajón", "Bodhrán", "Zither", "Harpsichord", "Celesta", "Spinet", "Vielle", "Hurdy-Gurdy", "Balalaika", "Bouzouki", "Sheng", "Pipa", "Koto", "Shamisen", "Duduk", "Kaval", "Cornet", "Flugelhorn", "Sousaphone", "Euphonium", "Piccolo Trumpet", "Alto Saxophone", "Tenor Saxophone", "Baritone Saxophone", "Bass Clarinet", "English Horn", "Contrabassoon", "Timpani", "Snare Drum", "Bass Drum", "Hi-Hat", "Drum Kit", "Acoustic Guitar", "Electric Guitar", "Bass Guitar", "Classical Guitar", "Steel Guitar", "Pedal Steel Guitar", "Grand Piano", "Upright Piano", "Electric Piano", "Digital Piano", "Pipe Organ", "Hammond Organ", "Fiddle", "Viola da Gamba", "Octobass", "Pan Flute", "Ocarina", "Tin Whistle", "Irish Flute", "Ney", "Concertina", "Bandoneon", "Mbira", "Kalimba", "Jew's Harp", "Bullroarer", "Washboard", "Spoons", "Bones", "Whip", "Sleigh Bells", "Tubular Bells", "Handbells", "Ratchet", "Flexatone", "Slide Whistle", "Siren", "Sampler", "Drum Machine", "Sequencer", "MIDI Controller", "Talk Box", "Vocoder", "Moog Synthesizer", "Roland TR-808", "Keytar", "Otamatone", "Gamelan", "Angklung", "Tabla", "Mridangam", "Dhol", "Taiko", "Agogô", "Shekere", "Berimbau", "Cuíca", "Charango", "Ronroco", "Quena", "Siku", "Cavaquinho", "Tres", "Vihuela", "Guitarrón", "Appalachian Dulcimer", "Hammered Dulcimer", "Autoharp", "Psaltery", "Lyre", "Kora", "Ngoni", "Oud", "Saz", "Baglama", "Cümbüş", "Tar", "Setar", "Rebab", "Kamancha", "Gusle", "Talharpa", "Crwth", "Nyckelharpa", "Morin Khuur", "Gayageum", "Dan Tranh", "Sarod", "Santoor", "Sarangi", "Esraj", "Veena", "Bansuri", "Mizmar", "Zurna", "Shehnai", "Gaida", "Uilleann Pipes", "Northumbrian Smallpipes", "Launeddas", "Fujara", "Alphorn", "Wagner Tuba", "Cimbasso", "Ophicleide", "Serpent", "Sackbut", "Baroque Trumpet", "Natural Horn", "Bugle", "Shofar", "Vuvuzela", "Mellophone", "Baritone Horn", "Contrabass Clarinet", "Soprano Saxophone", "Sopranino Saxophone", "Bass Saxophone", "Contrabass Saxophone", "Heckelphone", "Sarrusophone", "Rototom", "Octoban", "Tom-Tom Drum", "Crash Cymbal", "Ride Cymbal", "Splash Cymbal", "China Cymbal", "Finger Cymbals", "Clapper", "Wood Block", "Temple Blocks", "Slit Drum", "Log Drum", "Udu", "Hang Drum", "Steel Tongue Drum", "Ocean Drum", "Rainstick", "Wind Chimes", "Mark Tree", "Vibraslap", "Jawbone", "Conch Shell"
		  ],

		  Superheroes: [
			"Superman", "Batman", "Spider-Man", "Iron Man", "Wonder Woman", "Thor", "Hulk", "Captain America", "Black Panther", "Flash", "Aquaman", "Green Lantern", "Wolverine", "Deadpool", "Doctor Strange", "Black Widow", "Hawkeye", "Ant-Man", "Daredevil", "Cyclops", "Storm", "Jean Grey", "Professor X", "Magneto", "Joker", "Thanos", "Loki", "Venom", "Groot", "Rocket", "Star-Lord", "Gamora", "Drax", "Nebula", "Mantis", "Vision", "Scarlet Witch", "Falcon", "Winter Soldier", "War Machine", "Nick Fury", "Captain Marvel", "Shazam", "Green Arrow", "Supergirl", "Batgirl", "Robin", "Nightwing", "Cyborg", "Beast Boy", "Raven", "Starfire", "Blue Beetle", "Moon Knight", "Ms Marvel", "She-Hulk", "Punisher", "Blade", "Ghost Rider", "Iron Fist", "Luke Cage", "Martian Manhunter", "Zatanna", "Booster Gold", "Hawkman", "Hawkgirl", "Firestorm", "Plastic Man", "Hellboy", "Spawn", "Judge Dredd", "Silver Surfer", "Human Torch", "Thing", "Invisible Woman", "Mr Fantastic", "Elektra", "Cable", "Domino", "Rogue", "Gambit", "Iceman", "Beast", "Angel", "Colossus", "Psylocke", "Bishop", "Emma Frost", "Deadshot", "Harley Quinn", "Poison Ivy", "Catwoman", "Riddler", "Penguin", "Two-Face", "Bane", "Lex Luthor", "General Zod", "Ultron", "Galactus", "Doctor Doom", "Apocalypse", "Kang", "Red Skull", "Green Goblin", "Doctor Octopus", "Vulture", "Kraven", "Mysterio"
		  ],

		  Animals: [ 
			"Lion", "Tiger", "Elephant", "Giraffe", "Penguin", "Dolphin", "Whale", "Shark", "Eagle", "Parrot", "Dog", "Cat", "Hamster", "Snake", "Lizard", "Frog", "Bear", "Wolf", "Fox", "Deer", "Zebra", "Kangaroo", "Koala", "Panda", "Gorilla", "Monkey", "Rabbit", "Mouse", "Rat", "Bat", "Owl", "Hawk", "Crocodile", "Alligator", "Turtle", "Octopus", "Jellyfish", "Crab", "Lobster", "Spider", "Bee", "Ant", "Butterfly", "Moth", "Dragonfly", "Mosquito", "Fly", "Beetle", "Worm", "Snail", "Cheetah", "Leopard", "Rhino", "Hippo", "Camel", "Llama", "Alpaca", "Sheep", "Goat", "Cow", "Pig", "Horse", "Chicken", "Duck", "Goose", "Turkey", "Peacock", "Swan", "Flamingo", "Otter", "Seal", "Walrus", "Moose", "Reindeer", "Bison", "Buffalo", "Chimpanzee", "Orangutan", "Gibbon", "Sloth", "Armadillo", "Hedgehog", "Shrew", "Mole", "Badger", "Weasel", "Ferret", "Skunk", "Coyote", "Jackal", "Hyena", "Bobcat", "Lynx", "Cougar", "Ocelot", "Dingo", "Cobra", "Viper", "Python", "Boa", "Gecko", "Iguana", "Chameleon", "Salamander", "Newt", "Toad", "Tuna", "Salmon", "Cod", "Herring", "Mackerel", "Seahorse", "Starfish", "Eel", "Wasp", "Hornet", "Termite", "Scorpion", "Centipede", "Millipede", "Marten", "Mink", "Racoon", "Opossum", "Wombat", "Platypus", "Echidna", "Dodo", "Mammoth", "Aardvark", "Albatross", "Anaconda", "Angelfish", "Anteater", "Antelope", "Arctic Fox", "Axolotl", "Baboon", "Barnacle", "Barracuda", "Basset Hound", "Beagle", "Bearded Dragon", "Bedbug", "Beluga", "Betta Fish", "Black Bear", "Black Widow", "Blue Jay", "Blue Whale", "Boar", "Bonobo", "Boxer", "Bulldog", "Bullfrog", "Bumblebee", "Canary", "Capybara", "Caribou", "Cassowary", "Catfish", "Caterpillar", "Chihuahua", "Chinchilla", "Chipmunk", "Cicada", "Civet", "Clam", "Clownfish", "Cockatoo", "Cockroach", "Collie", "Coral", "Cormorant", "Crane", "Cricket", "Crow", "Cuttlefish", "Dachshund", "Dalmatian", "Dart Frog", "Dormouse", "Dove", "Dugong", "Dung Beetle", "Earthworm", "Earwig", "Elk", "Emu", "Falcon", "Fennec Fox", "Finch", "Firefly", "Flounder", "Flying Fish", "Fossa", "Fruit Bat", "Gazelle", "Gerbil", "German Shepherd", "Gharial", "Gila Monster", "Gnu", "Golden Retriever", "Goldfish", "Gopher", "Grasshopper", "Great Dane", "Great White Shark", "Greyhound", "Grouse", "Guinea Pig", "Guppy", "Haddock", "Halibut", "Hammerhead Shark", "Hare", "Heron", "Honey Badger", "Hummingbird", "Husky", "Hyrax", "Ibex", "Ibis", "Impala", "Jackrabbit", "Jaguar", "Jay", "Jerboa", "Kangaroo Rat", "Killer Whale", "Kingfisher", "Kiwi", "Koi", "Komodo Dragon", "Krill", "Kudu", "Labradoodle", "Labrador", "Ladybug", "Lemming", "Lemur", "Limpet", "Loris", "Louse", "Macaw", "Magpie", "Mallard", "Manatee", "Mandrill", "Manta Ray", "Mantis", "Marmot", "Mastiff", "Meerkat", "Mockingbird", "Mongoose", "Monitor Lizard", "Mule", "Musk Ox", "Muskrat", "Narwhal", "Nautilus", "Nightingale", "Nuthatch", "Okapi", "Orca", "Oryx", "Ostrich", "Oyster", "Pangolin", "Panther", "Parakeet", "Pelican", "Pheasant", "Piranha", "Pit Bull", "Pointer", "Polar Bear", "Poodle", "Porcupine", "Porpoise", "Prairie Dog", "Prawn", "Pufferfish", "Pug", "Puma", "Quail", "Quokka", "Rattlesnake", "Raven", "Red Panda", "Retriever", "Roadrunner", "Robin", "Rottweiler", "Sand Dollar", "Sandpiper", "Sardine", "Scallop", "Sea Cucumber", "Sea Lion", "Sea Turtle", "Sea Urchin", "Seagull", "Setter", "Sheepdog", "Shrimp", "Siamese Cat", "Siberian Husky", "Skink", "Skipper", "Slug", "Snapper", "Spaniel", "Sparrow", "Sperm Whale", "Sponge", "Squid", "Squirrel", "Starling", "Stingray", "Stoat", "Stork", "Sturgeon", "Sugar Glider", "Swallow", "Swordfish", "Tadpole", "Tamarin", "Tanager", "Tapir", "Tarantula", "Tarsier", "Tasmanian Devil", "Terrier", "Thrush", "Tick", "Toucan", "Trout", "Tsetse Fly", "Vulture", "Wallaby", "Warbler", "Warthog", "Water Buffalo", "Weevil", "Whippet", "Wildebeest", "Wolverine", "Woodpecker", "Wren", "Yak", "Yellowjacket", "Yorkshire Terrier", "Zebu", "Zonkey", "Zorse", "Aardwolf", "Addax", "Agouti", "Anoa", "Aoudad", "Argali", "Aye-aye", "Binturong", "Blackbuck", "Blesbok", "Bonobo", "Bushbaby", "Caracal", "Coati", "Degu", "Dik-dik", "Drill", "Duiker", "Eland", "Galago", "Gaur", "Gerenuk", "Guanaco", "Hartebeest", "Indri", "Jaguarundi", "Kinkajou", "Klipspringer", "Langur", "Maned Wolf", "Mara", "Markhor", "Marmoset", "Muntjac", "Nilgai", "Nyala", "Onager", "Paca", "Peccary", "Pika", "Pronghorn", "Pudu", "Quoll", "Saiga", "Saki", "Serval", "Sitatunga", "Springbok", "Tamandua", "Topi", "Urial", "Vicuña", "Viscacha", "Waterbuck", "Auk", "Avocet", "Bittern", "Blackbird", "Bluebird", "Booby", "Bowerbird", "Budgerigar", "Bunting", "Bustard", "Buzzard", "Capercaillie", "Cardinal", "Chickadee", "Coot", "Cuckoo", "Curlew", "Dipper", "Dovekie", "Egret", "Eider", "Finch", "Flicker", "Gannet", "Godwit", "Goldfinch", "Grebe", "Grosbeak", "Guillemot", "Gull", "Harrier", "Hoopoe", "Hornbill", "Ibis", "Jaeger", "Kestrel", "Killdeer", "Kite", "Kittiwake", "Lapwing", "Lark", "Loon", "Lovebird", "Lyrebird", "Martin", "Merganser", "Murrelet", "Nene", "Oriole", "Osprey", "Oystercatcher", "Partridge", "Petrel", "Phalarope", "Phoebe", "Pigeon", "Plover", "Puffin", "Quetzal", "Rail", "Razorbill", "Redstart", "Rook", "Sanderling", "Shrike", "Skua", "Snipe", "Spoonbill", "Stilt", "Sunbird", "Swift", "Tern", "Thrasher", "Titmouse", "Towhee", "Veery", "Vireo", "Wagtail", "Waxwing", "Wheatear", "Whimbrel", "Wigeon", "Woodcock", "Yellowthroat", "Adder", "Anole", "Asp", "Basilisk", "Caiman", "Chuckwalla", "Copperhead", "Corn Snake", "Garter Snake", "Kingsnake", "Krait", "Mamba", "Racer", "Taipan", "Tegu", "Tuatara", "Leech", "Mussel", "Nudibranch", "Periwinkle", "Tardigrade", "Tunicate", "Velvet Worm", "Abalone", "Anemone", "Chiton", "Conch", "Copepod", "Flatworm", "Horseshoe Crab", "Isopod", "Sea Pen", "Sea Slug"
		  ],

		  Countries: [
			"USA", "Canada", "Mexico", "Brazil", "Argentina", "UK", "France", "Germany", "Italy", "Spain", "Russia", "China", "Japan", "India", "Australia", "Egypt", "South Africa", "Nigeria", "Kenya", "Morocco", "Turkey", "Saudi Arabia", "Iran", "Israel", "Sweden", "Norway", "Finland", "Denmark", "Netherlands", "Belgium", "Switzerland", "Austria", "Poland", "Greece", "Portugal", "Ireland", "Scotland", "Wales", "Thailand", "Vietnam", "Indonesia", "Philippines", "Malaysia", "Singapore", "South Korea", "North Korea", "Pakistan", "Bangladesh", "New Zealand", "Fiji", "Cuba", "Jamaica", "Peru", "Chile", "Colombia", "Venezuela", "Ukraine", "Romania", "Hungary", "Czech Republic", "Croatia", "Serbia", "Slovakia", "Slovenia", "Latvia", "Lithuania", "Estonia", "Iceland", "Luxembourg", "Qatar", "UAE", "Oman", "Jordan", "Iraq", "Syria", "Lebanon", "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Armenia", "Azerbaijan", "Bahamas", "Bahrain", "Barbados", "Belarus", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia", "Botswana", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Central African Republic", "Chad", "Comoros", "Congo", "Costa Rica", "Cyprus", "Djibouti", "Dominica", "Ecuador", "El Salvador", "Eritrea", "Ethiopia", "Gabon", "Gambia", "Georgia", "Ghana", "Guatemala", "Guinea", "Guyana", "Haiti", "Honduras", "Kazakhstan", "Kuwait", "Laos", "Malta", "Monaco", "Mongolia", "Nepal", "Panama", "Paraguay", "Tanzania", "Uganda", "Uruguay", "Uzbekistan", "Yemen", "Zambia", "Zimbabwe", "Antigua and Barbuda", "Brunei", "Cabo Verde", "Democratic Republic of the Congo", "Cote d'Ivoire", "Dominican Republic", "East Timor", "Equatorial Guinea", "Eswatini", "Grenada", "Guinea-Bissau", "Kiribati", "Kyrgyzstan", "Lesotho", "Liberia", "Libya", "Liechtenstein", "North Macedonia", "Madagascar", "Malawi", "Maldives", "Mali", "Marshall Islands", "Mauritania", "Mauritius", "Micronesia", "Moldova", "Montenegro", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nicaragua", "Niger", "Palau", "Papua New Guinea", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Senegal", "Seychelles", "Sierra Leone", "Solomon Islands", "Somalia", "South Sudan", "Sri Lanka", "Sudan", "Suriname", "Tajikistan", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkmenistan", "Tuvalu", "Vanuatu", "Vatican City", "Taiwan", "Kosovo", "Palestine", "Greenland", "Puerto Rico"
		  ],

		  "Video Games": [
			"Mario", "Zelda", "Pokemon", "Minecraft", "Fortnite", "Roblox", "Call of Duty", "GTA", "Halo", "God of War", "The Witcher", "Skyrim", "Fallout", "Overwatch", "League of Legends", "Dota", "World of Warcraft", "Counter-Strike", "Valorant", "Apex Legends", "Tetris", "Pac-Man", "Sonic", "Street Fighter", "Mortal Kombat", "Tekken", "Final Fantasy", "Resident Evil", "Silent Hill", "Metal Gear Solid", "Uncharted", "The Last of Us", "Red Dead Redemption", "Cyberpunk", "Elden Ring", "Dark Souls", "Bloodborne", "Sekiro", "Animal Crossing", "Stardew Valley", "Among Us", "Rocket League", "FIFA", "NBA 2K", "Madden", "Sims", "Civilization", "Portal", "Half-Life", "Doom", "Quake", "Bioshock", "Mass Effect", "Assassins Creed", "Far Cry", "Destiny", "Hades", "Dead Cells", "Cuphead", "Undertale", "Terraria", "Subnautica", "Valheim", "No Mans Sky", "Starcraft", "Diablo", "Warcraft", "Guild Wars", "Runescape", "Eve Online", "Genshin Impact", "Honkai Star Rail", "Monster Hunter", "Kingdom Hearts", "Metroid", "Castlevania", "Donkey Kong", "Kirby", "Smash Bros", "Bayonetta", "Devil May Cry", "Ninja Gaiden", "Persona", "Dragon Quest", "Grand Turismo", "Forza", "Need for Speed", "Burnout", "Tomb Raider", "Dishonored", "Prey", "Deus Ex", "Saints Row", "Borderlands", "Gears of War", "Battlefield", "Crysis", "Rime", "Limbo", "Inside", "Celeste", "Shovel Knight", "Hollow Knight", "Disco Elysium", "Outer Wilds", "Returnal", "Deathloop", "Ghost of Tsushima", "Balatro", "Lethal Company", "Dave the Diver", "Vampire Survivors", "Cult of the Lamb", "Inscryption", "Signalis", "Tunic", "Stray", "Dredge", "Blasphemous", "Pizza Tower", "Animal Well", "Pacific Drive", "Ultrakill", "Katana Zero", "Slay the Spire", "Phasmophobia", "Content Warning", "Palworld", "Helldivers 2", "Manor Lords", "Baldur's Gate 3", "Alan Wake", "Control", "Death Stranding", "Starfield", "Black Myth: Wukong", "Zenless Zone Zero", "Blue Archive", "Arknights", "Fate Grand Order", "Marvel Snap", "Clash of Clans", "Clash Royale", "Brawl Stars", "Candy Crush", "Subway Surfers", "Temple Run", "Angry Birds", "Fruit Ninja", "Jetpack Joyride", "Monument Valley", "Limbo", "Plants vs Zombies", "Hay Day", "Royal Match", "Monopoly Go", "Pokemon GO", "Ingress", "Pikmin Bloom", "Wordle", "Connections", "GeoGuessr", "8 Ball Pool", "Agar.io", "Slither.io", "Krunker", "Shell Shockers", "Diep.io", "Tetr.io", "Friday Night Funkin", "HoloCure", "Doki Doki Literature Club", "Baldi's Basics", "That's Not My Neighbor", "Iron Lung", "Buckshot Roulette", "Getting Over It", "Papers Please", "A Short Hike", "Firewatch", "What Remains of Edith Finch", "The Stanley Parable", "Outer Worlds", "Sea of Thieves", "Rust", "DayZ", "Tarkov", "Squad", "Hell Let Loose", "War Thunder", "World of Tanks", "Warframe", "Path of Exile", "Grim Dawn", "Project Zomboid", "RimWorld", "Factorio", "Satisfactory", "Dwarf Fortress", "Kenshi", "Sons of the Forest", "The Forest", "Raft", "Green Hell", "Stranded Deep", "PowerWash Simulator", "Euro Truck Simulator", "Microsoft Flight Simulator", "Assetto Corsa", "BeamNG.drive", "My Summer Car", "Spelunky", "Risk of Rain", "Enter the Gungeon", "Dead by Daylight", "Phasmophobia", "Identity V", "Left 4 Dead", "Team Fortress 2", "Garry's Mod", "Geometry Dash", "Osu!", "Beat Saber", "VRChat", "Rec Room", "Roblox", "Habbo Hotel", "Club Penguin", "Wizard101", "MapleStory", "Lost Ark", "Black Desert Online"
		  ],

		  Science: [
			"Atom", "Molecule", "Cell", "DNA", "Gravity", "Magnetism", "Electricity", "Light", "Sound", "Heat", "Energy", "Force", "Motion", "Planet", "Star", "Galaxy", "Black Hole", "Comet", "Asteroid", "Meteor", "Element", "Compound", "Acid", "Base", "Bacteria", "Virus", "Fungus", "Plant", "Animal", "Human", "Brain", "Heart", "Lungs", "Stomach", "Bone", "Muscle", "Nerve", "Blood", "Skin", "Evolution", "Photosynthesis", "Respiration", "Digestion", "Reproduction", "Genetics", "Chemistry", "Physics", "Biology", "Astronomy", "Geology", "Microscope", "Telescope", "Thermometer", "Barometer", "Compass", "Magnet", "Battery", "Circuit", "Prism", "Lens", "Mirror", "Laser", "Robot", "Satellite", "Rocket", "Quantum", "Relativity", "Entropy", "Neutrino", "Photon", "Proton", "Electron", "Neutron", "Ecosystem", "Habitat", "Ecology", "Biotechnology", "Thermodynamics", "Mechanics", "Optics", "Acoustics", "Fission", "Fusion", "Tsunami", "Earthquake", "Volcano", "Fossil", "Sediment", "Igneous", "Metamorphic", "Wavelength", "Frequency", "Amplitude", "Current", "Voltage", "Resistance", "Capacitance", "Inductance", "Superconductivity", "Semiconductor", "Crystal", "Alloy", "Isotope", "Enzyme", "Hormone", "Antibody", "Vaccine", "Pathogen", "Amoeba", "Organism", "Substance", "Mass", "Volume", "Density", "Pressure", "Velocity", "Acceleration", "Momentum", "Inertia", "Friction", "Torque", "Work", "Power", "Joule", "Watt", "Newton", "Pascal", "Hertz", "Decibel", "Lumen", "Candela", "Mole", "Kelvin", "Celsius", "Fahrenheit", "Atmosphere", "Ion", "Cation", "Anion", "Plasma", "Gas", "Liquid", "Solid", "Sublimation", "Deposition", "Melting", "Freezing", "Boiling", "Condensation", "Evaporation", "Viscosity", "Elasticity", "Plasticity", "Malleability", "Ductility", "Hardness", "Solubility", "Concentration", "pH", "Acid-Base Reaction", "Oxidation-Reduction Reaction", "Precipitation Reaction", "Covalent Bond", "Ionic Bond", "Metallic Bond", "Hydrogen Bond", "Van der Waals Force", "Polymer", "Monomer", "Carbohydrate", "Lipid", "Protein", "Nucleic Acid", "Amino Acid", "Fatty Acid", "Monosaccharide", "Polysaccharide", "ATP", "ADP", "NAD", "NADH", "Chlorophyll", "Mitochondria", "Chloroplast", "Ribosome", "Nucleus", "Cytoplasm", "Membrane", "Vacuole", "Golgi Apparatus", "Endoplasmic Reticulum", "Lysosome", "Chromosome", "Gene", "Allele", "Genotype", "Phenotype", "Dominant", "Recessive", "Homozygous", "Heterozygous", "Mitosis", "Meiosis", "Gamete", "Zygote", "Embryo", "Fetus", "Homeostasis", "Metabolism", "Catabolism", "Anabolism", "Heredity", "Mutation", "Adaptation", "Natural Selection", "Artificial Selection", "Speciation", "Extinction", "Fossil Record", "Geologic Time Scale", "Plate Tectonics", "Continental Drift", "Seafloor Spreading", "Subduction", "Rift Valley", "Mountain Range", "Erosion", "Weathering", "Deposition", "Sedimentary Rock", "Igneous Rock", "Metamorphic Rock", "Mineral", "Crystal Structure", "Soil", "Groundwater", "Aquifer", "Glacier", "Ice Age", "Atmosphere", "Troposphere", "Stratosphere", "Mesosphere", "Thermosphere", "Exosphere", "Ozone Layer", "Greenhouse Effect", "Climate Change", "Global Warming", "Weather", "Wind", "Cloud", "Precipitation", "Humidity", "Air Pressure", "Front", "Cyclone", "Anticyclone", "Tornado", "Hurricane", "Typhoon", "Monsoon", "El Niño", "La Niña", "Oceanography", "Tide", "Current", "Wave", "Salinity", "Marine Biology", "Plankton", "Nekton", "Benthos", "Coral Reef", "Hydrothermal Vent", "Abyssal Zone", "Limnology", "Lake", "River", "Stream", "Wetland", "Estuary", "Botany", "Zoology", "Mycology", "Microbiology", "Virology", "Bacteriology", "Entomology", "Ornithology", "Ichthyology", "Herpetology", "Mammalogy", "Primatology", "Paleontology", "Anthropology", "Archaeology", "Sociology", "Psychology", "Neuroscience", "Cognitive Science", "Immunology", "Endocrinology", "Pharmacology", "Toxicology", "Epidemiology", "Pathology", "Anatomy", "Physiology", "Histology", "Cytology", "Embryology", "Taxonomy", "Systematics", "Phylogenetics", "Cladistics", "Bioinformatics", "Genomics", "Proteomics", "Metabolomics", "Synthetic Biology", "Astrobiology", "Exoplanet", "Habitable Zone", "SETI", "Cosmology", "Big Bang Theory", "Inflation", "Cosmic Microwave Background", "Dark Matter", "Dark Energy", "String Theory", "M-Theory", "Loop Quantum Gravity", "General Relativity", "Special Relativity", "Spacetime", "Singularity", "Event Horizon", "Hawking Radiation", "Wormhole", "Multiverse", "Particle Physics", "Standard Model", "Quark", "Lepton", "Boson", "Higgs Boson", "Gluon", "Graviton", "Antimatter", "Annihilation", "Pair Production", "Quantum Mechanics", "Wave-Particle Duality", "Uncertainty Principle", "Quantum Entanglement", "Quantum Tunneling", "Superposition", "Schrödinger's Cat", "Quantum Computing", "Qubit", "Nuclear Physics", "Radioactivity", "Alpha Decay", "Beta Decay", "Gamma Decay", "Half-life", "Nuclear Fission", "Nuclear Fusion", "Chain Reaction", "Nuclear Reactor", "Nuclear Weapon", "Condensed Matter Physics", "Solid-State Physics", "Crystallography", "Superfluidity", "Bose-Einstein Condensate", "Plasma Physics", "Fluid Dynamics", "Aerodynamics", "Hydrodynamics", "Chaos Theory", "Fractal", "Algorithm", "Computer Science", "Artificial Intelligence", "Machine Learning", "Deep Learning", "Neural Network", "Data Science", "Cryptography", "Cybernetics", "Information Theory", "Logic", "Mathematics", "Algebra", "Calculus", "Geometry", "Trigonometry", "Statistics", "Probability"
		  ],

		  Clothing: [
			 "Shirt", "T-Shirt", "Pants", "Jeans", "Shorts", "Skirt", "Dress", "Suit", "Coat", "Jacket", "Sweater", "Hoodie", "Vest", "Scarf", "Gloves", "Hat", "Cap", "Beanie", "Socks", "Shoes", "Boots", "Sandals", "Sneakers", "Heels", "Slippers", "Belt", "Tie", "Bowtie", "Watch", "Glasses", "Sunglasses", "Ring", "Necklace", "Bracelet", "Earrings", "Wallet", "Purse", "Backpack", "Bag", "Umbrella", "Raincoat", "Swimsuit", "Bikini", "Pajamas", "Robe", "Uniform", "Costume", "Mask", "Helmet", "Crown", "Tiara", "Cape", "Apron", "Overalls", "Leggings", "Tights", "Stockings", "Underwear", "Bra", "Boxers", "Briefs", "Diaper", "Bib", "Cardigan", "Blazer", "Poncho", "Cloak", "Kimono", "Sari", "Jumpsuit", "Romper", "Tunic", "Polo Shirt", "Tank Top", "Blouse", "Cami", "Drawers", "Chinos", "Cords", "Trousers", "Culottes", "Kilt", "Shawl", "Stole", "Mittens", "Earmuffs", "Fedora", "Beret", "Visor", "Loafers", "Espadrilles", "Wedges", "Stilettos", "Moccasins", "Garter", "Suspenders", "Cummerbund", "Cufflinks", "Brooch", "Pin", "Locket", "Fanny Pack", "Tote Bag", "Duffel Bag", "Satchel", "Briefcase", "Gown", "Tuxedo", "Smoking Jacket", "Parka", "Anorak", "Trench Coat", "Waistcoat", "Windbreaker", "Pea Coat", "Bomber Jacket", "Fleece", "Tracksuit", "Sweatpants", "Yoga Pants", "Sports Bra", "Leotard", "Bodysuit", "Corset", "Bustier", "Petticoat", "Nightgown", "Onesie", "Loungewear", "Henley", "Crop Top", "Peplum Top", "Skort", "Capris", "Cargo Pants", "Palazzo Pants", "Cocktail Dress", "Maxi Dress", "Ball Gown", "Sheath Dress", "Sundress", "Flip-Flops", "Clogs", "Oxfords", "Wellingtons", "Galoshes", "Bandana", "Headband", "Cravat", "Ascot", "Fascinator", "Top Hat", "Bowler Hat", "Sombrero", "Clutch", "Messenger Bag", "Sarong", "Dashiki", "Dirndl", "Lederhosen", "Hanbok", "Toga", "Lab Coat", "Scrubs", "Coveralls", "Dungarees", "Spats", "Gaiters", "Balaclava", "Neckerchief", "Armlet", "Anklet", "Choker", "Monokini", "Trunks", "Singlet", "Gilet", "Jersey", "Guernsey", "Kaftan", "Djellaba", "Abaya", "Burqa", "Niqab", "Hijab", "Chador", "Turbans", "Yarmulke", "Feather Boa", "Boutonnière", "Corsage", "Spandex", "Lycra", "Velvet", "Corduroy", "Denim", "Leather", "Suede", "Fur", "Linen", "Silk", "Cotton", "Wool", "Flannel", "Tweed", "Cashmere", "Mohair", "Angora", "Hosiery", "Bodystocking", "Thong", "G-string", "Chemise", "Babydoll", "Negligee", "Housecoat", "Boiler Suit", "Flight Suit", "Wet Suit", "Dry Suit", "Life Jacket", "Armour", "Gauntlet", "Shin Guards", "Padding", "Shoulder Pads", "Knee Pads", "Elbow Pads", "Goggles", "Muffler"
		  ],

		  Home: [
			"Table", "Chair", "Sofa", "Bed", "Desk", "Shelf", "Cabinet", "Cupboard", "Wardrobe", "Lamp", "Light", "Fan", "Heater", "AC", "Fridge", "Stove", "Oven", "Microwave", "Toaster", "Blender", "Mixer", "Kettle", "Pot", "Pan", "Plate", "Bowl", "Cup", "Glass", "Mug", "Fork", "Spoon", "Knife", "Napkin", "Towel", "Soap", "Shampoo", "Toothbrush", "Toothpaste", "Comb", "Brush", "Mirror", "Clock", "Calendar", "Painting", "Vase", "Rug", "Carpet", "Curtains", "Blinds", "Pillow", "Blanket", "Sheet", "Mattress", "Cushion", "Door", "Window", "Wall", "Floor", "Ceiling", "Roof", "Stairs", "Ladder", "Broom", "Mop", "Bucket", "Trash Can", "Vacuum", "Iron", "Ironing Board", "Dishwasher", "Washing Machine", "Dryer", "Radiator", "Thermostat", "Dresser", "Nightstand", "Bookcase", "Armoire", "Hutch", "Coffee Table", "End Table", "Bar Stool", "Rocker", "Recliner", "Lounge Chair", "Faucet", "Sink", "Toilet", "Shower", "Tub", "Detergent", "Bleach", "Sponge", "Scrubber", "Dustpan", "Hose", "Sprinkler", "Shovel", "Rake", "Trowel", "Hammer", "Screwdriver", "Wrench", "Pliers", "Drill", "Saw", "Level", "Tape Measure", "Toolbox", "Outlet", "Switch", "Fuse", "Circuit Breaker", "Gutter", "Shingle", "Chimney", "Patio", "Deck", "Balcony", "Porch", "Hallway", "Utility Room", "Pantry", "Fireplace", "Hearth", "Mantle", "Colander", "Peeler", "Whisk", "Spatula", "Ladle", "Tongs", "Grater", "Corkscrew", "Bottle Opener", "Can Opener", "Placemat", "Coaster", "Tablecloth", "Teapot", "Pitcher", "Tupperware", "Aluminum Foil", "Plastic Wrap", "Spice Rack", "Apron", "Oven Mitts", "Trivet", "Espresso Machine", "Griddle", "Waffle Maker", "Slow Cooker", "Rice Cooker", "Air Fryer", "Juicer", "Food Processor", "Coffee Grinder", "Television", "Remote", "Speaker", "Soundbar", "Game Console", "Router", "Modem", "Extension Cord", "Power Strip", "Charger", "Adapter", "Light Bulb", "Chandelier", "Sconce", "Dimmer", "Ottoman", "Bean Bag", "Fireplace Screen", "Poker", "Computer", "Monitor", "Keyboard", "Mouse", "Mousepad", "Printer", "Scanner", "Shredder", "Stapler", "Tape", "Scissors", "Pen", "Pencil", "Marker", "Highlighter", "Eraser", "Notebook", "Paper", "Envelope", "Stamp", "File Cabinet", "Safe", "Globe", "Calculator", "Whiteboard", "Corkboard", "Lawn Mower", "Weed Whacker", "Leaf Blower", "Wheelbarrow", "Axe", "Hatchet", "Mallet", "Chisel", "Sandpaper", "Nail", "Screw", "Bolt", "Nut", "Washer", "Hinge", "Paint", "Paintbrush", "Paint Roller", "Step Stool", "Workbench", "Vise", "Flashlight", "Lantern", "Generator", "Compost Bin", "Watering Can", "Planter", "Trellis", "Fence", "Gate", "Mailbox", "Doorbell", "Key", "Lock", "Deadbolt", "Peephole", "Crib", "Bassinet", "Changing Table", "High Chair", "Stroller", "Playpen", "Toy Box", "Dollhouse", "Fabric Softener", "Stain Remover", "Glass Cleaner", "Floor Wax", "Furniture Polish", "Feather Duster", "Squeegee", "Plunger", "Scale", "Hair Dryer", "Curling Iron", "Razor", "Shaving Cream", "Dental Floss", "Mouthwash", "Loofah", "Bath Mat", "Shower Curtain", "Toilet Paper", "Facial Tissue", "Cotton Swabs", "Cotton Balls", "Medicine Cabinet", "First Aid Kit", "Smoke Detector", "Fire Extinguisher", "Carbon Monoxide Detector", "Security Camera", "Alarm System", "Thermometer", "Humidifier", "Dehumidifier", "Air Purifier", "Space Heater", "Ceiling Fan", "Coat Rack", "Shoe Rack", "Umbrella Stand", "Doormat", "Attic", "Basement", "Garage", "Driveway", "Sideboard", "Console Table", "Chaise Lounge", "Daybed", "Futon", "Bunk Bed", "Canopy Bed", "Headboard", "Footboard", "Vanity", "Stool", "Bench", "Island", "Breakfast Nook", "Pantry Shelf", "Wine Rack", "Serving Cart", "Cutting Board", "Measuring Cups", "Measuring Spoons", "Rolling Pin", "Baking Sheet", "Muffin Tin", "Cake Pan", "Dutch Oven", "Crock-Pot", "Pressure Cooker", "Deep Fryer", "Electric Grill", "Panini Press", "Popcorn Maker", "Ice Cream Maker", "Bread Maker", "Dish Rack", "Utensil Holder", "Knife Block", "Paper Towel Holder", "Trash Compactor", "Garbage Disposal", "Water Filter", "Ice Maker", "Range Hood", "Backsplash", "Countertop", "Island", "Bar", "Home Theater System", "Projector", "Screen", "DVD Player", "Blu-ray Player", "Record Player", "Turntable", "Amplifier", "Receiver", "Headphones", "Earbuds", "Laptop", "Tablet", "E-reader", "Smartwatch", "Webcam", "Microphone", "USB Drive", "Hard Drive", "Cable", "Paper Clips", "Binder Clips", "Rubber Bands", "Push Pins", "Thumbtacks", "Glue", "Ruler", "Protractor", "Compass", "Post-it Notes", "Index Cards", "Folder", "Binder", "Laminator", "Label Maker", "Hole Punch", "Pencil Sharpener", "Desk Organizer", "In-box", "Out-box", "Letter Opener", "Magnifying Glass", "Sewing Machine", "Thread", "Needle", "Thimble", "Pin Cushion", "Fabric", "Yarn", "Knitting Needles", "Crochet Hook", "Embroidery Hoop", "Easle", "Canvas", "Palette", "Clay", "Kiln", "Pottery Wheel", "Guitar", "Piano", "Keyboard", "Violin", "Flute", "Trumpet", "Drums", "Metronome", "Music Stand", "Treadmill", "Elliptical", "Stationary Bike", "Dumbbells", "Kettlebells", "Barbell", "Weight Plates", "Yoga Mat", "Foam Roller", "Resistance Bands", "Jump Rope", "Punching Bag", "Ping Pong Table", "Pool Table", "Foosball Table", "Dartboard", "Board Games", "Playing Cards", "Puzzles", "Dog Bed", "Cat Tree", "Litter Box", "Food Bowl", "Water Bowl", "Leash", "Collar", "Aquarium", "Fish Tank", "Birdcage", "Hamster Cage", "Shed", "Greenhouse", "Garden Gnome", "Bird Bath", "Wind Chimes", "Hammock", "Grill", "Smoker", "Fire Pit", "Patio Furniture", "Outdoor Heater", "Pool", "Hot Tub", "Jacuzzi", "Sauna", "Steam Room", "Picture Frame", "Poster", "Sculpture", "Candle", "Incense", "Potpourri", "Diffuser", "Essential Oils", "Throw Pillow", "Area Rug", "Runner", "Tapestry", "Wall Decal", "Wallpaper", "Chalkboard", "Bulletin Board", "Doggie Door", "Baby Gate", "Night Light", "Mobile", "Diaper Pail", "Baby Monitor", "Bouncer", "Swing", "Walker", "Car Seat", "Booster Seat", "Toy Chest"
		  ],

		  People: [
			"President", "King", "Queen", "Athlete", "Celebrity", "Artist", "Musician", "Scientist", "Teacher", "Student", "Child", "Elderly", "Baby", "Tourist", "Police Officer", "Doctor", "Firefighter", "Chef", "Astronaut", "Villain", "Hero", "Neighbor", "Friend", "Boss", "Employee", "Stranger", "Beggar", "Model", "Guard", "Priest", "Nun", "Monk", "Philosopher", "Inventor", "Explorer", "Pirate", "Ninja", "Samurai", "Viking", "Knight", "Jester", "Clown", "Magician", "Detective", "Spy", "Ghost", "Alien", "Robot", "Vampire", "Werewolf", "Zombie", "Mermaid", "Dwarf", "Elf", "Giant", "Wizard", "Witch", "Engineer", "Farmer", "Merchant", "Trader", "Sailor", "Captain", "Hunter", "Siblings", "Parent", "Grandparent", "Cousin", "Aunt", "Uncle", "Nephew", "Niece", "Spouse", "Partner", "Fiancé", "Groom", "Bride", "Best Man", "Maid of Honor", "Godparent", "Roommate", "Landlord", "Tenant", "Client", "Customer", "Vendor", "Supplier", "Consumer", "Patient", "Commuter", "Pedestrian", "Audience", "Spectator", "Witness", "Suspect", "Victim", "Heir", "Royal", "Emperor", "Duchess", "Duke", "Count", "Earl", "Baron", "Bishop", "Deacon", "Rabbi", "Imam", "Shaman", "Oracle", "Seer", "Prophet", "Barbarian", "Gladiator", "Centurion", "Scribe", "Herald", "Courier", "Soldier", "General", "Admiral", "Pilot", "Driver", "Conductor", "Butcher", "Baker", "Candlestick Maker", "Carpenter", "Plumber", "Electrician", "Mechanic", "Architect", "Designer", "Writer", "Author", "Poet", "Journalist", "Editor", "Publisher", "Librarian", "Curator", "Historian", "Archaeologist", "Geologist", "Biologist", "Chemist", "Physicist", "Mathematician", "Economist", "Sociologist", "Psychologist", "Psychiatrist", "Therapist", "Counselor", "Social Worker", "Lawyer", "Judge", "Paralegal", "Politician", "Senator", "Congressman", "Mayor", "Governor", "Ambassador", "Diplomat", "Activist", "Protester", "Volunteer", "Philanthropist", "CEO", "Manager", "Supervisor", "Assistant", "Receptionist", "Secretary", "Accountant", "Auditor", "Consultant", "Entrepreneur", "Investor", "Banker", "Stockbroker", "Realtor", "Agent", "Actor", "Director", "Producer", "Screenwriter", "Cinematographer", "Animator", "Dancer", "Choreographer", "Singer", "Composer", "Songwriter", "DJ", "Comedian", "Painter", "Sculptor", "Photographer", "Illustrator", "Graphic Designer", "Fashion Designer", "Tailor", "Seamstress", "Jeweler", "Goldsmith", "Blacksmith", "Woodworker", "Potter", "Glassblower", "Weaver", "Florist", "Gardener", "Landscaper", "Ranger", "Zookeeper", "Veterinarian", "Trainer", "Coach", "Referee", "Umpire", "Commentator", "Analyst", "Scout", "Caddy", "Sherpa", "Guide", "Interpreter", "Translator", "Butler", "Maid", "Nanny", "Governess", "Chauffeur", "Doorman", "Concierge", "Bellhop", "Waiter", "Waitress", "Bartender", "Barista", "Host", "Hostess", "Usher", "Flight Attendant", "Cashier", "Clerk", "Salesperson", "Marketer", "Advertiser", "Researcher", "Analyst", "Technician", "Programmer", "Developer", "Administrator", "Janitor", "Custodian", "Sanitation Worker", "Construction Worker", "Miner", "Fisherman", "Lumberjack", "Cowboy", "Shepherd", "Apprentice", "Journeyman", "Master", "Mentor", "Protégé", "Disciple", "Follower", "Acolyte", "Fan", "Critic", "Rival", "Adversary", "Enemy", "Ally", "Confidante", "Sidekick", "Henchman", "Minion", "Goon", "Thug", "Gangster", "Mobster", "Criminal", "Outlaw", "Bandit", "Thief", "Burglar", "Con Artist", "Forger", "Smuggler", "Prisoner", "Inmate", "Warden", "Executioner", "Bounty Hunter", "Mercenary", "Assassin", "Terrorist", "Rebel", "Revolutionary", "Freedom Fighter", "Martyr", "Saint", "Sinner", "Angel", "Demon", "Devil", "God", "Goddess", "Titan", "Cyclops", "Centaur", "Satyr", "Nymph", "Fairy", "Goblin", "Orc", "Troll", "Ogre", "Dragon", "Griffin", "Unicorn", "Pegasus", "Sphinx", "Hydra", "Chimera", "Cerberus", "Phoenix", "Banshee", "Leprechaun", "Gnome", "Genie", "Djinn", "Mummy", "Frankenstein's Monster", "Headless Horseman", "Bigfoot", "Yeti", "Loch Ness Monster", "Adonis", "Amazon", "Maniac", "Genius", "Prodigy", "Savant", "Idiot", "Fool", "Lunatic", "Madman", "Nomad", "Pilgrim", "Refugee", "Immigrant", "Emigrant", "Expat", "Citizen", "Foreigner", "Native", "Indigenous", "Aboriginal", "Colonist", "Settler", "Pioneer", "Slave", "Master", "Servant", "Peasant", "Serf", "Lord", "Lady", "Noble", "Commoner", "Bourgeoisie", "Proletariat", "Czar", "Sultan", "Pharaoh", "Chief", "Elder", "Warrior", "Conqueror", "Dictator", "Tyrant", "Usurper", "Traitor", "Patriot", "Orphan", "Widow", "Widower", "Bachelor", "Bachelorette", "Spinster", "Hermit", "Recluse", "Misanthrope", "Optimist", "Pessimist", "Realist", "Idealist", "Cynic", "Skeptic", "Believer", "Atheist", "Agnostic", "Fanatic", "Zealot", "Guru", "Yogi", "Fakir", "Mystic", "Psychic", "Medium", "Clairvoyant", "Telepath", "Healer", "Exorcist", "Alchemist", "Astrologer", "Fortune Teller", "Soothsayer", "Charlatan", "Quack", "Impostor", "Doppelgänger", "Clone", "Cyborg", "Android", "Mutant", "Superhero", "Supervillain", "Anti-hero", "Protagonist", "Antagonist", "Deuteragonist", "Tritagonist", "Narrator", "Character", "Figure", "Individual", "Person", "Human", "Man", "Woman", "Boy", "Girl", "Toddler", "Infant", "Teenager", "Adult", "Senior Citizen"
		  ],
		  
		 "Historical Figures": [
		   "Cleopatra", "Julius Caesar", "Alexander the Great", "Joan of Arc", "Leonardo da Vinci", "William Shakespeare", "Isaac Newton", "George Washington", "Napoleon Bonaparte", "Abraham Lincoln", "Queen Victoria", "Albert Einstein", "Marie Curie", "Mahatma Gandhi", "Winston Churchill", "Franklin D. Roosevelt", "Martin Luther King Jr.", "Nelson Mandela", "Genghis Khan", "Confucius", "Aristotle", "Plato", "Socrates", "Michelangelo", "Galileo Galilei", "Christopher Columbus", "Marco Polo", "Nikola Tesla", "Henry Ford", "The Wright Brothers", "Amelia Earhart", "Rosa Parks", "Vincent van Gogh", "Mozart", "Beethoven", "Anne Frank", "Catherine the Great", "Blackbeard", "Sun Tzu", "Saladin", "Attila the Hun", "Hannibal Barca", "Hatshepsut", "Augustus", "Charlemagne", "Dante Alighieri", "Johannes Gutenberg", "Queen Elizabeth I", "Ferdinand Magellan", "Hernán Cortés", "Montezuma II", "Pocahontas", "Rembrandt", "Louis XIV", "James Cook", "Thomas Jefferson", "Marie Antoinette", "Simón Bolívar", "Charles Darwin", "Karl Marx", "Florence Nightingale", "Susan B. Anthony", "Sitting Bull", "Geronimo", "Thomas Edison", "Alexander Graham Bell", "Sigmund Freud", "Vladimir Lenin", "Joseph Stalin", "Benito Mussolini", "Adolf Hitler", "Mao Zedong", "Mother Teresa", "Hypatia", "Mansa Musa", "Frida Kahlo", "Eleanor Roosevelt", "Pablo Picasso", "W.E.B. Du Bois", "Srinivasa Ramanujan", "Alan Turing", "Rosalind Franklin", "James Watson", "Francis Crick", "Che Guevara", "Fidel Castro", "Malcolm X", "Muhammad Ali", "Neil Armstrong", "Yuri Gagarin", "Stephen Hawking", "Bill Gates", "Steve Jobs", "Tim Berners-Lee", "Oprah Winfrey", "Malala Yousafzai", "Homer", "Pythagoras", "Heraclitus", "Democritus", "Hippocrates", "Euclid", "Archimedes", "Zeno of Citium", "Cicero", "Ptolemy", "Hypatia of Alexandria", "Avicenna (Ibn Sina)", "Averroes (Ibn Rushd)", "Maimonides", "Thomas Aquinas", "Roger Bacon", "William of Ockham", "Niccolò Machiavelli", "Nicolaus Copernicus", "Thomas More", "Martin Luther", "John Calvin", "Francis Bacon", "Galileo Galilei", "Johannes Kepler", "Thomas Hobbes", "René Descartes", "John Locke", "Baruch Spinoza", "Gottfried Wilhelm Leibniz", "Voltaire", "Jean-Jacques Rousseau", "Immanuel Kant", "Adam Smith", "Mary Wollstonecraft", "Georg Wilhelm Friedrich Hegel", "John Stuart Mill", "Søren Kierkegaard", "Friedrich Nietzsche", "Max Weber", "Émile Durkheim", "Bertrand Russell", "Ludwig Wittgenstein", "Martin Heidegger", "Jean-Paul Sartre", "Simone de Beauvoir", "Albert Camus", "Ayn Rand", "Hannah Arendt", "Michel Foucault", "Noam Chomsky", "Zheng He", "Vasco da Gama", "John Cabot", "Amerigo Vespucci", "Juan Ponce de León", "Francisco Pizarro", "Jacques Cartier", "Francis Drake", "Henry Hudson", "Sacagawea", "Lewis and Clark", "David Livingstone", "Roald Amundsen", "Robert Falcon Scott", "Edmund Hillary"
		 ],

          "Board Games": [
			"Chess", "Checkers", "Monopoly", "Scrabble", "Clue", "Risk", "Battleship", "Catan", "Ticket to Ride", "Pandemic", "Codenames", "Jenga", "Connect Four", "Sorry!", "The Game of Life", "Trouble", "Snakes and Ladders", "Backgammon", "Go", "Dominoes", "Mahjong", "Carcassonne", "7 Wonders", "Azul", "Gloomhaven", "Dungeons & Dragons", "Warhammer", "Magic: The Gathering", "Poker", "Uno", "Exploding Kittens", "Cards Against Humanity", "King of Tokyo", "Splendor", "Photosynthesis", "Wingspan", "Terraforming Mars", "Scythe", "Root", "Betrayal at House on the Hill", "7 Wonders Duel", "A Feast for Odin", "Agricola", "Alhambra", "Android: Netrunner", "Ark Nova", "Arkham Horror", "Axis & Allies", "The Castles of Burgundy", "Caverna: The Cave Farmers", "Chinatown", "Civilization: A New Dawn", "Concordia", "Cosmic Encounter", "Crokinole", "Decrypto", "Dominion", "Dune: Imperium", "Eclipse", "Eldritch Horror", "Everdell", "Five Tribes", "Forbidden Island", "Galaxy Trucker", "Great Western Trail", "Hanabi", "The Isle of Cats", "Jaipur", "Jamaica", "Just One", "Kemet", "Keyflower", "Lords of Waterdeep", "Lost Cities", "Love Letter", "Mansions of Madness", "Marvel Champions: The Card Game", "Memoir '44", "Mice and Mystics", "Nemesis", "On Mars", "Orléans", "Patchwork", "Pax Pamir", "Power Grid", "Puerto Rico", "The Quacks of Quedlinburg", "Ra", "Rising Sun", "Robinson Crusoe: Adventures on the Cursed Island", "Roll for the Galaxy", "Sagrada", "Small World", "Spirit Island", "Star Realms", "Star Wars: Imperial Assault", "Star Wars: Rebellion", "Takenoko", "Targi", "Terra Mystica", "Tigris & Euphrates", "Tokaido", "Too Many Bones", "Trivial Pursuit", "Twilight Imperium", "Twilight Struggle", "Tzolk'in: The Mayan Calendar", "Underwater Cities", "Viticulture", "War of the Ring", "Welcome To...", "Yokohama"
		  ],

		  "Famous Landmarks": [
		    "Eiffel Tower", "Statue of Liberty", "Great Wall of China", "Pyramids of Giza", "Colosseum", "Taj Mahal", "Machu Picchu", "Christ the Redeemer", "Big Ben", "Leaning Tower of Pisa", "Sydney Opera House", "Acropolis", "Stonehenge", "Mount Rushmore", "Burj Khalifa", "The Louvre", "St. Basil's Cathedral", "Niagara Falls", "Grand Canyon", "Mount Everest", "The Great Sphinx", "Petra", "Angkor Wat", "Neuschwanstein Castle", "Golden Gate Bridge", "Sagrada Família", "Moai Statues", "St. Peter's Basilica", "Chichen Itza", "Hagia Sophia", "The Forbidden City", "Brandenburg Gate", "Tower of London", "Hollywood Sign", "Arc de Triomphe", "The Parthenon", "Versailles", "Pompeii", "The Alamo", "Mount Fuji", "Empire State Building", "The White House", "Lincoln Memorial", "Washington Monument", "Space Needle", "Gateway Arch", "Willis Tower", "Brooklyn Bridge", "CN Tower", "Château Frontenac", "Panama Canal", "Iguazu Falls", "Sugarloaf Mountain", "Perito Moreno Glacier", "Salar de Uyuni", "Tikal", "Teotihuacan", "Notre-Dame Cathedral", "Sacré-Cœur", "Mont Saint-Michel", "Matterhorn", "Jet d'Eau", "London Eye", "Buckingham Palace", "The Shard", "Edinburgh Castle", "Cliffs of Moher", "Giant's Causeway", "Trevi Fountain", "The Pantheon", "Florence Cathedral", "Rialto Bridge", "Mount Vesuvius", "Sistine Chapel", "Monte Carlo Casino", "The Alhambra", "Mosque-Cathedral of Córdoba", "Pena Palace", "Atomium", "Kinderdijk Windmills", "The Little Mermaid", "Charles Bridge", "Hungarian Parliament Building", "Red Square", "State Hermitage Museum", "Burj Al Arab", "Sheikh Zayed Grand Mosque", "Western Wall", "Dome of the Rock", "Persepolis", "Petronas Twin Towers", "Marina Bay Sands", "Gardens by the Bay", "Taipei 101", "Tokyo Skytree", "Fushimi Inari Shrine", "Terracotta Army", "Summer Palace", "Potala Palace", "Borobudur Temple", "Prambanan", "Ha Long Bay", "Bagan", "Mount Kilimanjaro", "Victoria Falls", "Table Mountain", "Cape of Good Hope", "Avenue of the Baobabs", "Uluru", "Great Barrier Reef", "Milford Sound", "Hobbiton Movie Set", "Sky Tower", "Yellowstone National Park", "Yosemite Valley", "Times Square", "Central Park", "Walt Disney World", "The Bean (Cloud Gate)", "Hoover Dam", "Alcatraz Island", "Pearl Harbor National Memorial", "Wailing Wall", "Mecca (The Kaaba)", "Blue Mosque", "Topkapi Palace", "Ephesus", "Meteora", "Santorini (Oia)", "Dubrovnik Old Town", "Lake Bled", "Schönbrunn Palace", "Reichstag Building", "Cologne Cathedral", "Rijksmuseum", "Van Gogh Museum", "Louvre Abu Dhabi", "Museum of Islamic Art", "Lotus Temple", "Hawa Mahal", "Golden Temple", "Sigiriya", "Banaue Rice Terraces", "Chocolate Hills", "Jeju Island"
		  ],
            
		  Music: [
		    "Bohemian Rhapsody", "Like a Rolling Stone", "Smells Like Teen Spirit", "Billie Jean", "Stairway to Heaven", "Hey Jude", "Hotel California", "I Will Always Love You", "Shape of You", "Uptown Funk", "Rolling in the Deep", "Blinding Lights", "Despacito", "Hallelujah", "Wonderwall", "Yesterday", "Imagine", "Sweet Child o' Mine", "One", "No Woman, No Cry", "Take on Me", "Africa", "Don't Stop Believin'", "Dancing Queen", "Livin' on a Prayer", "What's Going On", "Superstition", "Good Vibrations", "Respect", "My Girl", "London Calling", "Born to Run", "Like a Prayer", "Purple Haze", "(I Can't Get No) Satisfaction", "All Star", "Never Gonna Give You Up", "Single Ladies", "Bad Romance", "Get Lucky", "Mr. Brightside", "Hey Ya!", "Crazy in Love", "Shake It Off", "Call Me Maybe", "Gangnam Style", "Happy", "Can't Stop the Feeling!", "See You Again", "Old Town Road", "Watermelon Sugar", "bad guy", "Baby Shark", "Stayin' Alive", "Y.M.C.A.", "I Want It That Way", "...Baby One More Time", "Wannabe", "Creep", "Lose Yourself", "In Da Club", "Hips Don't Lie", "Firework", "Let It Go", "My Heart Will Go On", "Every Breath You Take", "Sweet Home Alabama", "Another Brick in the Wall", "With or Without You", "Light My Fire", "The Real Slim Shady", "Umbrella", "Party in the U.S.A.", "Poker Face", "Roar", "Sorry", "Thank U, Next", "Truth Hurts", "Someone You Loved", "Drivers License", "Good 4 U", "As It Was", "Flowers", "Anti-Hero", "Paint The Town Red", "I'm Good (Blue)", "Killing Me Softly", "American Pie", "Piano Man", "Jolene", "Country Roads", "Ring of Fire", "Free Fallin'", "Brown Eyed Girl", "Stand by Me", "I Heard It Through the Grapevine", "What a Wonderful World", "Somewhere Over the Rainbow", "Singin' in the Rain", "Jailhouse Rock", "Hound Dog", "Great Balls of Fire", "Johnny B. Goode", "Surfin' U.S.A.", "A Day in the Life", "Gimme Shelter", "Whole Lotta Love", "Smoke on the Water", "Back in Black", "Enter Sandman", "Come as You Are", "Basket Case", "Losing My Religion", "Bittersweet Symphony", "Seven Nation Army", "Float On", "Take Me Out", "Under the Bridge", "Californication", "Numb", "In the End", "Welcome to the Black Parade", "Sugar, We're Goin Down", "Thnks fr th Mmrs", "Misery Business", "The Middle", "All the Small Things", "Stacy's Mom", "Mr. Jones", "Ironic", "You Oughta Know", "Torn", "Zombie", "Don't Speak", "Just a Girl", "Waterfalls", "No Scrubs", "Say My Name", "Genie in a Bottle", "Toxic", "Oops!... I Did It Again", "Bye Bye Bye", "Everybody (Backstreet's Back)", "Vogue", "Like a Virgin", "When Doves Cry", "Kiss", "Faith", "Careless Whisper", "Wake Me Up Before You Go-Go", "Girls Just Want to Have Fun", "Time After Time", "Total Eclipse of the Heart", "I Love Rock 'n' Roll", "We Will Rock You", "Another One Bites the Dust", "We Are the Champions", "I'm Still Standing", "Rocket Man", "Tiny Dancer", "Your Song", "Space Oddity", "Heroes", "Let's Dance", "Bridge Over Troubled Water", "The Sound of Silence", "Mrs. Robinson", "California Dreamin'", "Fortunate Son", "Bad Moon Rising", "House of the Rising Sun", "The Twist", "My Generation", "Be My Baby", "Can't Help Falling in Love", "Fly Me to the Moon", "My Way", "New York, New York", "Unforgettable", "At Last", "Lean on Me", "Ain't No Sunshine", "Let's Stay Together", "I Got You (I Feel Good)", "Get Up Offa That Thing", "September", "Let's Groove", "Super Freak", "U Can't Touch This", "Ice Ice Baby", "Rapper's Delight", "The Message", "Walk This Way", "Fight for Your Right", "Juicy", "Big Poppa", "California Love", "Changes", "Still D.R.E.", "Nuthin' but a 'G' Thang", "Empire State of Mind", "99 Problems", "Stronger", "Gold Digger", "Hey, Soul Sister", "I Gotta Feeling", "Viva La Vida", "Clocks", "The Scientist", "Yellow", "Chasing Cars", "How to Save a Life", "Since U Been Gone", "Complicated", "Sk8er Boi", "A Thousand Miles", "Hot in Herre", "Dilemma", "Yeah!", "Low", "Tik Tok", "We Found Love", "Someone Like You", "Hello", "Thrift Shop", "Royals", "All About That Bass", "Closer", "Lucid Dreams", "Sicko Mode", "Rockstar", "Circles", "The Box", "Savage", "Levitating", "Don't Start Now", "Heat Waves", "Stay", "Industry Baby", "Shallow", "I Will Survive", "Espresso", "Beautiful Things", "Lose Control", "Texas Hold 'Em", "A Bar Song (Tipsy)", "Too Sweet", "Birds of a Feather", "Please Please Please", "Good Luck, Babe!", "I Had Some Help", "Stick Season", "Cruel Summer", "Vampire", "What Was I Made For?", "Dance The Night", "Houdini", "Greedy", "Strangers", "Fast Car", "Last Night", "Sunroof", "Made You Look", "About Damn Time", "Break My Soul", "Cuff It", "Golden Hour", "Until I Found You", "Glimpse of Us", "Running Up That Hill (A Deal with God)", "Save Your Tears", "Peaches", "Ghost", "Shivers", "Bad Habits", "Cold Heart", "Deja Vu", "Traitor", "Positions", "Dynamite", "Butter", "Permission to Dance", "My Universe", "Mood", "Adore You", "Memories", "Everything I Wanted", "Señorita", "Sucker", "High Hopes", "Happier", "Better Now", "Havana", "Perfect", "Humble", "Believer", "Something Just like This", "One Dance", "Love Yourself", "Work", "Stressed Out", "Cheerleader", "Can't Feel My Face", "Trap Queen", "Stay With Me", "All of Me", "Counting Stars", "Timber", "Blurred Lines", "Just Give Me a Reason", "Mirrors", "We Can't Stop", "Wrecking Ball", "Somebody That I Used to Know", "We Are Young", "Payphone", "Starships", "Whistle", "Home", "I Will Wait", "Ho Hey", "Little Talks", "Breakeven", "Use Somebody", "Sex on Fire", "Dog Days Are Over", "Pumped Up Kicks", "Sail", "Midnight City", "Safe and Sound", "Titanium", "Chandelier", "Elastic Heart", "Cheap Thrills", "The Greatest", "Unstoppable", "Only Girl (In the World)", "This Is What You Came For", "Summer", "Feel So Close", "Sweet Nothing", "I Need Your Love", "Outside", "Thinking Out Loud", "Castle on the Hill", "Galway Girl", "Photograph", "The A Team", "Grenade", "Talking to the Moon", "The Lazy Song", "Marry You", "Treasure", "When I Was Your Man", "24K Magic", "That's What I Like", "Locked Out of Heaven", "Man in the Mirror", "Thriller", "Beat It", "Smooth Criminal", "Dancing in the Dark", "Born in the U.S.A.", "I Wanna Dance with Somebody", "How Will I Know", "Material Girl", "Holiday", "Crazy Little Thing Called Love", "Don't Stop Me Now", "Under Pressure", "Dreams", "Go Your Own Way", "The Chain", "Landslide", "Sweet Caroline", "Mamma Mia", "Waterloo", "Gimme! Gimme! Gimme!", "Super Trouper", "Take a Chance on Me", "Fernando", "Boogie Wonderland", "How Deep Is Your Love", "Night Fever", "You Should Be Dancing", "Grease", "Summer Nights", "You're the One That I Want", "Hopelessly Devoted to You", "Footloose", "Danger Zone", "Eye of the Tiger", "Ghostbusters", "The Power of Love", "It's Tricky", "Signed, Sealed, Delivered", "Help!", "Twist and Shout", "Let It Be", "Suspicious Minds", "Tiny Dancer", "Bennie and the Jets", "Don't Go Breaking My Heart", "Rich Girl", "Maneater", "You Make My Dreams", "Wake Me Up", "Levels", "Pompeii", "Riptide", "Budapest", "Shut Up and Dance", "Adventure of a Lifetime", "A Sky Full of Stars", "Paradise", "Fix You", "Iris", "Slide", "Blackbird", "Here Comes the Sun", "Eleanor Rigby", "Come Together", "In My Life", "Penny Lane", "All You Need Is Love", "Ob-La-Di, Ob-La-Da", "Lucy in the Sky with Diamonds", "Strawberry Fields Forever", "While My Guitar Gently Weeps", "Across the Universe", "Don't Let Me Down", "Get Back", "Lady Madonna", "Paperback Writer", "Day Tripper", "We Can Work It Out", "Ticket to Ride", "Eight Days a Week", "I Feel Fine", "A Hard Day's Night", "Can't Buy Me Love", "She Loves You", "I Want to Hold Your Hand", "Love Me Do", "Please Please Me", "Twist and Shout", "Saw Her Standing There", "Do You Want to Know a Secret", "All My Loving", "Till There Was You", "Roll over Beethoven", "Money (That's What I Want)", "You Really Got a Hold on Me", "Long Tall Sally", "Rock and Roll Music", "Mr. Moonlight", "Kansas City/Hey-Hey-Hey-Hey!", "Words of Love", "Honey Don't", "Every Little Thing", "I Don't Want to Spoil the Party", "What You're Doing", "No Reply", "Baby's in Black", "Rock and Roll Music", "I'll Follow the Sun", "Mr. Moonlight", "Honey Don't", "I'll Be Back", "She's a Woman", "I Feel Fine", "Matchbox", "Slow Down", "Long Tall Sally", "I Call Your Name", "Bad Boy", "Yes It Is", "I'm Down", "The Night Before", "You've Got to Hide Your Love Away", "I Need You", "Another Girl", "You're Going to Lose That Girl", "Ticket to Ride", "Act Naturally", "It's Only Love", "You Like Me Too Much", "Tell Me What You See", "I've Just Seen a Face", "Yesterday", "Dizzy Miss Lizzy", "Day Tripper", "We Can Work It Out", "Drive My Car", "Norwegian Wood (This Bird Has Flown)", "You Won't See Me", "Nowhere Man", "Think for Yourself", "The Word", "Michelle", "What Goes On", "Girl", "I'm Looking Through You", "In My Life", "Wait", "If I Needed Someone", "Run for Your Life", "Taxman", "Eleanor Rigby", "I'm Only Sleeping", "Love You To", "Here, There and Everywhere", "Yellow Submarine", "She Said She Said", "Good Day Sunshine", "And Your Bird Can Sing", "For No One", "Doctor Robert", "I Want to Tell You", "Got to Get You into My Life", "Tomorrow Never Knows", "Sgt. Pepper's Lonely Hearts Club Band", "With a Little Help from My Friends", "Lucy in the Sky with Diamonds", "Getting Better", "Fixing a Hole", "She's Leaving Home", "Being for the Benefit of Mr. Kite!", "Within You Without You", "When I'm Sixty-Four", "Lovely Rita", "Good Morning Good Morning", "Sgt. Pepper's Lonely Hearts Club Band (Reprise)", "A Day in the Life", "Magical Mystery Tour", "The Fool on the Hill", "Flying", "Blue Jay Way", "Your Mother Should Know", "I Am the Walrus", "Hello, Goodbye", "Strawberry Fields Forever", "Penny Lane", "Baby, You're a Rich Man", "All You Need Is Love", "Back in the U.S.S.R.", "Dear Prudence", "Glass Onion", "Ob-La-Di, Ob-La-Da", "Wild Honey Pie", "The Continuing Story of Bungalow Bill", "While My Guitar Gently Weeps", "Happiness Is a Warm Gun", "Martha My Dear", "I'm So Tired", "Blackbird", "Piggies", "Rocky Raccoon", "Don't Pass Me By", "Why Don't We Do It in the Road?", "I Will", "Julia", "Birthday", "Yer Blues", "Mother Nature's Son", "Everybody's Got Something to Hide Except Me and My Monkey", "Sexy Sadie", "Helter Skelter", "Long, Long, Long", "Revolution 1", "Honey Pie", "Savoy Truffle", "Cry Baby Cry", "Revolution 9", "Good Night", "Yellow Submarine", "Only a Northern Song", "All Together Now", "Hey Bulldog", "It's All Too Much", "All You Need Is Love", "Come Together", "Something", "Maxwell's Silver Hammer", "Oh! Darling", "Octopus's Garden", "I Want You (She's So Heavy)", "Here Comes the Sun", "Because", "You Never Give Me Your Money", "Sun King", "Mean Mr. Mustard", "Polythene Pam", "She Came in Through the Bathroom Window", "Golden Slumbers", "Carry That Weight", "The End", "Her Majesty", "Two of Us", "Dig a Pony", "Across the Universe", "I Me Mine", "Dig It", "Let It Be", "Maggie Mae", "I've Got a Feeling", "One After 909", "The Long and Winding Road", "For You Blue", "Get Back", "Don't Let Me Down", "The Ballad of John and Yoko", "Old Brown Shoe", "You Know My Name (Look Up the Number)"
		  ],

		  School: [
			"Blackboard", "Chalk", "Desk", "Chair", "Backpack", "Pencil", "Pen", "Eraser", "Ruler", "Notebook", "Textbook", "Homework", "Test", "Exam", "Quiz", "Grade", "Teacher", "Student", "Principal", "Librarian", "Classroom", "Library", "Gym", "Cafeteria", "Playground", "Recess", "Locker", "Hallway", "Bus", "Bell", "Subject", "Math", "Science", "History", "Art", "Music", "Computer", "Projector", "Whiteboard", "Marker", "Glue", "Scissors", "Crayons", "Paint", "Diploma", "Graduation", "Report Card", "Detention", "Assembly", "Lecture", "Professor", "University", "College", "Preschool", "Kindergarten", "Prom", "Homecoming", "Yearbook", "Mascot", "Cheerleader", "Team", "Club", "Field Trip", "Science Fair", "Presentation", "Essay", "Lesson", "Curriculum", "Syllabus", "Tuition", "Scholarship", "Dormitory", "Fraternity", "Sorority", "Janitor", "Nurse", "Counselor", "Calculator", "Abacus", "Globe", "Map", "Atlas", "Dictionary", "Thesaurus", "Protractor", "Compass", "Binder", "Folder", "Paper", "Stapler", "Tardy", "Absent", "Present", "Lecture Hall", "Auditorium", "Stadium", "Bleachers", "Track", "Pool", "Show and Tell", "Pop Quiz", "Finals", "Midterms", "Semester", "Trimester", "Quarter", "School Uniform", "School Supplies", "Student Loan", "Dean", "Thesis", "Dissertation", "Research", "Laboratory", "Lab Coat", "Goggles", "Beaker", "Test Tube", "Bunsen Burner", "Microscope", "Telescope", "Periodic Table", "Formula", "Equation", "Poetry", "Novel", "Grammar", "Spelling", "Alphabet", "Numbers", "Addition", "Subtraction", "Multiplication", "Division", "Algebra", "Geometry", "Calculus", "Biology", "Chemistry", "Physics", "Geology", "Astronomy", "Sociology", "Psychology", "Philosophy", "Debate", "Drama", "Band", "Orchestra", "Choir", "Physical Education", "Health", "Lunchbox", "Thermos", "School Dance", "Valedictorian", "Salutatorian", "Honor Roll", "GPA", "SAT", "ACT", "Highlighter", "Sharpener", "Correction Tape", "Staples", "Paperclip", "Pushpin", "Rubber Band", "Index Card", "Sticky Note", "Sketchbook", "Canvas", "Easel", "Clay", "Gluestick", "Tablet", "Laptop", "Smartboard", "Stylus", "Charger", "Wi-Fi", "Login", "Password", "Email", "Software", "App", "Coding", "Programming", "Robotics", "Engineering", "Architecture", "Economics", "Anthropology", "Archaeology", "Linguistics", "Literature", "Journalism", "Photography", "Design", "Theater", "Acting", "Vocals", "Sheet Music", "Piano", "Guitar", "Violin", "Drums", "Flute", "Trumpet", "Saxophone", "Marching Band", "Color Guard", "Varsity", "Intramural", "Tryouts", "Coach", "Referee", "Whistle", "Scoreboard", "Trophy", "Medal", "Certificate", "Award", "Fellowship", "Grant", "Tenure", "Sabbatical", "Alumni", "Registrar", "Admissions", "Transcript", "Major", "Minor", "Degree", "Bachelor", "Master", "Doctorate", "PhD", "Associate", "Vocational", "Boarding School", "Private School", "Public School", "Charter School", "Homeschool", "Tutor", "Mentor", "Peer", "Classmate", "Roommate", "Bully", "Lost and Found", "Crossing Guard", "Fire Drill", "Lockdown", "First Aid", "Sick Day", "Doctor's Note", "Permission Slip", "Guardian", "PTA", "Conference", "Open House", "Orientation", "Schedule", "Period", "Block", "Deadline", "Due Date", "Extension", "Plagiarism", "Citation", "Bibliography", "Source", "Quote", "Paraphrase", "Study Group", "Cramming", "All-Nighter", "Energy Drink", "Coffee", "Vending Machine", "ID Card", "Lanyard", "Lock", "Combination", "Puzzle", "Reading", "Writing", "Listening", "Speaking", "Language", "English", "Spanish", "French", "German", "Latin", "Mandarin", "Sign Language", "ESL", "Special Education", "IEP", "Study Hall", "Free Period", "Credit", "Unit", "Chapter", "Page", "Paragraph", "Sentence", "Word", "Vowel", "Consonant", "Phonics", "Handwriting", "Cursive", "Typing", "Keyboard", "Mouse", "Monitor", "Screen", "Headphones", "Microphone", "Podcast", "Website", "Search Engine", "Database", "Encyclopedia", "Newspaper", "Magazine", "Journal", "Author", "Editor", "Illustrator", "Bookmark", "Fine", "Checkout", "Return", "Shelf", "Call Number", "Catalog", "Archive", "Museum", "Exhibit", "Court", "Field", "Pitch", "Rink", "Net", "Ball", "Bat", "Helmet", "Uniform", "Jersey", "Slogan", "Motto", "Anthem", "Pledge", "Flag", "Morning Announcements"
		  ],
          
          Halloween: [
			"Witch", "Ghost", "Vampire", "Werewolf", "Zombie", "Mummy", "Skeleton", "Spider", "Bat", "Black Cat", "Pumpkin", "Jack-o'-lantern", "Haunted House", "Cemetery", "Gravestone", "Cobweb", "Cauldron", "Broomstick", "Potion", "Spell", "Candy", "Costume", "Mask", "Trick-or-treat", "Spooky", "Scary", "Boo", "Fright", "Horror", "Monster", "Ghoul", "Goblin", "Demon", "Devil", "Scream", "Shadow", "Moon", "Night", "October", "Supernatural", "Paranormal", "Eerie", "Creepy", "Sinister", "Macabre", "Ominous", "Undead", "Apparition", "Phantom", "Poltergeist", "Séance", "Crypt", "Tomb", "Coffin", "Skull", "Bones", "Blood", "Gore", "Clown", "Scarecrow", "Alien", "Frankenstein", "Igor", "Dracula", "Banshee", "Imp", "Wraith", "Specter", "Reaper", "Coven", "Hex", "Curse", "Voodoo", "Tarot", "Ouija Board", "Crystal Ball", "Fog", "Mist", "Thunder", "Lightning", "Howl", "Cackle", "Moan", "Groan", "Shriek", "Candy Corn", "Caramel Apple", "Toffee Apple", "Popcorn Ball", "Chocolate", "Lollipop", "Gummy Worms", "Bonfire", "Hayride", "Corn Maze", "Masquerade", "Prank", "Mischief", "Samhain", "Harvest", "Autumn", "Full Moon", "Midnight", "Fear", "Terror", "Dread", "Nightmare", "Haunting", "Possession", "Exorcism", "Ghastly", "Grisly", "Grotesque", "Menacing", "Morbid", "Chilling", "Petrifying", "Ghost Story", "Urban Legend", "Folklore", "All Hallows' Eve", "Costume Party", "Pumpkin Carving", "Bobbing for Apples", "Horror Movie", "Slasher", "Thriller", "Grave", "Tombstone", "Mausoleum", "Catacombs", "Gargoyle", "Gremlin", "Headless Horseman", "Grim Reaper", "Lich", "Succubus", "Doppelgänger", "Wendigo", "Chupacabra", "Mothman", "Slime", "Ooze", "Fangs", "Claws", "Tentacles", "Eyeball", "Brain", "Entrails", "Guts", "Chains", "Manacles", "Scythe", "Axe", "Machete", "Chainsaw", "Dagger", "Candle", "Candelabra", "Lantern", "Strobe Light", "Blacklight", "Dry Ice", "Fake Blood", "Spider Web", "Animatronics", "Jump Scare", "Witchcraft", "Sorcery", "Necromancy", "Occult", "Ritual", "Incantation", "Beetlejuice", "Chucky", "Ghostface", "Freddy Krueger", "Hannibal Lecter", "Jason Voorhees", "Jigsaw", "Leatherface", "Michael Myers", "Norman Bates", "Pennywise", "Pinhead", "Regan MacNeil", "Sadako", "The Thing", "Xenomorph", "Jack Skellington", "Sally", "Oogie Boogie", "Corpse Bride", "The Addams Family", "Morticia", "Gomez", "Wednesday", "Pugsley", "Uncle Fester", "Lurch", "The Munsters", "Herman", "Lily", "Grandpa", "Eddie", "Marilyn", "Elvira", "Casper", "Ichabod Crane", "Sleepy Hollow", "Transylvania", "Salem", "Asylum", "Labyrinth", "Dungeon"
		  ],
          
          Christmas: [
			"A Christmas Carol", "Advent", "All I Want for Christmas is You", "Angel", "Anticipation", "Artificial Tree", "Atmosphere", "Baking", "Bauble", "Believe", "Bells", "Bethlehem", "Blanket", "Blessing", "Blitzen", "Blizzard", "Bough", "Bow", "Buddy the Elf", "Candle", "Candlelight", "Candy", "Candy Cane", "Card", "Carol", "Carolers", "Carols", "Celebrate", "Celebration", "Cheer", "Chestnuts", "Children", "Chilly", "Chimney", "Chocolate", "Christ", "Christmas Cookies", "Christmas Day", "Christmas Eve", "Christmas Tree", "Christmastime", "Cider", "Cold", "Comet", "Community", "Cookies", "Cookies for Santa", "Cozy", "Cranberry Sauce", "Crèche", "Cupid", "Dancer", "Dasher", "December", "Deck the Halls", "Decorate", "Decorations", "Dinner", "Donner", "Ebenezer Scrooge", "Eggnog", "Elf", "Elves", "Emmanuel", "Epiphany", "Evergreen", "Faith", "Family", "Family Gathering", "Family Reunion", "Father Christmas", "Feast", "Feliz Navidad", "Festive", "Fir", "Fireplace", "Frost", "Frosty", "Fruitcake", "Gabriel", "Garland", "Gift Exchange", "Gifts", "Gingerbread", "Gingerbread House", "Giving", "Glory", "Good list", "Goodwill", "Greeting Card", "Grinch", "Ham", "Happiness", "Harmony", "Hearth", "Ho Ho Ho", "Holiday", "Holly", "Home", "Hope", "Hot Chocolate", "Hymns", "Ice Skating", "Icicles", "Ivy", "Jack Frost", "Jack Skellington", "Jesus", "Jingle All the Way", "Jingle Bells", "Jolly", "Joy", "Joy to the World", "Krampus", "Kris Kringle", "Laughter", "Let it Snow", "Letter to Santa", "Lights", "Love", "Magic", "Manger", "Memories", "Merry", "Merry and Bright", "Messiah", "Miracle", "Mistletoe", "Mrs. Claus", "Nativity", "Nativity Scene", "Naughty or Nice", "Noel", "North Pole", "Nutcracker", "Ornaments", "Pageant", "Peace", "Peace on Earth", "Peppermint", "Pine", "Pinecone", "Plum Pudding", "Poinsettia", "Prancer", "Presents", "Pumpkin Pie", "Quince Pie", "Receive", "Reindeer", "Rejoice", "Ribbon", "Roast", "Rudolph", "Sack", "Saint Nicholas", "Santa Claus", "Santa Claus is Coming to Town", "Santa's Helpers", "Savior", "Scarf", "Scrooge", "Season's Greetings", "Secret Santa", "Sharing", "Shepherd", "Silent Night", "Sled", "Sleigh", "Sleigh Bells", "Snow", "Snowflake", "Snowman", "Sparkle", "Spirit", "St. Nicholas", "Star", "Stocking", "Sugarplums", "Sweater Weather", "The Polar Express", "Three Wise Men", "Tidings", "Tiny Tim", "Tinsel", "'Tis the Season", "Togetherness", "Toys", "Tradition", "Tree Skirt", "Tree Topper", "Turkey", "Twinkle", "Ugly Christmas Sweater", "Unwrapping", "Vixen", "Walking in a Winter Wonderland", "Warmth", "Wassail", "We Wish You a Merry Christmas", "White Christmas", "Winter", "Winter Wonderland", "Wishlist", "Workshop", "Wrapping Paper", "Wreath", "Yuletide"
		  ]
		};
		
        const CATEGORY_ICONS = {
            Supercell: "https://twitch.supercell.com/supercell-logo.png",
            Celebs: "https://em-content.zobj.net/source/microsoft-teams/337/smiling-face-with-sunglasses_1f60e.png",
            Movies: "https://em-content.zobj.net/source/microsoft-teams/337/popcorn_1f37f.png",
            Food: "https://em-content.zobj.net/source/microsoft-teams/363/hamburger_1f354.png",
            Brands: "https://em-content.zobj.net/source/microsoft-teams/337/shopping-bags_1f6cd-fe0f.png",
            Technology: "https://em-content.zobj.net/source/microsoft-teams/337/gear_2699-fe0f.png",
            TV: "https://em-content.zobj.net/source/microsoft-teams/337/television_1f4fa.png",
            Jobs: "https://em-content.zobj.net/source/microsoft-teams/337/briefcase_1f4bc.png",
            Mythology: "https://em-content.zobj.net/source/microsoft-teams/337/dragon-face_1f432.png", 
            Sport: "https://em-content.zobj.net/source/microsoft-teams/337/trophy_1f3c6.png",
            Places: "https://em-content.zobj.net/source/microsoft-teams/337/cityscape_1f3d9-fe0f.png",
            Instruments: "https://em-content.zobj.net/source/microsoft-teams/364/guitar_1f3b8.png",
            Superheroes: "https://em-content.zobj.net/source/microsoft-teams/337/superhero_light-skin-tone_1f9b8-1f3fb_1f3fb.png",
            Animals: "https://em-content.zobj.net/source/microsoft-teams/337/dog-face_1f436.png",
            Countries: "https://em-content.zobj.net/source/microsoft-teams/337/globe-showing-americas_1f30e.png",
            "Video Games": "https://em-content.zobj.net/source/microsoft-teams/337/joystick_1f579-fe0f.png",
            Science: "https://em-content.zobj.net/source/microsoft-teams/363/scientist-light-skin-tone_1f9d1-1f3fb-200d-1f52c.png",
            Clothing: "https://em-content.zobj.net/source/microsoft-teams/337/t-shirt_1f455.png",
            Home: "https://em-content.zobj.net/source/microsoft-teams/337/house_1f3e0.png",
            People: [
                "https://em-content.zobj.net/source/microsoft-teams/337/person_light-skin-tone_1f9d1-1f3fb_1f3fb.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/old-man_light-skin-tone_1f474-1f3fb_1f3fb.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/boy_medium-dark-skin-tone_1f466-1f3fe_1f3fe.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/boy_medium-light-skin-tone_1f466-1f3fc_1f3fc.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/woman-medium-light-skin-tone-red-hair_1f469-1f3fc-200d-1f9b0.png"
            ],
            "Historical Figures": "https://em-content.zobj.net/source/microsoft-teams/337/bust-in-silhouette_1f464.png",
            "Board Games": "https://em-content.zobj.net/source/microsoft-teams/337/game-die_1f3b2.png",
            "Famous Landmarks": "https://em-content.zobj.net/source/microsoft-teams/337/statue-of-liberty_1f5fd.png",
            Music: "https://em-content.zobj.net/source/microsoft-teams/337/musical-notes_1f3b6.png",
            School: "https://em-content.zobj.net/source/microsoft-teams/337/woman-teacher-light-skin-tone_1f469-1f3fb-200d-1f3eb.png",
            Christmas: [
                "https://em-content.zobj.net/source/microsoft-teams/364/christmas-tree_1f384.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/santa-claus_light-skin-tone_1f385-1f3fb_1f3fb.png",
                "https://em-content.zobj.net/source/microsoft-teams/364/snowman_2603-fe0f.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/snowflake_2744-fe0f.png"
            ],
            Halloween: [
                "https://em-content.zobj.net/source/microsoft-teams/337/jack-o-lantern_1f383.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/ghost_1f47b.png",
                "https://em-content.zobj.net/source/microsoft-teams/337/man-zombie_1f9df-200d-2642-fe0f.png",
                "https://em-content.zobj.net/source/microsoft-teams/364/man-vampire-medium-skin-tone_1f9db-1f3fd-200d-2642-fe0f.png"
            ]
        };

        const AUDIO_URLS = {
            // SFX (not affected by mute)
            startMission: "https://www.dropbox.com/scl/fi/6mqqjkan6k1z9b3rqv19m/01HX9JKSR2BK842A7XV43SW8Z0.mp3?rlkey=j9bf35mocbr2rceiunaak8r7i&raw=1",
            startRandomMission: "https://www.dropbox.com/scl/fi/9gl6f796t9szuen6f4y6p/01HXW72GB6SAGDFW8VBC8X25F2.mp3?rlkey=1392vzqlrk6dps0a8763us7uf&raw=1",
            selectCategory: "https://www.dropbox.com/scl/fi/tjwfrllo8lsb23t0abu27/01HWD5XAX15KKAKASJCBS18SMC.mp3?rlkey=82jumuuttcx9a0qdo98bp3wty&raw=1",
            deselectCategory: "https://www.dropbox.com/scl/fi/z9s27e8cx9zi4c9yg9zs9/01HWD5XAR2DPE0H1ZXJCBMF4MX.mp3?rlkey=54rmyfgzcntew0e0qy1lbf98z&raw=1",
            playAgain: "https://www.dropbox.com/scl/fi/o822ufm5jz0y0imeait4m/01HX6MKWSBBS0FW45A5N35AT5Z.mp3?rlkey=pwnm13xyxu5jo33pjgs2wyvyj&raw=1",
            switchOn: "https://www.dropbox.com/scl/fi/wttc9l7ujwjfjw8wuif7z/01HWD5XAV5T7SNYPM79JSPYJTP-1.mp3?rlkey=no7fuxmbz3bcgmtvaje61l5vy&raw=1",
            switchOff: "https://www.dropbox.com/scl/fi/ypnd4hikcnj69qi9y205k/01HWD5XB1GFY4G3Y4AZTC1GN2R.mp3?rlkey=m04pff93t90o6xkoktwqlv6wb&raw=1",
            uiClick: "https://www.dropbox.com/scl/fi/ww27xdd3abq3ozc0heds8/01HWD5XBKANVPZVCCTP7THR7Q2.mp3?rlkey=6httxc42qx2h3e7cfj16jvpbr&raw=1",
            openInfo: "https://www.dropbox.com/scl/fi/z3o61q4zqex0d4081r6ej/01HWD5XB2JFXRPXHS6VSGTFTMG.mp3?rlkey=o4j1j0zroc5tpseqa0z9stbdz&raw=1",
            toggleMode: "https://www.dropbox.com/scl/fi/a0csiwttotrzam52xos84/01HWD5XBNZEHSRDXY96T1W5E18.mp3?rlkey=wgjt1yzesree78p5bzroum1cd&raw=1",
            turnOrderReveal: "https://www.dropbox.com/scl/fi/wk1fguj7rf9u5t1hlaeq2/01HYDYM99NTN52107R03DRVHWV.mp3?rlkey=dy0a819d3z8l91uf08kdjpk6w&st=7tcwrkwi&raw=1",
            
            // Critical alerts & results (not affected by mute)
            alarm: "https://www.dropbox.com/scl/fi/33ljaplfdfse9h9xrqkia/01J9RASVSTKGV6WQ2GKBY86R84.mp3?rlkey=dhsr2ygnox9se0s88uklsfa5l&st=25yswvvu&raw=1",
            imposterWin: "https://www.dropbox.com/scl/fi/dcwhziv1s6y2esdeyshlr/01HSH4TXDZMFD17MZ6X052DSDK.mp3?rlkey=k125vxojv60ef1uimtqwvbmqr&st=k6mrbuoj&raw=1",
            agentWin: "https://www.dropbox.com/scl/fi/dfq6utr0g3ipxd7ie61iw/01HSH4PEC9GGB6AFS60K6059HB-1.mp3?rlkey=hr5l3w6ipwpq3uyo8vspo8slh&st=oqb5yhnp&raw=1",

            // Background Music (affected by mute)
            mainMenuMusic: "https://www.dropbox.com/scl/fi/2ptwdl60l1d8uonk2565r/01K2F0QVDH804F7BRXZM49PGP6.mp3?rlkey=xup3gy3mvh0s074m0exikou6m&st=b6sy1eaj&raw=1",
            christmasMainMenuMusic: "https://www.dropbox.com/scl/fi/1c7lzb1n8a48i9r3hrvdy/01K47KVW40QNJ5MSW2W8GXF515.mp3?rlkey=3qdhlz0vc8y9idiwukq2uef98&st=ai785l8j&raw=1",
            halloweenMainMenuMusic: "https://www.dropbox.com/scl/fi/6gxy1xwtm3s0asda688pi/01JTG9489V1580RK33J2A8QECJ.mp3?rlkey=blrpf3zu9n9n52ds353euiqu2&st=v5h2dskl&raw=1",
            categorySelectionMusic: "https://www.dropbox.com/scl/fi/tpqgmp0vic0fkwu2qa4z6/01K4783N93TC27JX716223WV45.mp3?rlkey=6gl82wcrpvioch4y30q7yaoij&st=nd1z0omz&raw=1",
            timerMusic: "https://www.dropbox.com/scl/fi/rw6a1k3er9zua9hy50y7r/01HSGT383SN8Y723GMVHWEGF1S.mp3?rlkey=o9inopsmgmztzh439pm3yqmw2&st=aqyn9x8c&raw=1",
            
            // Voice overs
            categories: {
                Supercell: "https://www.dropbox.com/scl/fi/8ebrjg08up658r0r1l20r/ElevenLabs_2025-12-15T08_16_40_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=5e4wyoyeueev4zw5m0hsnn5kn&raw=1",
                Celebs: "https://www.dropbox.com/scl/fi/hzt3egh9lr83ua2qbzots/ElevenLabs_2025-12-15T08_18_49_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=ox4hhf4k01vqeub4n92rusbtt&raw=1",
                Movies: "https://www.dropbox.com/scl/fi/42kj3rmyzt94t8sbcnh9t/ElevenLabs_2025-12-15T08_20_15_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=ai0g0f6jzy98u9qvtsjyw6dna&raw=1",
                Food: "https://www.dropbox.com/scl/fi/eq07yw6djh5il36mfwkao/ElevenLabs_2025-12-15T08_21_33_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=li1g1jblyxj0eivyldagpuwp4&raw=1",
                Brands: "https://www.dropbox.com/scl/fi/6jgyalizd34oikhfjxhjc/ElevenLabs_2025-12-15T08_22_46_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=07ogqqlh1qxg7cpn0neekfsqv&raw=1",
                Technology: "https://www.dropbox.com/scl/fi/gaq3bohzoi8sosns9olkd/ElevenLabs_2025-12-15T08_23_41_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=v9zsg3i0sgjfrcfae50mppid2&raw=1",
                TV: "https://www.dropbox.com/scl/fi/akhpp5u75pdzh9icg33mo/ElevenLabs_2025-12-15T18_17_44_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=o4lfbwubfvc1okpnga3ppj38l&raw=1",
                Jobs: "https://www.dropbox.com/scl/fi/zi2ggltharedj9bbwzfeg/ElevenLabs_2025-12-15T08_25_23_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=xz9g6qscw0e2j2p4fzaap55dr&raw=1",
                Mythology: "https://www.dropbox.com/scl/fi/az8vf55cavmg8yw1ujl51/ElevenLabs_2025-12-15T08_26_13_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=xf5pa1mtm7ovpklf0u4mev68u&raw=1",
                Sport: "https://www.dropbox.com/scl/fi/mtasry0x1rsbkdetzfjde/ElevenLabs_2025-12-15T08_27_37_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=ps81bq9m31hqkyi9orq0zcv25&raw=1",
                Places: "https://www.dropbox.com/scl/fi/2cqnpjiwxg92cy2jsafcg/ElevenLabs_2025-12-15T08_28_27_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=68iifrvmfc7g7wxg5b5p4kj9v&raw=1",
                Instruments: "https://www.dropbox.com/scl/fi/voh9inpojdxru6hrmi7ic/ElevenLabs_2025-12-15T08_29_22_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=9ff7iivutejrfsim7wk3mic1w&raw=1",
                Superheroes: "https://www.dropbox.com/scl/fi/p5xbsz50if9i75pras2og/ElevenLabs_2025-12-15T08_38_43_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=cvsc91cryxm94sfetmntb630s&raw=1",
                Animals: "https://www.dropbox.com/scl/fi/fhty3jkw4g43v32a82wa5/ElevenLabs_2025-12-15T08_41_39_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=kefs2jzmt9lealfbi20jz80xy&raw=1",
                Countries: "https://www.dropbox.com/scl/fi/7ogj4vdnm8vgv8l06q851/ElevenLabs_2025-12-15T08_42_31_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=xj31mwhkj3gnkdtfagqendwo5&raw=1",
                "Video Games": "https://www.dropbox.com/scl/fi/e95u1v2ugjqjyndkzbr5x/ElevenLabs_2025-12-15T08_43_37_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=h8fi9gfb9fabe46sfambcwdse&raw=1",
                Science: "https://www.dropbox.com/scl/fi/ir5zqotuomxllzs9rrtkk/ElevenLabs_2025-12-15T08_44_27_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=e3556mc64aaa6w86nhfe7meu6&raw=1",
                Clothing: "https://www.dropbox.com/scl/fi/j9ufwciweptnoezljo8ut/ElevenLabs_2025-12-15T08_45_27_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=edhoon9hrhxm8k46t1rao01rp&raw=1",
                Home: "https://www.dropbox.com/scl/fi/d833xr5wu9aonnpj2guv1/ElevenLabs_2025-12-15T08_47_02_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=kxugvsnlwtofbke9bcn1gwxl0&raw=1",
                People: "https://www.dropbox.com/scl/fi/4nqyxqkzkihhay2ocqx3x/ElevenLabs_2025-12-15T08_47_55_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=0bcjbnbv1vzlyj7q53hiyb9et&raw=1",
                "Historical Figures": "https://www.dropbox.com/scl/fi/loo1iw5wyh8bpv5lmoygo/ElevenLabs_2025-12-15T14_24_36_Cornelius_pvc_sp100_s50_sb75_v3-1.mp3?rlkey=1fca4p6w65i6mm0eu10x299qk&raw=1",
                "Board Games": "https://www.dropbox.com/scl/fi/g591eqdqmeb3f7b5tkk9c/ElevenLabs_2025-12-15T14_28_29_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=pb4ni2jbejp3ipm1ukshbqskn&raw=1",
                "Famous Landmarks": "https://www.dropbox.com/scl/fi/r626enpj8238gm2y1pbe2/ElevenLabs_2025-12-15T14_29_34_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=cl0l16f5prizvydvcutl6gk5c&raw=1",
                Music: "https://www.dropbox.com/scl/fi/v9sf5kdv7n5j8va5wd5e0/ElevenLabs_2025-12-16T08_52_40_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=58b05s7sniamze9ynzvnfbd3r&raw=1",
                School: "https://www.dropbox.com/scl/fi/lblzn777kgiswpnofikq7/ElevenLabs_2025-12-17T18_43_24_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=h6aeq6c31rj05u57x4w9xjvoo&raw=1",
                Christmas: "https://www.dropbox.com/scl/fi/2l5jdzq1vzlnb24ekb7fn/ElevenLabs_2026-01-16T11_43_59_Cornelius_pvc_sp100_s50_sb75_v3-1.mp3?rlkey=v8086o9lsxqz5xn6roxwfw6h3&st=7gwti2t7&raw=1",
                Halloween: "https://www.dropbox.com/scl/fi/lcy3dmjynsqjplykey5ss/ElevenLabs_2026-01-16T11_44_18_Cornelius_pvc_sp100_s50_sb75_v3.mp3?rlkey=vatzphm5zg0s3j672h49yv9qz&st=78ki43yh&raw=1",
            }
        };

		
        // --- SEASONAL CATEGORY LOGIC ---
        const getSeasonalInfo = () => {
            const now = new Date();
            const month = now.getMonth() + 1; // getMonth() is 0-indexed
            const day = now.getDate();
            let season = 'default';
            let categories = [];

            // Halloween: Oct 24 - Nov 7
            if ((month === 10 && day >= 24) || (month === 11 && day <= 7)) {
                season = 'halloween';
                categories.push('Halloween');
            }

            // Christmas: Dec 18 - Jan 1
            if ((month === 12 && day >= 18) || (month === 1 && day <= 1)) {
                season = 'christmas';
                categories.push('Christmas');
            }
            
            return { season, categories };
        };
        
        const { season: currentSeason, categories: seasonalCategories } = getSeasonalInfo();

        const getActiveWordBank = (baseBank) => {
            const activeBank = { ...baseBank };
            if (!seasonalCategories.includes('Halloween')) {
                delete activeBank['Halloween'];
            }
            if (!seasonalCategories.includes('Christmas')) {
                delete activeBank['Christmas'];
            }
            return activeBank;
        };
        
        const regularCategories = Object.keys(WORD_BANK).filter(c => c !== 'Supercell' && c !== 'Halloween' && c !== 'Christmas');
		const DISPLAY_CATEGORIES = ['Supercell', ...seasonalCategories, ...regularCategories];
		
		// --- DYNAMIC WORD COUNT CALCULATION ---
        const totalWords = Object.values(WORD_BANK).reduce((sum, category) => sum + category.length, 0);
        const roundedWordCount = Math.floor(totalWords / 250) * 250;
        
        // --- COMPONENTS ---
		
		const OfflineScreen = () => (
            <div className="fixed inset-0 z-[100] flex flex-col items-center justify-center p-6 bg-slate-950 text-center animate-fadeIn select-none overflow-hidden">
                {/* Background Atmosphere */}
                <div className="absolute inset-0 pointer-events-none">
                     <div className="blob bg-red-600/10 top-[-20%] left-[-20%] w-[80%] h-[80%] blur-[100px]"></div>
                     <div className="blob bg-orange-600/10 bottom-[-20%] right-[-20%] w-[80%] h-[80%] blur-[100px] animation-delay-2000"></div>
                </div>

                <div className="relative z-10 w-full max-w-sm glass-panel p-8 rounded-[2.5rem] border border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] animate-slide-up">
                    
                    {/* Old Icon (Restored) */}
                    <div className="w-24 h-24 bg-red-500/10 rounded-full flex items-center justify-center mx-auto mb-6 ring-1 ring-red-500/30 animate-pulse">
                        <i className="fa-solid fa-wifi text-4xl text-red-500"></i>
                    </div>

                    <h2 className="text-3xl font-display font-black text-white mb-3 tracking-tight">Connection Lost</h2>
                    
                    <p className="text-white/60 text-sm font-medium leading-relaxed mb-8 max-w-[260px] mx-auto">
                        Oops! We can't reach the servers. Please check your internet connection.
                    </p>

                    <button 
                        onClick={() => window.location.reload()} 
                        className="w-full bg-white text-slate-950 font-display font-bold text-lg py-4 rounded-2xl shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:shadow-[0_0_30px_rgba(255,255,255,0.2)] active:scale-95 transition-all flex items-center justify-center gap-3"
                    >
                        <i className="fa-solid fa-rotate-right text-lg"></i> TRY AGAIN
                    </button>
                </div>
            </div>
        );

        const SeasonalTitle = ({ season, className }) => {
            const baseClassName = className || "text-6xl font-display font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-white to-white/50 drop-shadow-lg tracking-tight";

            if (season === 'christmas') {
                return (
                    <h1 className={`${baseClassName} flex items-center justify-center`}>
                        <span>IMPOS</span>
                        <img 
                            src="https://em-content.zobj.net/source/microsoft-teams/364/christmas-tree_1f384.png" 
                            alt="T" 
                            className="inline-block w-[1em] h-[1em] mx-[-0.1em] -mb-[0.0em] drop-shadow-lg"
                            draggable="false"
                        />
                        <span>ER</span>
                    </h1>
                );
            }

            if (season === 'halloween') {
                 return (
                    <h1 className={`${baseClassName} flex items-center justify-center`}>
                        <span>IMP</span>
                        <img 
                            src="https://em-content.zobj.net/source/microsoft-teams/337/jack-o-lantern_1f383.png" 
                            alt="O" 
                            className="inline-block w-[1em] h-[1em] mx-[0.0em] mb-[0.05em] drop-shadow-lg"
                            draggable="false"
                        />
                        <span>STER</span>
                    </h1>
                );
            }

            return <h1 className={baseClassName}>IMPOSTER</h1>;
        };

        const PlayerAvatar = ({ name, className = "" }) => {
            if (!name) return null;
            const avatarUrl = `https://api.dicebear.com/9.x/croodles-neutral/svg?seed=${encodeURIComponent(name)}`;
            
            // This cleaner filter just inverts the color, making black lines white.
            const monochromeFilter = { filter: 'invert(1)' };

            return (
                <img
                    src={avatarUrl}
                    alt={`${name}'s avatar`}
                    className={`flex-shrink-0 ${className}`}
                    style={monochromeFilter}
                    draggable="false"
                    onError={(e) => { e.target.style.display = 'none'; }}
                />
            );
        };

        // NEW: How to Play Modal
		const HowToPlayModal = ({ onClose }) => {
			const scenarios = {
				imposter: [
					{
						title: 'Scenario: The Word is "Shark"',
						agentWord: "Shark",
						imposterWord: "None",
						clues: [
							{ player: "Alice (Agent)", clue: "This creature lives in the ocean." },
							{ player: "Dan (Imposter)", clue: "It's a type of animal." },
							{ player: "Charlie (Agent)", clue: "It has a prominent fin." },
						],
						explanation: "Dan's clue is very generic. While true, it suggests he's waiting for more information before committing to a specific idea. Alice and Charlie's specific clues put pressure on Dan to be more detailed, which can expose him as the Imposter.",
					},
					{
						title: 'Scenario: The Word is "Guitar"',
						agentWord: "Guitar",
						imposterWord: "None",
						clues: [
							{ player: "Dave (Agent)", clue: "It's a musical instrument with strings." },
							{ player: "Eve (Imposter)", clue: "You can play music with it." },
							{ player: "Frank (Agent)", clue: "Many rock bands have at least one of these." },
						],
						explanation: "Eve's clue, much like Dan's in the previous example, is overly broad. It could apply to a piano, violin, or drums. The other agents can use this vagueness to identify her as the one who doesn't know the specific word.",
					},
                    {
						title: 'Scenario: The Word is "Sun"',
						agentWord: "Sun",
						imposterWord: "None",
						clues: [
							{ player: "Grace (Agent)", clue: "It's very bright." },
							{ player: "Heidi (Imposter)", clue: "It's important for life on Earth." },
							{ player: "Ivan (Agent)", clue: "You shouldn't look directly at it." },
						],
						explanation: "Heidi’s clue, while technically true, is extremely broad and philosophical. It avoids any physical description (like 'hot', 'a star', 'in the sky') that an agent would likely use, making her suspicious.",
					},
                    {
						title: 'Scenario: The Word is "Bicycle"',
						agentWord: "Bicycle",
						imposterWord: "None",
						clues: [
							{ player: "Judy (Agent)", clue: "It has two wheels." },
							{ player: "Ken (Imposter)", clue: "It's a form of transportation." },
							{ player: "Liam (Agent)", clue: "You need to pedal to make it go." },
						],
						explanation: "Ken's clue is a classic imposter move. It's so generic it could apply to a car, bus, or motorcycle. He avoids specific details like 'pedals,' 'handlebars,' or 'chain,' which reveals he doesn't know the word.",
					},
                    {
						title: 'Scenario: The Word is "Password"',
						agentWord: "Password",
						imposterWord: "None",
						clues: [
							{ player: "Mallory (Agent)", clue: "I use one to log into my email." },
							{ player: "Ned (Imposter)", clue: "It's supposed to be a secret." },
							{ player: "Olivia (Agent)", clue: "It should be complex to be secure." },
						],
						explanation: "Ned’s clue is too vague. While a password is a secret, many things are. He misses the core context of digital security and authentication, which Mallory and Olivia both allude to.",
					},
				],
				fakeWord: [
					{
						title: 'Scenario: The Word is "Apple"',
						agentWord: "Apple",
						fakeWordPlayer: "Ben",
						fakeWord: "Banana",
						clues: [
							{ player: "Cloe (Agent)", clue: "This can be red or green." },
							{ player: "Ben (Fake Word Player)", clue: "It's long and you have to peel it." },
							{ player: "Michael (Agent)", clue: "A famous tech company is named after it." },
						],
						explanation: "Ben's confidence is his downfall. Unlike an Imposter who might say 'It's a fruit,' Ben gives specific details for the wrong word. This is the key to identifying the Fake Word holder.",
					},
					{
						title: 'Scenario: The Word is "Paris"',
						agentWord: "Paris",
						fakeWordPlayer: "Grace",
						fakeWord: "Rome",
						clues: [
							{ player: "Heidi (Agent)", clue: "This city has a famous tower." },
							{ player: "Grace (Fake Word Player)", clue: "You can see the Colosseum here." },
							{ player: "Ivan (Agent)", clue: "It's known as the 'City of Love'." },
						],
						explanation: "Grace, believing the word is Rome, gives a very specific and correct clue for her word. However, it directly contradicts the clues for Paris, immediately outing her as the player with the different word.",
					},
                    {
						title: 'Scenario: The Word is "Car"',
						agentWord: "Car",
						fakeWordPlayer: "Pat",
						fakeWord: "Motorcycle",
						clues: [
							{ player: "Quinn (Agent)", clue: "It's a common form of family transport." },
							{ player: "Pat (Fake Word Player)", clue: "You should wear a helmet when using it." },
							{ player: "Rachel (Agent)", clue: "It typically has four doors." },
						],
						explanation: "Pat's clue about a helmet is very specific to a motorcycle and clashes directly with Quinn's and Rachel's clues about a family vehicle with four doors. This contradiction exposes Pat.",
					},
                    {
						title: 'Scenario: The Word is "Mountain"',
						agentWord: "Mountain",
						fakeWordPlayer: "Sam",
						fakeWord: "Beach",
						clues: [
							{ player: "Tina (Agent)", clue: "It can be covered in snow at its peak." },
							{ player: "Sam (Fake Word Player)", clue: "You can find seashells here." },
							{ player: "Umar (Agent)", clue: "People enjoy hiking to its summit." },
						],
						explanation: "Sam's clue is confidently incorrect in the context of the other clues. Finding seashells on a snowy mountain is impossible, making it clear that Sam has a different word related to a different type of place.",
					},
                    {
						title: 'Scenario: The Word is "Library"',
						agentWord: "Library",
						fakeWordPlayer: "Vince",
						fakeWord: "Bookstore",
						clues: [
							{ player: "Wendy (Agent)", clue: "You can borrow things here for free." },
							{ player: "Vince (Fake Word Player)", clue: "You can buy the latest bestsellers here." },
							{ player: "Xena (Agent)", clue: "You need to be quiet and respectful inside." },
						],
						explanation: "Vince's clue about buying books directly contradicts Wendy's clue about borrowing for free. This highlights the key difference between a library and a bookstore, outing Vince as the player with the fake word.",
					},
				],
			};

			const [currentImposterScenario, setCurrentImposterScenario] = React.useState(0);
			const [currentFakeWordScenario, setCurrentFakeWordScenario] = React.useState(0);
            const [imposterAnimDir, setImposterAnimDir] = React.useState('next');
			const [fakeWordAnimDir, setFakeWordAnimDir] = React.useState('next');

			const nextImposterScenario = () => {
                setCurrentImposterScenario((prev) => Math.min(prev + 1, scenarios.imposter.length - 1));
			};

			const prevImposterScenario = () => {
                setCurrentImposterScenario((prev) => Math.max(prev - 1, 0));
			};

			const nextFakeWordScenario = () => {
                setCurrentFakeWordScenario((prev) => Math.min(prev + 1, scenarios.fakeWord.length - 1));
			};

			const prevFakeWordScenario = () => {
                setCurrentFakeWordScenario((prev) => Math.max(prev - 1, 0));
			};
			
			const useSwipe = (onSwipeLeft, onSwipeRight) => {
				const [touchStartCoords, setTouchStartCoords] = React.useState(null);

				const handleTouchStart = (e) => {
					setTouchStartCoords({
						x: e.targetTouches[0].clientX,
						y: e.targetTouches[0].clientY,
					});
				};

				const handleTouchMove = (e) => {
					if (!touchStartCoords) return;

					const currentX = e.targetTouches[0].clientX;
					const currentY = e.targetTouches[0].clientY;
					const diffX = touchStartCoords.x - currentX;
					const diffY = touchStartCoords.y - currentY;
					
					// Only consider it a swipe if horizontal movement is greater than vertical
					if (Math.abs(diffX) > Math.abs(diffY)) {
						// Now check if the swipe is significant enough
						if (diffX > 20) { // Swiped left
							onSwipeLeft();
							setTouchStartCoords(null); // Reset to prevent multiple triggers
						} else if (diffX < -20) { // Swiped right
							onSwipeRight();
							setTouchStartCoords(null); // Reset to prevent multiple triggers
						}
					}
					// If diffY is greater, do nothing, allowing the default scroll behavior
				};
				
				const handleTouchEnd = () => {
					setTouchStartCoords(null); // Reset on touch end
				};

				return { onTouchStart: handleTouchStart, onTouchMove: handleTouchMove, onTouchEnd: handleTouchEnd };
			};
			
			const imposterSwipeHandlers = useSwipe(nextImposterScenario, prevImposterScenario);
			const fakeWordSwipeHandlers = useSwipe(nextFakeWordScenario, prevFakeWordScenario);


			return (
				<div className="fixed inset-0 z-50 flex items-center justify-center p-4 animate-fadeIn">
					<div className="absolute inset-0 bg-black/70 backdrop-blur-md" onClick={onClose}></div>
					<div className="relative w-full max-w-lg h-[90vh] glass-panel rounded-3xl border border-white/10 shadow-2xl animate-slide-up flex flex-col">
						<div className="flex-shrink-0 p-6 flex items-center justify-between border-b border-white/10">
							<h2 className="text-2xl font-display font-bold text-white flex items-center gap-3">
								<i className="fa-solid fa-book-open text-brand-400"></i>
								How to Play
							</h2>
							<button onClick={onClose} className="w-10 h-10 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10 active:scale-90 transition">
								<i className="fa-solid fa-xmark"></i>
							</button>
						</div>
						
						<div className="flex-1 overflow-y-auto no-scrollbar p-6 space-y-8 text-white/80 leading-relaxed">
							{/* Section 1: Objective */}
							<section>
								<h3 className="font-bold text-lg text-brand-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/337/direct-hit_1f3af.png" alt="Objective Icon" className="w-8 h-8" />
									Primary Objective
								</h3>
								<p>A battle of wits and deception. In the classic game, the <span className="text-teal-400 font-semibold">Agents</span> must identify the <span className="text-red-400 font-semibold">Imposter</span>. In the alternate "Fake Word" mode, they must find the player who was given a different secret word.</p>
							</section>

							{/* Section 2: Setup */}
							<section>
								<h3 className="font-bold text-lg text-brand-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/363/detective_light-skin-tone_1f575-1f3fb_1f3fb.png" alt="Setup Icon" className="w-8 h-8" style={{ position: 'relative', top: '-2px' }} />
									The Setup: Mission Secrecy
								</h3>
								<p>At the start of each round, every player receives a secret role. <span className="text-teal-400 font-semibold">Agents</span> get the same secret word. The role of the outsider depends on the game mode:</p>
								<div className="mt-3 space-y-2 text-sm pl-4">
									<p>• <strong>Classic Mode:</strong> The <span className="text-red-400 font-semibold">Imposter</span> gets no word and must deduce it from clues.</p>
									<p>• <strong>Fake Word Mode:</strong> One Agent receives a <span className="text-yellow-400 font-semibold">different word</span> from the same category. They don't know their word is the fake one!</p>
								</div>
								<div className="mt-3 bg-white/5 p-3 rounded-lg border border-white/10 text-sm">
									<p><i className="fa-solid fa-lightbulb text-yellow-400 mr-2"></i><strong>Pro-Tip:</strong> Press and hold a category during setup to see example words. This is crucial for getting a feel for the possibilities before the round begins!</p>
								</div>
							</section>
							
							{/* Section 3: Gameplay */}
							<section>
								<h3 className="font-bold text-lg text-brand-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/364/speaking-head_1f5e3-fe0f.png" alt="Gameplay Icon" className="w-8 h-8" />
									Gameplay: The Art of Deception
								</h3>
								<p>Players take turns talking about the secret word without actually saying it. The goal is to prove you know the word while trying to spot who doesn't. Common ways to play include:</p>
								<div className="mt-3 space-y-2">
									<p>• <strong>State a Fact:</strong> Each player, in turn, says one known fact or description about the word.</p>
									<p>• <strong>Ask a Question:</strong> Players take turns asking the *next* player in the turn order a question related to the word.</p>
								</div>
							</section>

							{/* Section: Imposter Mode Scenarios */}
							<section>
								<h3 className="font-bold text-lg text-red-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/363/eyes_1f440.png" alt="Imposter Icon" className="w-7 h-7 -mt-1" />
									Deception Deep Dive: Imposter Mode
								</h3>
								<div>
                                <div className="flex items-center justify-center gap-2">
										<button onClick={prevImposterScenario} disabled={currentImposterScenario === 0} className="hidden md:flex flex-shrink-0 w-8 h-8 items-center justify-center bg-white/10 rounded-full text-white/50 hover:bg-white/20 active:scale-90 transition disabled:opacity-30 disabled:cursor-not-allowed">
											<i className="fa-solid fa-chevron-left"></i>
										</button>
										<div className="flex-1 bg-white/5 rounded-xl border border-white/10 relative overflow-hidden h-[260px]" {...imposterSwipeHandlers}>
											<div className="flex h-full transition-transform duration-500 ease-in-out" style={{ transform: `translateX(-${currentImposterScenario * 100}%)` }}>
												{scenarios.imposter.map((scenario, index) => (
													<div key={index} className="w-full h-full flex-shrink-0 p-4 overflow-y-auto no-scrollbar">
														<h4 className="font-bold text-base text-white/90 mb-2">{scenario.title}</h4>
														<div className="text-sm space-y-2 pl-2">
															<p>• <strong>Agents' Word:</strong> <span className="text-teal-300">{scenario.agentWord}</span> | <strong>Imposter's Word:</strong> <span className="text-red-300">{scenario.imposterWord}</span></p>
															<hr className="border-white/10 my-2" />
															{scenario.clues.map((clue, clueIndex) => (
																<p key={clueIndex}>• <strong>{clue.player}:</strong> "{clue.clue}"</p>
															))}
														</div>
														<p className="mt-3 text-xs text-white/60">
															{scenario.explanation}
														</p>
													</div>
												))}
											</div>
										</div>
										<button onClick={nextImposterScenario} disabled={currentImposterScenario === scenarios.imposter.length - 1} className="hidden md:flex flex-shrink-0 w-8 h-8 items-center justify-center bg-white/10 rounded-full text-white/50 hover:bg-white/20 active:scale-90 transition disabled:opacity-30 disabled:cursor-not-allowed">
											<i className="fa-solid fa-chevron-right"></i>
										</button>
									</div>
									<div className="flex justify-center items-center gap-2 mt-3">
										{scenarios.imposter.map((_, index) => (
											<button
												key={index}
												onClick={() => setCurrentImposterScenario(index)}
												className={`h-2 rounded-full transition-all duration-300 ${index === currentImposterScenario ? 'w-4 bg-white' : 'w-2 bg-white/40 hover:bg-white/60'}`}
												aria-label={`Go to imposter scenario ${index + 1}`}
											/>
										))}
									</div>
								</div>
							</section>

							{/* Section: Fake Word Mode Scenarios */}
							<section>
								<h3 className="font-bold text-lg text-yellow-400 mb-2 flex items-center gap-2">
									<img src="https://images.emojiterra.com/microsoft/fluent-emoji/15.1/3d/1f3ad_3d.png" alt="Fake Word Icon" className="w-7 h-7" />
									Deception Deep Dive: Fake Word Mode
								</h3>
								<div>
								<div className="flex items-center justify-center gap-2">
										<button onClick={prevFakeWordScenario} disabled={currentFakeWordScenario === 0} className="hidden md:flex flex-shrink-0 w-8 h-8 items-center justify-center bg-white/10 rounded-full text-white/50 hover:bg-white/20 active:scale-90 transition disabled:opacity-30 disabled:cursor-not-allowed">
											<i className="fa-solid fa-chevron-left"></i>
										</button>
										<div className="flex-1 bg-white/5 rounded-xl border border-white/10 relative overflow-hidden h-[260px]" {...fakeWordSwipeHandlers}>
											<div className="flex h-full transition-transform duration-500 ease-in-out" style={{ transform: `translateX(-${currentFakeWordScenario * 100}%)` }}>
												{scenarios.fakeWord.map((scenario, index) => (
													<div key={index} className="w-full h-full flex-shrink-0 p-4 overflow-y-auto no-scrollbar">
														<h4 className="font-bold text-base text-white/90 mb-2">{scenario.title}</h4>
														<div className="text-sm space-y-2 pl-2">
															<p>• <strong>Agents' Word:</strong> <span className="text-teal-300">{scenario.agentWord}</span> | <strong>{scenario.fakeWordPlayer}'s Word:</strong> <span className="text-yellow-300">{scenario.fakeWord}</span></p>
															<hr className="border-white/10 my-2" />
															{scenario.clues.map((clue, clueIndex) => (
																<p key={clueIndex}>• <strong>{clue.player}:</strong> "{clue.clue}"</p>
															))}
														</div>
														<p className="mt-3 text-xs text-white/60">
															{scenario.explanation}
														</p>
													</div>
												))}
											</div>
										</div>
										<button onClick={nextFakeWordScenario} disabled={currentFakeWordScenario === scenarios.fakeWord.length - 1} className="hidden md:flex flex-shrink-0 w-8 h-8 items-center justify-center bg-white/10 rounded-full text-white/50 hover:bg-white/20 active:scale-90 transition disabled:opacity-30 disabled:cursor-not-allowed">
											<i className="fa-solid fa-chevron-right"></i>
										</button>
									</div>
									<div className="flex justify-center items-center gap-2 mt-3">
										{scenarios.fakeWord.map((_, index) => (
											<button
												key={index}
												onClick={() => setCurrentFakeWordScenario(index)}
												className={`h-2 rounded-full transition-all duration-300 ${index === currentFakeWordScenario ? 'w-4 bg-white' : 'w-2 bg-white/40 hover:bg-white/60'}`}
												aria-label={`Go to fake word scenario ${index + 1}`}
											/>
										))}
									</div>
								</div>
							</section>

							{/* Section: Word Confusion */}
							<section>
								<h3 className="font-bold text-lg text-yellow-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/337/face-with-monocle_1f9d0.png" alt="Confusion Icon" className="w-7 h-7" />
									What if I Don't Know the Word?
								</h3>
								<p>It happens! If you're an Agent and receive a secret word you don't recognize, you'll see a special button during the card reveal (online mode only).</p>
								<div className="mt-3 bg-white/5 p-3 rounded-lg border border-white/10 text-sm space-y-2">
									<p><strong>1. Declare Confusion:</strong> Press the "I don't recognize this word" button.</p>
									<p><strong>2. Agents Vote:</strong> This triggers a secret poll for all other Agents, asking if they know the word.</p>
									<p><strong>3. The Outcome:</strong> If a <span className="font-semibold text-white/90">majority</span> of Agents also vote that they don't know the word, the round is immediately re-dealt with a new word and Imposter. If not, the mission continues as planned!</p>
								</div>
								<p className="mt-3 text-xs text-white/50"><i className="fa-solid fa-lightbulb mr-1"></i>This feature ensures the game is always fair, even with a massive word bank.</p>
							</section>
							
							{/* Section 5: Agent Strategy */}
							<section>
								<h3 className="font-bold text-lg text-teal-400 mb-2 flex items-center gap-2">
									 <img src="https://em-content.zobj.net/source/microsoft-teams/337/busts-in-silhouette_1f465.png" alt="Agent Strategy Icon" className="w-8 h-8" style={{ position: 'relative', top: '-2px' }} />
									Strategies for Agents
								</h3>
								<div className="space-y-3">
									<p>• <strong className="text-white/90">Be Specific, Not Obvious:</strong> A clue like "Jaws" for "Shark" might be too revealing. A better clue is "fin" or "predator".</p>
									<p>• <strong className="text-white/90">Watch for Hesitation (Classic Mode):</strong> The Imposter might need extra time to process clues and invent a plausible answer.</p>
									<p>• <strong className="text-white/90">Analyze Confidently Wrong Clues (Fake Word Mode):</strong> If a clue is very specific but doesn't match your word, you may have found your target.</p>
									<p>• <strong className="text-white/90">Cross-Reference:</strong> Do all the clues fit together? If one feels out of place, you might have found your spy.</p>
								</div>
							</section>

							{/* Section 6: Imposter Strategy */}
							 <section>
								<h3 className="font-bold text-lg text-red-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/337/ninja_medium-light-skin-tone_1f977-1f3fc_1f3fc.png" alt="Imposter Strategy Icon" className="w-8 h-8" style={{ position: 'relative', top: '-2px' }} />
									Strategies for the Imposter / Fake Word Player
								</h3>
								<div className="space-y-3">
									<p>• <strong className="text-white/90">Listen and Adapt (Classic Imposter):</strong> Your greatest weapon is information. Use the first few clues to build a theory, then blend in.</p>
									<p>• <strong className="text-white/90">Stay Vague Early (Classic Imposter):</strong> Start with general clues. As you get more confident, you can become more specific to build trust.</p>
									<p>• <strong className="text-white/90">Detect the Dissonance (Fake Word Player):</strong> If everyone's clues seem to point to a different word, you might be the one with the fake word. If you suspect this, pivot to more general clues that could fit both your word and what you think the real word is.</p>
									<p>• <strong className="text-white/90">Confidence is Key:</strong> In either role, act like you belong. Avoid nervous tells. Project certainty.</p>
								</div>
							</section>

							{/* Section 7: Voting */}
							<section>
								<h3 className="font-bold text-lg text-brand-400 mb-2 flex items-center gap-2">
									<img src="https://em-content.zobj.net/source/microsoft-teams/337/hammer-and-pick_2692-fe0f.png" alt="Voting Icon" className="w-7 h-7" />
									The Final Showdown
								</h3>
								<p>After discussion, everyone votes.
								<br/> • If the Imposter or Fake Word player is correctly identified, the <span className="text-teal-400 font-semibold">Agents win</span>.
								<br/> • If an innocent Agent is voted out, or if there's a tie, the <span className="text-red-400 font-semibold">Imposter / Fake Word player wins!</span></p>
							</section>
						</div>
					</div>
				</div>
			);
		};

        // NEW: Game Mode Selection Screen (Restyled)
        const GameModeSelectionScreen = ({ onSelectMode, onShowHowToPlay, audioManager, onMuteToggle, isMuted }) => {
            return (
                <div className="h-[100dvh] flex flex-col items-center justify-center p-6 bg-slate-950 text-center relative overflow-hidden animate-fadeIn">
                    <div className="absolute inset-0 pointer-events-none">
                        <div className="blob bg-brand-600/30 top-[-20%] left-[-20%] w-[60%] h-[60%]"></div>
                        <div className="blob bg-cyan-600/30 bottom-[-20%] right-[-20%] w-[60%] h-[60%] animation-delay-2000"></div>
                    </div>

                    <div className="absolute top-6 right-6 z-20">
                         <button onClick={onMuteToggle} className="w-12 h-12 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10 active:scale-90 transition-transform">
                            <i className={`fa-solid ${isMuted ? 'fa-volume-xmark' : 'fa-volume-high'}`}></i>
                        </button>
                    </div>
                    
                    <div className="relative z-10 flex flex-col items-center w-full max-w-lg mx-auto">
                         <div className="mb-10 text-center">
                            <SeasonalTitle season={currentSeason} className="text-6xl font-display font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-white to-white/50 mb-2 drop-shadow-lg tracking-tight" />
                            <div className="subtle-shine-container inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-md">
                                <span className="text-white/60 text-[10px] font-bold tracking-[0.3em] uppercase">Trust No One • {roundedWordCount.toLocaleString()}+ Words</span>
                            </div>
                        </div>

                        <div className="w-full flex flex-col gap-4 mt-8">
                            <button
                                onClick={() => { onSelectMode('online'); audioManager.playSound('uiClick'); }}
                                className="w-full bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] active:scale-[0.98] transition-all flex items-center justify-center gap-3 relative overflow-hidden group"
                            >
                                <i className="fa-solid fa-globe text-brand-500"></i> PLAY ONLINE
                            </button>
                             <button
                                onClick={() => { onSelectMode('local'); audioManager.playSound('uiClick'); }}
                                className="w-full glass-panel-lighter border-white/10 text-white/70 font-display font-bold text-lg py-5 rounded-[1.5rem] transition-all active:scale-98 flex items-center justify-center gap-3 hover:bg-white/5 hover:text-white"
                            >
                                <i className="fa-solid fa-mobile-screen-button"></i> PLAY ON THIS DEVICE
                            </button>
                        </div>

                        <button
                            onClick={() => { onShowHowToPlay(); audioManager.playSound('uiClick'); }}
                            className="mt-8 text-white/40 font-bold hover:text-white transition-colors flex items-center gap-2"
                        >
                            <i className="fa-solid fa-question-circle"></i> How to Play
                        </button>
                    </div>
                    <div className="absolute bottom-6 left-0 right-0 text-center text-xs text-white/30 z-20">
                        Platform made by <a href="https://fillabrona.github.io" target="_blank" rel="noopener noreferrer" className="font-bold text-white/50 hover:text-white/80 transition">Jandré du Preez</a>
                    </div>
                </div>
            );
        };
        
        // NEW: Online Lobby Screen (Restyled)
        const OnlineLobbyScreen = ({ user, onJoin, onCreate, audioManager, onBack, initialParams }) => {
            const [isJoining, setIsJoining] = useState(true);
            const [lobbyId, setLobbyId] = useState('');
            const [password, setPassword] = useState('');
            
            // FIX: Load username immediately from storage so avatar is there instantly
            const [username, setUsername] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_username');
                    return saved ? JSON.parse(saved) : '';
                } catch { return ''; }
            });
            
            const [error, setError] = useState('');
            const [isLoading, setIsLoading] = useState(false);

            useEffect(() => {
                try {
                    // Prioritize initialParams from props (passed from App component)
                    if (initialParams && initialParams.lobbyId) {
                        setLobbyId(initialParams.lobbyId.toUpperCase());
                        if (initialParams.password) {
                            setPassword(initialParams.password.toUpperCase());
                        }
                        setIsJoining(true); // Force joining mode if params are passed
                    }
                } catch {}
            }, [initialParams]);

            useEffect(() => { localStorage.setItem('imposter_username', JSON.stringify(username)); }, [username]);

            const handleAction = async () => {
                if (!username.trim()) { setError('Please enter a username.'); return; }
                setIsLoading(true);
                setError('');
                audioManager.playSound('uiClick');
                try {
                    if (isJoining) {
                        if (!lobbyId.trim() || !password.trim()) {
                            setError('Lobby ID and Password are required.');
                            setIsLoading(false);
                            return;
                        }
                        await onJoin(lobbyId.toUpperCase(), password.toUpperCase(), username.trim());
                    } else {
                        await onCreate(username.trim());
                    }
                } catch (e) {
                    setError(e.message);
                    setIsLoading(false);
                }
            };
            
            return (
                 <div className="flex flex-col h-[100dvh] relative z-10">
                    <div className="absolute top-6 left-6 z-20">
                         <button onClick={onBack} className="w-12 h-12 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10 active:scale-90 transition-transform">
                            <i className="fa-solid fa-chevron-left"></i>
                        </button>
                    </div>
                    <div className="flex-1 overflow-y-auto no-scrollbar pb-32">
                        <div className="max-w-lg mx-auto p-6 pt-28">
                             <div class="mb-10 text-center">
								<h1 class="text-5xl font-display font-black text-white mb-2 drop-shadow-lg tracking-tight">
                                    {isJoining ? 'Join Mission' : 'Create Mission'}
                                </h1>
                                <p class="text-white/40 font-semibold tracking-wide">
                                    {isJoining ? "Enter an existing lobby's credentials." : "Set up a new private game for your friends."}
                                </p>
							</div>

                            <section className="glass-panel rounded-[2rem] p-6 flex flex-col gap-4">
                                <div className="flex items-center gap-3 bg-slate-950/50 rounded-xl border border-white/5 focus-within:border-brand-500/50 focus-within:bg-slate-950/80 transition-all pr-4">
                                    <input
                                        type="text"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        placeholder="Enter codename..."
                                        className="flex-1 bg-transparent px-5 py-4 outline-none placeholder:text-white/20 font-medium text-sm text-white min-w-0"
                                    />
                                    {username.trim() && <PlayerAvatar name={username} className="w-8 h-8 rounded-full" />}
                                </div>
                                {isJoining && (
                                    <>
                                        <input
                                            type="text"
                                            value={lobbyId}
                                            onChange={(e) => setLobbyId(e.target.value.toUpperCase())}
                                            placeholder="Lobby ID"
                                            maxLength="6"
                                            className="w-full bg-slate-950/50 rounded-xl px-5 py-4 outline-none border border-white/5 focus:border-brand-500/50 focus:bg-slate-950/80 transition-all placeholder:text-white/20 font-mono text-lg tracking-widest text-white"
                                        />
                                        <input
                                            type="text"
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value.toUpperCase())}
                                            placeholder="Password"
                                            maxLength="4"
                                            className="w-full bg-slate-950/50 rounded-xl px-5 py-4 outline-none border border-white/5 focus:border-brand-500/50 focus:bg-slate-950/80 transition-all placeholder:text-white/20 font-mono text-lg tracking-widest text-white"
                                        />
                                    </>
                                )}
                                
                                {error && <p className="text-red-400 text-xs text-center -my-2">{error}</p>}
                                
                                <button onClick={() => { setIsJoining(!isJoining); setError(''); }} className="text-brand-400/70 hover:text-brand-400 text-xs font-bold transition text-center">
                                    {isJoining ? 'Or, create a new lobby' : 'Or, join an existing lobby'}
                                </button>
                            </section>
                        </div>
                    </div>
                     <div className="fixed bottom-0 left-0 w-full p-6 bg-gradient-to-t from-[#020617] via-[#020617] to-transparent z-50">
                        <div className="max-w-lg mx-auto pb-[env(safe-area-inset-bottom)]">
                             <button
                                onClick={handleAction}
                                disabled={isLoading}
                                className="w-full h-[68px] flex items-center justify-center bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:shadow-none active:scale-[0.98] transition-all"
                            >
                               {isLoading ? <i className="fa-solid fa-spinner animate-spin"></i> : (isJoining ? 'JOIN LOBBY' : 'CREATE LOBBY')}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // NEW: Modal for Confusion Poll
        const ConfusionPollModal = ({ onVote }) => {
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/70 backdrop-blur-md"></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-8 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-6 bg-yellow-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-circle-question text-4xl text-yellow-400"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Word Check</h2>
                        <p className="text-white/60 mb-8">An agent doesn't recognize the secret word. Do you know what it is?</p>
                        <div className="flex flex-col gap-3">
                            <button
                                onClick={() => onVote('knows')}
                                className="w-full bg-green-500/80 hover:bg-green-500 text-white font-display font-bold py-4 rounded-xl active:scale-95 transition-all"
                            >
                                Yes, I know the word
                            </button>
                            <button
                                onClick={() => onVote('confused')}
                                className="w-full bg-red-500/80 hover:bg-red-500 text-white font-display font-bold py-4 rounded-xl active:scale-95 transition-all"
                            >
                                No, me neither
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // NEW: Imposter Notification Modal
        const ImposterVoteNotificationModal = ({ onClose }) => {
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/70 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-8 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-6 bg-red-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-triangle-exclamation text-4xl text-red-400 animate-pulse"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Agent Confusion Detected</h2>
                        <p className="text-white/60 mb-8">An agent has reported they do not recognize the secret word. A secret poll is now active. Maintain your cover.</p>
                        <button
                            onClick={onClose}
                            className="w-full bg-white/10 hover:bg-white/20 text-white font-display font-bold py-4 rounded-xl active:scale-95 transition-all"
                        >
                            DISMISS
                        </button>
                    </div>
                </div>
            );
        };
        
        // NEW: Restart Notification Modal
        const RestartNotificationModal = ({ word, onClose }) => {
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/70 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-8 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-6 bg-sky-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-arrows-rotate text-4xl text-sky-400"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Mission Re-rolled</h2>
                        <p className="text-white/60 mb-6">
                            The round was restarted because a majority of agents did not recognize the secret word: <strong className="text-white/90 font-bold">{word}</strong>.
                        </p>
                        <p className="text-white/60 mb-8">A new word and imposter have been selected.</p>
                        <button
                            onClick={onClose}
                            className="w-full bg-white/10 hover:bg-white/20 text-white font-display font-bold py-4 rounded-xl active:scale-95 transition-all"
                        >
                            GOT IT
                        </button>
                    </div>
                </div>
            );
        };

        // NEW: QR Code Modal
		const QRCodeModal = ({ lobbyId, password, onClose, audioManager, season }) => {
			const inviteLink = `${window.location.origin}${window.location.pathname}?lobbyId=${lobbyId}&password=${password}`;
			const qrCodeUrl = `https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=${encodeURIComponent(inviteLink)}&qzone=1&margin=1&bgcolor=f8fafc&color=020617`; // bg-slate-50, text-slate-950

			const getLogoUrl = () => {
				if (season === 'christmas') {
					return 'https://em-content.zobj.net/source/microsoft-teams/337/santa-claus_light-skin-tone_1f385-1f3fb_1f3fb.png';
				}
				if (season === 'halloween') {
					return 'https://em-content.zobj.net/source/microsoft-teams/337/jack-o-lantern_1f383.png';
				}
				return 'https://em-content.zobj.net/source/microsoft-teams/400/disguised-face_1f978.png';
			};
			const logoUrl = getLogoUrl();

			return (
				<div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
					<div className="absolute inset-0 bg-black/70 backdrop-blur-md" onClick={onClose}></div>
					<div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up transform transition-all">
						<button onClick={onClose} className="absolute top-4 right-4 w-10 h-10 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10 active:scale-90 transition">
							<i className="fa-solid fa-xmark"></i>
						</button>
						
						<div className="flex flex-col items-center text-center">
							<h2 className="text-2xl font-display font-bold text-white mb-2">Scan to Join</h2>
							<p className="text-white/50 mb-6">Scan with a phone to instantly join the lobby.</p>

							<div className="relative w-64 h-64 p-4 bg-slate-50 rounded-2xl shadow-lg border border-white/10">
								<img src={qrCodeUrl} alt="Lobby Invite QR Code" className="w-full h-full object-contain rounded-lg" />
								<div className="absolute inset-0 flex items-center justify-center pointer-events-none">
									<div className="w-12 h-12 rounded-full bg-slate-50 p-1.5 shadow-md">
										<img src={logoUrl} alt="Logo" className="w-full h-full" />
									</div>
								</div>
							</div>
							
							<div className="w-full mt-6 flex gap-4">
								<div className="flex-1 bg-white/5 p-3 rounded-lg border border-white/5">
									<div className="text-white/40 text-[10px] uppercase font-bold tracking-widest mb-1">Lobby ID</div>
									<div className="font-mono text-xl font-bold tracking-widest text-white">{lobbyId}</div>
								</div>
								<div className="flex-1 bg-white/5 p-3 rounded-lg border border-white/5">
									<div className="text-white/40 text-[10px] uppercase font-bold tracking-widest mb-1">Password</div>
									<div className="font-mono text-xl font-bold tracking-widest text-white">{password}</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			);
		};

        // NEW: Waiting Room Screen (Restyled & Feature-Rich)
        const WaitingRoom = ({ lobbyData, lobbyPlayers, user, lobbyId, onStartGame, onStartMission, onLeaveLobby, audioManager, onConfusionVote, season }) => {
            const isHost = user.uid === lobbyData.hostId;
            const MIN_PLAYERS = 3;
            const [showCopied, setShowCopied] = useState(false);
            const [inspectedCategory, setInspectedCategory] = useState(null);
            const categoryLongPressTimerRef = useRef(null);
            const [showQRCode, setShowQRCode] = useState(false);

            // Poll logic
            const pollIsActive = lobbyData.gameState === 'reveal' && lobbyPlayers.some(p => p.status === 'confused');
            
            // Logic for enabling the host's start button
            const allPlayersReady = lobbyData.gameState === 'reveal' && lobbyPlayers.length > 0 && lobbyPlayers.every(p => {
                const isImposter = lobbyData.imposterIds?.includes(p.id);
                // A player is ready if they have seen their card AND (the poll is not active OR (they are the imposter in classic mode) OR they have voted in the poll)
                // In fake word mode, the imposter doesn't exist, so everyone needs to vote.
                const needsToVote = lobbyData.isFakeWordMode ? true : !isImposter;
                return p.hasSeenCard && (!pollIsActive || !needsToVote || p.status);
            });

            // Confusion Poll Logic for the current user
            const me = lobbyPlayers.find(p => p.id === user.uid);
            const isMyRoleImposter = !lobbyData.isFakeWordMode && lobbyData.imposterIds?.includes(user.uid);
            
            // Show poll IF: poll is active, I am not the imposter in classic mode, and I have not voted yet.
            const showConfusionPoll = lobbyData.gameState === 'reveal' && pollIsActive && !isMyRoleImposter && !me?.status;

            const handleCategorySelect = (cat) => {
                if (isHost && lobbyData.category !== cat) {
                    db.collection('lobbies').doc(lobbyId).update({ 
                        category: cat,
                        lastSoundEvent: { name: 'selectCategory', timestamp: Date.now() }
                    });
                }
            };

            const handleModeChange = (newModeIsRandom) => {
                if (isHost && lobbyData.isRandomMode !== newModeIsRandom) {
                    db.collection('lobbies').doc(lobbyId).update({ 
                        isRandomMode: newModeIsRandom,
                        lastSoundEvent: { name: 'toggleMode', timestamp: Date.now() }
                    });
                }
            };
            
            const handleSettingChange = (settingName, currentValue) => {
                if (isHost) {
                    const newValue = !currentValue;
                    
                    // If turning on Fake Word Mode, turn off incompatible settings
                    if(settingName === 'isFakeWordMode' && newValue) {
                        db.collection('lobbies').doc(lobbyId).update({
                            isFakeWordMode: true,
                            notifyImposterOnVote: false, // Turn off notification
                            lastSoundEvent: { name: 'switchOn', timestamp: Date.now() }
                        });
                    } else {
                        db.collection('lobbies').doc(lobbyId).update({ 
                            [settingName]: newValue,
                            lastSoundEvent: { name: newValue ? 'switchOn' : 'switchOff', timestamp: Date.now() }
                        });
                    }
                }
            };


            const handleTwoImposterToggle = () => {
                if (isHost && lobbyPlayers.length >= 10) {
                    const newValue = !lobbyData.enableTwoImposters;
                    db.collection('lobbies').doc(lobbyId).update({ 
                        enableTwoImposters: newValue,
                        lastSoundEvent: { name: newValue ? 'switchOn' : 'switchOff', timestamp: Date.now() }
                    });
                }
            };

            useEffect(() => {
                if (isHost && lobbyPlayers.length < 10 && lobbyData.enableTwoImposters) {
                    db.collection('lobbies').doc(lobbyId).update({ enableTwoImposters: false });
                }
            }, [isHost, lobbyPlayers.length, lobbyData?.enableTwoImposters]);

            const handleCategoryTouchStart = (cat) => {
                categoryLongPressTimerRef.current = setTimeout(() => {
                    setInspectedCategory(cat);
                    audioManager.playSound('openInfo');
                    if (navigator.vibrate) navigator.vibrate(30);
                }, 600);
            };

            const handleCategoryTouchEnd = () => {
                if (categoryLongPressTimerRef.current) {
                    clearTimeout(categoryLongPressTimerRef.current);
                    categoryLongPressTimerRef.current = null;
                }
            };

            const handleCopyInvite = async () => {
                const inviteLink = `${window.location.origin}${window.location.pathname}?lobbyId=${lobbyId}&password=${lobbyData.password}`;
                audioManager.playSound('uiClick');

                // --- START: Holiday Share Text Logic ---
                let shareTitle = 'Imposter Game Invite';
                let shareText = `Join my Imposter game! Lobby ID: ${lobbyId}`;

                if (season === 'christmas') {
                    shareTitle = '🎁 Festive Imposter Invite';
                    shareText = `The North Pole has a traitor! 🎅🏻\n\nJoin my game and help us find the Grinch before he steals the presents.\n\n📍 Lobby ID: ${lobbyId}`;
                } else if (season === 'halloween') {
                    shareTitle = '🎃 Spooky Imposter Invite';
                    shareText = `Something is lurking in the shadows... 👻\n\nCan you find the ghost before it's too late?\n\n📍 Lobby ID: ${lobbyId}`;
                }
                // --- END: Holiday Share Text Logic ---

                // Define share data
                const shareData = {
                    title: shareTitle,
                    text: shareText,
                    url: inviteLink
                };

                // Check if browser supports sharing (Must be HTTPS)
                if (navigator.share) {
                    try {
                        await navigator.share(shareData);
                    } catch (err) {
                        console.log('Share failed or canceled:', err);
                        // Note: We do NOT fallback to clipboard here intentionally, 
                        // because if the user manually cancels the share menu, 
                        // we don't want to annoy them with a "Copied" popup.
                    }
                } else {
                    // Fallback for browsers/contexts that don't support sharing (like HTTP local testing)
                    navigator.clipboard.writeText(inviteLink).then(() => {
                        setShowCopied(true);
                        setTimeout(() => setShowCopied(false), 2000);
                    }).catch(err => console.error("Clipboard failed", err));
                }
            };

            const handleRemovePlayer = (playerId) => {
                if (isHost && user.uid !== playerId) {
                    db.collection('lobbies').doc(lobbyId).collection('players').doc(playerId).delete()
                        .catch(err => console.error("Failed to remove player:", err));
                }
            };

            return (
                 <div className="flex flex-col h-[100dvh] relative z-10">
                    <CategoryInfoModal category={inspectedCategory} onClose={() => setInspectedCategory(null)} />
                    {showQRCode && <QRCodeModal lobbyId={lobbyId} password={lobbyData.password} onClose={() => setShowQRCode(false)} audioManager={audioManager} />}
                    {showConfusionPoll && <ConfusionPollModal onVote={onConfusionVote} />}
                    
                    <div className="absolute top-6 left-6 z-20">
                        {lobbyData.gameState === 'waiting' && (
                            <button 
                                onClick={onLeaveLobby} 
                                className={`h-12 flex items-center justify-center rounded-full px-4 active:scale-90 transition-all text-sm font-bold ${
                                    isHost 
                                    ? 'bg-red-500/10 text-red-400/80 hover:bg-red-500/20 hover:text-red-400' 
                                    : 'bg-white/5 text-white/50 hover:bg-white/10 hover:text-white/80'
                                }`}
                            >
                                <i className="fa-solid fa-door-open mr-2"></i>
                                <span>{isHost ? 'Close Lobby' : 'Exit Lobby'}</span>
                            </button>
                        )}
                    </div>
                     
                    <div className="flex-1 overflow-y-auto no-scrollbar pb-32">
                        <div className="max-w-lg mx-auto p-6 pt-28">
                            <div class="mb-10 text-center">
                                <SeasonalTitle season={currentSeason} className="text-5xl font-display font-black text-white mb-2 drop-shadow-lg tracking-tight" />
                                <p class="text-white/40 font-semibold tracking-wide">Mission Lobby • Waiting for agents</p>
							</div>
                            
							<section className="mb-6 glass-panel rounded-[2rem] p-6">
								<div className="flex items-stretch text-center">
									<div className="w-1/2 pr-3">
										<div className="text-white/40 text-[10px] uppercase font-bold tracking-widest mb-1">Lobby ID</div>
										<div className="font-mono text-2xl font-bold tracking-widest">{lobbyId}</div>
									</div>
									<div className="w-px bg-white/10"></div>
									<div className="w-1/2 pl-3">
										<div className="text-white/40 text-[10px] uppercase font-bold tracking-widest mb-1">Password</div>
										<div className="font-mono text-2xl font-bold tracking-widest">{lobbyData.password}</div>
									</div>
								</div>
								<div className="flex items-center gap-4 mt-4">
									<button onClick={() => { setShowQRCode(true); audioManager.playSound('uiClick'); }} className="relative flex-1 h-14 bg-white/10 rounded-xl flex items-center justify-center sm:gap-3 text-brand-400 hover:bg-brand-500/20 active:scale-95 transition font-bold text-sm">
										<i className="fa-solid fa-qrcode text-xl"></i>
										<span className="hidden sm:inline">SCAN QR</span>
									</button>
									<button onClick={handleCopyInvite} className="relative flex-1 h-14 bg-white/10 rounded-xl flex items-center justify-center sm:gap-3 text-brand-400 hover:bg-brand-500/20 active:scale-95 transition font-bold text-sm">
										<i className={`fa-solid ${showCopied ? 'fa-check' : 'fa-share-nodes'} text-lg`}></i>
										<span className="hidden sm:inline">{showCopied ? 'COPIED!' : 'SHARE LINK'}</span>
									</button>
								</div>
							</section>

                            <section className="mb-6 glass-panel rounded-[2rem] p-6">
                                <h2 className="text-sm font-bold tracking-widest text-brand-400 mb-4 flex items-center gap-2 uppercase">
                                    <i className="fa-solid fa-users"></i> Agents
                                    <span className="ml-auto text-[10px] bg-white/5 px-2 py-1 rounded-md text-white/50">{lobbyPlayers.length}</span>
                                </h2>
                                <div className="flex flex-col gap-3">
                                    {lobbyPlayers.map(p => {
                                        const hasAcknowledgedCard = !!p.hasSeenCard;

                                        return (
                                            <div key={p.id} className={`flex items-center gap-3 px-4 py-3 rounded-xl transition-colors ${p.id === user.uid ? 'bg-white/10' : 'bg-white/5'}`}>
                                                <i className={`fa-solid ${p.id === lobbyData.hostId ? 'fa-crown text-yellow-400' : 'fa-user-secret text-white/40'}`}></i>
                                                <PlayerAvatar name={p.name} className="w-6 h-6 rounded-full"/>
                                                <span className="font-bold text-white/90 truncate">{p.name}</span>
                                                {(lobbyData.gameState === 'reveal' || lobbyData.gameState === 'turnOrder') && (
                                                    <span className="ml-auto text-xs font-bold flex items-center gap-2">
                                                        {hasAcknowledgedCard ? 
                                                            <i className="fa-solid fa-check-circle text-green-400 animate-fadeIn"></i> :
                                                            <i className="fa-solid fa-ellipsis text-white/30"></i>
                                                        }
                                                    </span>
                                                )}
                                                {isHost && p.id !== user.uid && lobbyData.gameState === 'waiting' && (
                                                    <button onClick={() => handleRemovePlayer(p.id)} className="ml-auto w-8 h-8 flex items-center justify-center rounded-full text-white/40 hover:bg-red-500/20 hover:text-red-400 transition-colors">
                                                        <i className="fa-solid fa-trash-can text-xs"></i>
                                                    </button>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            </section>
                            
                            {lobbyData.gameState === 'waiting' && (
                                <>
                                 <section className="mb-6 glass-panel rounded-[2rem] p-6 space-y-4">
                                    <div className="flex items-center justify-between">
                                        <div className="pr-4">
                                            <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                                <i className="fa-solid fa-masks-theater text-yellow-400/80 w-5 text-center"></i>
                                                <span>Fake Word Mode</span>
                                            </h3>
                                            <p className="text-white/40 text-xs mt-1 pl-8">One agent gets a different word. They don't know it's fake.</p>
                                        </div>
                                        <button 
                                            onClick={() => handleSettingChange('isFakeWordMode', lobbyData.isFakeWordMode)}
                                            disabled={!isHost}
                                            className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${lobbyData.isFakeWordMode ? 'bg-yellow-500/80' : 'bg-white/10'} ${!isHost && 'opacity-50 cursor-not-allowed'}`}
                                        >
                                            <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${lobbyData.isFakeWordMode ? 'translate-x-5' : 'translate-x-0'}`} />
                                        </button>
                                    </div>
                                    <div className="h-px bg-white/10"></div>
                                    <div 
                                        className={`flex items-center justify-between transition-opacity duration-300 ${(lobbyPlayers.length < 10 || lobbyData.isFakeWordMode) ? 'opacity-50' : ''}`}
                                        title={lobbyData.isFakeWordMode ? "Disabled in Fake Word Mode" : (lobbyPlayers.length < 10 ? "Requires 10 or more players" : "Add a second spy to the mission")}
                                    >
                                        <div className="pr-4">
                                            <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                                <i className="fa-solid fa-user-secret text-orange-400/80 w-5 text-center"></i>
                                                <span>{lobbyData.isFakeWordMode ? 'Second Fake Card' : 'Second Imposter'}</span>
                                            </h3>
                                            <p className="text-white/40 text-xs mt-1 pl-8">Adds a second rogue agent when 10 or more agents are in the lobby.</p>
                                        </div>
                                        <button 
                                            onClick={() => handleSettingChange('enableTwoImposters', lobbyData.enableTwoImposters)}
                                            disabled={!isHost || lobbyPlayers.length < 10 || lobbyData.isFakeWordMode}
                                            className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${lobbyData.enableTwoImposters ? 'bg-orange-500/80' : 'bg-white/10'} ${(!isHost || lobbyPlayers.length < 10 || lobbyData.isFakeWordMode) && 'cursor-not-allowed'}`}
                                        >
                                            <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${lobbyData.enableTwoImposters ? 'translate-x-5' : 'translate-x-0'}`} />
                                        </button>
                                    </div>
                                    <div className="h-px bg-white/10"></div>
                                     <div className={`flex items-center justify-between transition-opacity duration-300 ${lobbyData.isFakeWordMode ? 'opacity-50' : ''}`} title={lobbyData.isFakeWordMode ? "Disabled in Fake Word Mode" : ""}>
                                        <div className="pr-4">
                                            <h3 className="font-bold text-red-400/90 text-base flex items-center gap-3">
                                                <i className="fa-solid fa-bell text-red-400/80 w-5 text-center"></i>
                                                <span>Notify Imposter on Vote</span>
                                            </h3>
                                            <p className="text-white/40 text-xs mt-1 pl-8">Shows a pop-up to the Imposter if an agent initiates a word-check.</p>
                                        </div>
                                        <button 
                                            onClick={() => handleSettingChange('notifyImposterOnVote', lobbyData.notifyImposterOnVote)}
                                            disabled={!isHost || lobbyData.isFakeWordMode}
                                            className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${lobbyData.notifyImposterOnVote ? 'bg-red-500/80' : 'bg-white/10'} ${(!isHost || lobbyData.isFakeWordMode) && 'opacity-50 cursor-not-allowed'}`}
                                        >
                                            <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${lobbyData.notifyImposterOnVote ? 'translate-x-5' : 'translate-x-0'}`} />
                                        </button>
                                    </div>
                                    <div className="h-px bg-white/10"></div>
                                    <div className="flex items-center justify-between">
                                        <div className="pr-4">
                                            <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                                <i className="fa-solid fa-volume-high text-purple-400/80 w-5 text-center"></i>
                                                <span>Speak Category</span>
                                            </h3>
                                            <p className="text-white/40 text-xs mt-1 pl-8">Announces the chosen category name when the mission begins.</p>
                                        </div>
                                        <button 
                                            onClick={() => handleSettingChange('speakCategory', lobbyData.speakCategory)}
                                            disabled={!isHost}
                                            className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${lobbyData.speakCategory ? 'bg-purple-500/80' : 'bg-white/10'} ${!isHost && 'opacity-50 cursor-not-allowed'}`}
                                        >
                                            <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${lobbyData.speakCategory ? 'translate-x-5' : 'translate-x-0'}`} />
                                        </button>
                                    </div>
                                 </section>
                                <section>
                                    <div className="flex items-center justify-between mb-4 px-2">
                                        <h2 className="text-sm font-bold tracking-widest text-teal-400 flex items-center gap-2 uppercase">
                                            <i className="fa-solid fa-layer-group"></i> Mission
                                        </h2>
                                        <div className={`flex bg-slate-950/50 p-1 rounded-lg border border-white/5 ${!isHost && 'opacity-50 pointer-events-none'}`}>
                                            <button 
                                                onClick={() => handleModeChange(false)}
                                                className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${!lobbyData.isRandomMode ? 'bg-white/10 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                            >
                                                Select
                                            </button>
                                            <button 
                                                onClick={() => handleModeChange(true)}
                                                className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${lobbyData.isRandomMode ? 'bg-gradient-to-r from-brand-600 to-fuchsia-600 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                            >
                                                Random
                                            </button>
                                        </div>
                                    </div>
                                    {lobbyData.isRandomMode ? (
                                        <div className="glass-panel rounded-[2rem] p-8 text-center animate-fadeIn border border-brand-500/20 relative overflow-hidden group">
                                            <div className="absolute inset-0 bg-gradient-to-br from-brand-500/10 via-transparent to-fuchsia-500/10 opacity-50 group-hover:opacity-100 transition-opacity duration-700"></div>
                                            <div className="relative z-10 py-8">
                                                <div className="w-24 h-24 mx-auto bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-3xl rotate-12 flex items-center justify-center shadow-lg shadow-brand-900/40 mb-6 group-hover:rotate-[20deg] group-hover:scale-110 transition-transform duration-500">
                                                    <i className="fa-solid fa-dice text-4xl text-white drop-shadow-md"></i>
                                                </div>
                                                <h3 className="text-2xl font-display font-bold text-white mb-2">Mystery Mode</h3>
                                                <p className="text-white/50 text-sm max-w-[200px] mx-auto leading-relaxed">
                                                    The system will automatically select a random category for your mission.
                                                </p>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className={`grid grid-cols-2 sm:grid-cols-3 gap-3 ${!isHost && 'opacity-60'}`}>
											{DISPLAY_CATEGORIES.map(cat => {
												const iconSource = CATEGORY_ICONS[cat];
												const isSelected = lobbyData.category === cat;
												const isSupercell = cat === 'Supercell';
												const isChristmas = cat === 'Christmas';
												const isHalloween = cat === 'Halloween';
												const isSeasonal = isChristmas || isHalloween;
												
												let cardClasses = `relative overflow-hidden flex flex-col items-center justify-center gap-3 p-4 rounded-[1.5rem] border transition-all duration-300 active:scale-95 group min-h-[110px] `;
												let checkmarkBg = 'bg-teal-500 text-slate-900';

												if (isChristmas) {
													if (isSelected) {
														cardClasses += 'border-red-400 bg-red-900/20 ring-red-500 shadow-lg shadow-red-900/40 text-white';
														checkmarkBg = 'bg-red-500 text-white';
													} else {
														cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
													}
												} else if (isHalloween) {
													if (isSelected) {
														cardClasses += 'border-orange-400 bg-orange-900/20 ring-orange-500 shadow-lg shadow-orange-900/40 text-white';
														 checkmarkBg = 'bg-orange-500 text-white';
													} else {
														cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
													}
												} else if (isSupercell) {
													if (isSelected) {
														cardClasses += 'border-blue-400 bg-blue-900/20 ring-blue-500 shadow-lg shadow-blue-900/40 text-white';
														checkmarkBg = 'bg-blue-500 text-white';
													} else {
														cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
													}
												} else {
													if (isSelected) {
														cardClasses += 'glass-panel bg-teal-500/10 border-teal-500/40 text-teal-100 shadow-[0_0_20px_rgba(20,184,166,0.1)]';
													} else {
														cardClasses += 'glass-panel-lighter border-white/5 text-slate-400 hover:bg-white/5 hover:border-white/10';
													}
												}

												return (
													<button
														key={cat}
														onClick={() => handleCategorySelect(cat)}
														onMouseDown={() => handleCategoryTouchStart(cat)}
														onMouseUp={handleCategoryTouchEnd}
														onMouseLeave={handleCategoryTouchEnd}
														onTouchStart={() => handleCategoryTouchStart(cat)}
														onTouchEnd={handleCategoryTouchEnd}
														onTouchMove={handleCategoryTouchEnd}
														className={cardClasses}
													>
														{isSupercell && (
															<div className="supercell-container pointer-events-none">
																<div className="supercell-bg-1"></div>
																<div className="supercell-bg-2"></div>
															</div>
														)}
														{isSeasonal && (
															<div 
																className="absolute inset-0 bg-cover bg-center pointer-events-none"
																style={{
																	backgroundImage: isChristmas 
																		? `url("https://www.catholicnewsagency.com/images/three-kings.jpg?jpg")`
																		: `url("https://picjumbo.com/wp-content/uploads/dark-halloween-background-with-glowing-halloween-pumpkins-free-image.jpeg")`
																}}
															></div>
														)}

														<div className="relative z-10 flex flex-col items-center gap-2">
															<FaIcon 
																name={iconSource} 
																sizeClass="text-2xl" 
																className={`transition-all duration-300 ${isSupercell || isSeasonal ? "drop-shadow-md brightness-125" : (isSelected ? "text-teal-400 scale-110" : "text-white/40 group-hover:text-white/70")}`} 
															/>
															<span className={`text-xs font-bold tracking-wide transition-colors ${isSupercell || isSeasonal ? 'text-white drop-shadow-md' : ''}`}>{cat}</span>
														</div>

														{isSelected && (
															<div className={`absolute top-3 right-3 w-5 h-5 rounded-full flex items-center justify-center text-[10px] shadow-sm ${checkmarkBg}`}>
																<i className="fa-solid fa-check"></i>
															</div>
														)}
													</button>
												)
											})}
                                        </div>
                                    )}
                                </section>
                                </>
                            )}
                        </div>
                    </div>
                    
                    <div className="fixed bottom-0 left-0 w-full p-6 bg-gradient-to-t from-[#020617] via-[#020617] to-transparent z-50">
                        <div className="max-w-lg mx-auto pb-[env(safe-area-inset-bottom)]">
                        {isHost ? (
                            allPlayersReady && !pollIsActive ? (
                                <button
                                    onClick={onStartMission}
                                    className="w-full bg-green-500 text-white font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(34,197,94,0.2)] active:scale-95 transition-all flex items-center justify-center gap-3 animate-pulse"
                                >
                                    <i className="fa-solid fa-rocket text-lg"></i>
                                    ALL AGENTS READY - BEGIN!
                                </button>
                            ) : (
                                <button
                                    onClick={onStartGame}
                                    disabled={lobbyPlayers.length < MIN_PLAYERS || lobbyData.gameState !== 'waiting'}
                                    className="w-full bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:shadow-none active:scale-[0.98] transition-all flex items-center justify-center gap-3"
                                >
                                    <i className="fa-solid fa-play text-sm"></i> START MISSION ({lobbyPlayers.length}/{MIN_PLAYERS}+)
                                </button>
                            )
                        ) : (
                             <div className="text-center p-4 glass-panel rounded-xl">
                               <p className="text-white/60 font-medium">
                                 {allPlayersReady && !pollIsActive ? "All agents are ready! Waiting for host..." : "Waiting for host to start the mission..."}
                               </p>
                           </div>
                        )}
                        </div>
                    </div>
                </div>
            );
        };


		const TIPS = [
            "The Imposter doesn't know the secret word. Ask questions that might expose them!",
            "Pay attention to hesitation. The Imposter might need extra time to think of a lie.",
            "Try to ask a question only a true agent would know the answer to.",
            "Long-press on a category card during setup to see example words.",
            "The first player on the turn order list asks the first question.",
            "Innocent agents should try to prove they know the word without giving it away.",
            "Random Mode chooses a category from the entire word bank for an extra challenge.",
            "You can record your own 'It's your turn!' voice note by tapping the microphone icon when adding a player.",
            "Use the untimed mode for a more relaxed, deduction-focused game.",
            "The Imposter's goal is to survive the round without being identified.",
            "As an agent, be specific enough to prove you're innocent but vague enough not to reveal the word to the Imposter.",
            "Listen to how others answer. Is someone being overly generic or changing their story?",
            "If you are the Imposter, try to get others to talk first so you can copy their vibe.",
            "Don't be too obvious! If the word is 'Pizza', don't ask 'Do you like pepperoni?'",
            "In Online Mode, check the 'Voting Record' at the end to see who betrayed whom.",
            "The 'Speak Category' toggle allows the game to announce the category name aloud.",
            "Watch out for players who simply repeat the previous answer in different words.",
            "Silence is suspicious! Make sure you have an answer ready before it's your turn.",
            "If the group is confused, the Imposter often wins. Keep your questions clear.",
            "Eye contact can be deceiving. Some Imposters are great at looking you in the eye.",
            "Use the 'Verify Identity' button in local mode to ensure you are handing the phone to the right person.",
			"Did someone smile when they saw their card? That might be a clue.",
            "If you are the Imposter and figure out the word, try to blend in by adding a unique detail.",
			"Keep your card hidden! Reflections in glasses or windows can give you away.",
            "Got a word you don't recognize? As an Agent, you can press a button on the reveal screen to start a 'Word Check' poll.",
            "If a 'Word Check' poll appears, vote honestly. Rerolling a confusing word gives the Agents a better chance to win.",
            "If a round suddenly restarts before it begins, it means a majority of Agents were confused by the secret word and voted to re-deal.",
            "Imposter Tip: A long pause before the round starts? That's a secret 'Word Check' for Agents. Stay cool, they don't know you're excluded.",
			"Agent Tip: Don't recognize the word? Use the 'Word Check' button! It's better to admit confusion and help the team than to look like the Imposter.",
            "With 10 or more players, the host can enable a second Imposter, raising the stakes and the suspicion!",
            "When two Imposters are in play, they don't know each other's identity. Be careful not to accidentally vote for your fellow spy!",
            "If the 'Notify Imposter' setting is on, the spy gets a heads-up when an Agent starts a 'Word Check' poll. Use this intel to stay one step ahead!",
            "If the game seems to pause after cards are dealt in online mode, a secret 'Word Check' poll is likely in progress. Imposters, use this time to prepare your cover story!",
            "Pay attention to the voting record at the end of an online match. It can reveal alliances and voting patterns you missed during the discussion.",
            "In 'Fake Word' mode, one player has a different word from the same category. They think their word is the real one!",
            "Tip for Fake Word mode: If someone gives a clue that is confidently wrong, they might have the fake word. Don't dismiss them as just a bad player!",
            "The player with the Fake Word is included in 'Word Check' polls online. This makes it much harder to identify them by process of elimination.",
			"In Fake Card Mode, you think you’re an agent... but the imposter never knows. One wrong move could expose you, so play smart and question everything, even yourself.",
        ];

        // --- MODIFIED: LoadingScreen with real progress and stuttering effect ---
        const LoadingScreen = ({ onStart, onFinishedLoading }) => {
            const [currentTipIndex, setCurrentTipIndex] = useState(() => Math.floor(Math.random() * TIPS.length));
            const [isReady, setIsReady] = useState(false);

            // State for actual loading progress
            const [targetProgress, setTargetProgress] = useState(0);
            // State for what the user sees on the progress bar
            const [visualProgress, setVisualProgress] = useState(0);
            
            const stutterTimeoutRef = useRef(null);

            // Tip rotation effect
            useEffect(() => {
                const tipInterval = setInterval(() => {
                    setCurrentTipIndex(prev => {
                        let newIndex;
                        do { newIndex = Math.floor(Math.random() * TIPS.length); } while (newIndex === prev && TIPS.length > 1);
                        return newIndex;
                    });
                }, 5000);
                return () => clearInterval(tipInterval);
            }, []);

            // Effect to handle the asset loading and progress tracking
            useEffect(() => {
                let loadedCount = 0;
                let totalAssets = 0;

                const handleProgress = () => {
                    loadedCount++;
                    const newProgress = Math.round((loadedCount / totalAssets) * 100);
                    setTargetProgress(newProgress);
                };

                // This function now returns the total count and the promise
                const { assetPromise, count } = preloadAssets(handleProgress);
                totalAssets = count;

                assetPromise.then(() => {
                    setTargetProgress(100); // Ensure it hits 100%
                    // Wait a moment after loading is complete before showing the button
                    setTimeout(() => {
                        onFinishedLoading();
                        setIsReady(true);
                    }, 500);
                });
            }, [onFinishedLoading]);

            // Effect to create the "stuttering" progress bar animation
            useEffect(() => {
                if (visualProgress < targetProgress) {
                    if (stutterTimeoutRef.current) {
                        clearTimeout(stutterTimeoutRef.current);
                    }
                    // Set a new timeout with a random delay to update the visual progress
                    stutterTimeoutRef.current = setTimeout(() => {
                        setVisualProgress(targetProgress);
                    }, Math.random() * 250 + 50); // Random delay between 50ms and 300ms
                }
                 // Clean up the timeout if the component unmounts
                return () => clearTimeout(stutterTimeoutRef.current);
            }, [targetProgress]);


            return (
                <div className="h-[100dvh] flex flex-col items-center justify-center p-8 bg-slate-950 text-center relative overflow-hidden animate-fadeIn">
                    <div className="absolute inset-0 pointer-events-none">
                        <div className="blob bg-brand-600/50 top-[-20%] left-[-20%] w-[60%] h-[60%]"></div>
                        <div className="blob bg-cyan-600/50 bottom-[-20%] right-[-20%] w-[60%] h-[60%] animation-delay-2000"></div>
                    </div>
                    
                    <div className="relative z-10 flex flex-col items-center w-full max-w-sm">
                        <div className="w-28 h-28 mb-8 relative flex items-center justify-center">
                            <div className="absolute inset-0 bg-brand-500/20 rounded-full animate-pulse-slow blur-xl"></div>
                            <img src="https://em-content.zobj.net/source/microsoft-teams/400/disguised-face_1f978.png" alt="Loading Icon" draggable="false" className="w-24 h-24 animate-float" />
                        </div>
                        
                        <SeasonalTitle season={currentSeason} className="text-6xl font-display font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-white to-white/50 mb-4 drop-shadow-lg tracking-tight" />
                        <p className="text-white/50 font-semibold text-lg mb-12">Find the spy before time runs out.</p>

                        <div className="w-full h-24 flex flex-col items-center justify-center">
                            {isReady ? (
                                <button
                                    onClick={onStart}
                                    className="w-full max-w-xs bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] active:scale-[0.98] transition-all flex items-center justify-center gap-3 animate-slide-up"
                                >
                                    <i className="fa-solid fa-play text-sm"></i> START GAME
                                </button>
                            ) : (
                                <div className="w-full max-w-xs animate-fadeIn">
                                    <div className="w-full bg-slate-800/50 rounded-full h-2.5 mb-4 border border-white/5 overflow-hidden">
                                        <div className="bg-brand-500 h-full rounded-full transition-all duration-300 ease-out" style={{ width: `${visualProgress}%` }}></div>
                                    </div>
                                    <p key={currentTipIndex} className="text-white/60 font-medium text-sm animate-fadeIn h-10">
                                        <i className="fa-solid fa-lightbulb text-brand-400 mr-2"></i>
                                        {TIPS[currentTipIndex]}
                                    </p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const FaIcon = ({ name, sizeClass = "text-xl", className = "" }) => {
            const [currentImageIndex, setCurrentImageIndex] = useState(0);

            useEffect(() => {
                if (Array.isArray(name) && name.length > 1) {
                    const interval = setInterval(() => {
                        setCurrentImageIndex(prev => (prev + 1) % name.length);
                    }, 5000);
                    return () => clearInterval(interval);
                }
            }, [name]);

            if (Array.isArray(name)) {
                return (
                    <div className={`relative w-8 h-8 inline-block ${className}`}>
                        {name.map((url, index) => (
                             <img 
                                key={url} 
                                src={url} 
                                alt="icon" 
                                draggable="false"
                                className={`absolute inset-0 w-full h-full object-contain transition-opacity duration-1000 ${index === currentImageIndex ? 'opacity-100' : 'opacity-0'}`} 
                             />
                        ))}
                    </div>
                );
            }

            if (name.startsWith('http')) {
                return <img src={name} alt="icon" draggable="false" className={`w-8 h-8 object-contain ${className}`} />;
            }
            return <i className={`fa-solid ${name} ${sizeClass} ${className}`}></i>;
        };

        // Modal for Long Press Category Info
        const CategoryInfoModal = ({ category, onClose }) => {
            if (!category) return null;
            
            const categoryWords = WORD_BANK[category];
            const examples = categoryWords.slice(0, 8).join(", ");
            const remainingCount = categoryWords.length - 8;
            const icon = CATEGORY_ICONS[category];

            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-md" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up transform transition-all">
                        <button onClick={onClose} className="absolute top-4 right-4 w-8 h-8 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10">
                            <i className="fa-solid fa-xmark"></i>
                        </button>
                        
                        <div className="flex flex-col items-center text-center mb-6">
                            <div className={`w-20 h-20 rounded-full flex items-center justify-center mb-4 ${category === 'Supercell' ? 'bg-blue-500/20' : 'bg-brand-500/20'} ring-1 ring-white/10`}>
                                <FaIcon name={icon} sizeClass="text-3xl" className={`${category === 'Supercell' ? '' : 'text-brand-400'} w-11 h-11`} />
                            </div>
                            <h2 className="text-2xl font-display font-bold text-white">{category}</h2>
                            <p className="text-white/40 text-xs font-bold tracking-widest uppercase mt-1">Category Info</p>
                        </div>
                        
                        <div className="bg-white/5 rounded-xl p-4 border border-white/5">
                            <h3 className="text-white/70 text-sm font-semibold mb-2 flex items-center gap-2">
                                <i className="fa-solid fa-list-ul text-brand-400 text-xs"></i> Examples
                            </h3>
                            <p className="text-white/90 text-sm leading-relaxed">
                                {examples}{remainingCount > 0 ? `, and ${Math.floor(remainingCount / 10) * 10}+ more` : ''}
                            </p>
                        </div>
                        
                        <div className="mt-6 text-center text-white/30 text-xs">
                            Tap anywhere to close
                        </div>
                    </div>
                </div>
            );
        };
        
        // NEW: Modal for removed players
        const RemovedModal = ({ onClose }) => {
			return (
				<div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-md"></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-4 bg-red-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-user-slash text-3xl text-red-400"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Removed from Lobby</h2>
                        <p className="text-white/60 mb-6">The host has removed you from the mission lobby.</p>
                        
                        <button 
                            onClick={onClose}
                            className="w-full bg-white hover:bg-slate-200 text-slate-950 py-3 rounded-xl font-display font-bold text-base shadow-[0_0_20px_rgba(255,255,255,0.1)] active:scale-95 transition-all flex items-center justify-center gap-3"
                        >
                            RETURN TO HOME
                        </button>
                    </div>
                </div>
            );
        };
        
        // NEW: Modal for when host closes lobby
        const LobbyClosedModal = ({ hostName, onClose }) => {
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-md"></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-4 bg-yellow-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-door-open text-3xl text-yellow-400"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Lobby Closed</h2>
                        <p className="text-white/60 mb-6">{hostName} has left the mission. The lobby has been closed.</p>
                        
                        <button 
                            onClick={onClose}
                            className="w-full bg-white hover:bg-slate-200 text-slate-950 py-3 rounded-xl font-display font-bold text-base shadow-[0_0_20px_rgba(255,255,255,0.1)] active:scale-95 transition-all flex items-center justify-center gap-3"
                        >
                            RETURN TO HOME
                        </button>
                    </div>
                </div>
            );
        };

        // NEW: Modal to review turn order during game
        const TurnOrderReviewModal = ({ players, onClose }) => {
            if (!players || players.length === 0) return null;
            
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/70 backdrop-blur-sm" onClick={onClose}></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up flex flex-col max-h-[80vh]">
                        <h2 className="flex-shrink-0 text-xl font-display font-bold text-white mb-6 text-center flex items-center justify-center gap-3">
                            <i className="fa-solid fa-list-ol text-brand-400"></i>
                            Mission Turn Order
                        </h2>
                        <div className="flex-1 overflow-y-auto no-scrollbar space-y-3">
                            {players.map((player, index) => (
                                <div key={player.id || index} className="flex items-center gap-3 bg-white/5 p-3 rounded-lg">
                                    <div className="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-sky-900/50 text-sky-400 font-mono font-bold text-sm rounded-md border border-sky-400/20">{index + 1}</div>
                                    <PlayerAvatar name={player.name} className="w-6 h-6 rounded-full" />
                                    <div className="font-semibold text-white/90 truncate">{player.name}</div>
                                </div>
                            ))}
                        </div>
                        <button 
                            onClick={onClose}
                            className="flex-shrink-0 w-full mt-6 bg-white/10 hover:bg-white/20 text-white/80 py-3 rounded-xl font-display font-bold text-base active:scale-95 transition-all"
                        >
                            CLOSE
                        </button>
                    </div>
                </div>
            );
        };
        
        // NEW: Modal to confirm leaving a lobby
        const ExitLobbyConfirmModal = ({ onConfirm, onCancel }) => {
            return (
                <div className="fixed inset-0 z-[60] flex items-center justify-center p-6 animate-fadeIn">
                    <div className="absolute inset-0 bg-black/60 backdrop-blur-md"></div>
                    <div className="relative w-full max-w-sm glass-panel rounded-3xl p-6 border border-white/10 shadow-2xl animate-slide-up text-center">
                        <div className="w-20 h-20 rounded-full flex items-center justify-center mb-4 bg-yellow-500/20 ring-1 ring-white/10 mx-auto">
                            <i className="fa-solid fa-door-open text-3xl text-yellow-400"></i>
                        </div>
                        <h2 className="text-2xl font-display font-bold text-white mb-2">Leave Lobby?</h2>
                        <p className="text-white/60 mb-6">Are you sure you want to exit? The host may start the next round without you.</p>
                        
                        <div className="flex flex-col gap-3">
                            <button 
                                onClick={onConfirm}
                                className="w-full bg-red-600 hover:bg-red-500 text-white py-3 rounded-xl font-display font-bold text-base active:scale-95 transition-all"
                            >
                                Yes, Exit Lobby
                            </button>
                            <button 
                                onClick={onCancel}
                                className="w-full bg-white/10 hover:bg-white/20 text-white/80 py-3 rounded-xl font-display font-bold text-base active:scale-95 transition-all"
                            >
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 1. Setup Screen
        const SetupScreen = ({ onStartGame, audioManager, onBack }) => {
            const DEFAULT_PLAYERS = [{ name: 'Player 1', audioData: null }, { name: 'Player 2', audioData: null }, { name: 'Player 3', audioData: null }];
            const MIN_PLAYERS = 3;

            // --- State Persistence Logic ---
            const [players, setPlayers] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_players');
                    if (saved) {
                        let parsed = JSON.parse(saved);
                        if (Array.isArray(parsed) && parsed.length > 0) {
                            if (typeof parsed === 'string') {
                                parsed = parsed.map(name => ({ name, audioData: null }));
                            }
                            return parsed;
                        }
                    }
                    return DEFAULT_PLAYERS;
                } catch {
                    return DEFAULT_PLAYERS;
                }
            });

            const [selectedCategory, setSelectedCategory] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_category');
                    return saved ? JSON.parse(saved) : 'Movies';
                } catch { return 'Movies'; }
            });

            const [isRandomMode, setIsRandomMode] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_random_mode');
                    return saved ? JSON.parse(saved) : false;
                } catch { return false; }
            });
            
            const [speakCategory, setSpeakCategory] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_speak_category');
                    return saved ? JSON.parse(saved) : false;
                } catch { return false; }
            });

            const [isFakeWordMode, setIsFakeWordMode] = useState(() => {
                try {
                    const saved = localStorage.getItem('imposter_fake_word_mode');
                    return saved ? JSON.parse(saved) : false;
                } catch { return false; }
            });

            const [newPlayerName, setNewPlayerName] = useState('');
            const [timerMinutes, setTimerMinutes] = useState(3);
            const [timerEnabled, setTimerEnabled] = useState(true);
            const [inspectedCategory, setInspectedCategory] = useState(null);
            const [enableTwoImposters, setEnableTwoImposters] = useState(false);
            
            // Voice recording state
            const [isRecording, setIsRecording] = useState(false);
            const [recordedAudioData, setRecordedAudioData] = useState(null);
            const [showMicTooltip, setShowMicTooltip] = useState(false);
            const mediaRecorderRef = useRef(null);
            const audioChunksRef = useRef([]);
            const micTooltipTimer = useRef(null);

            // Long press logic
            const categoryLongPressTimerRef = useRef(null);
            const playerPressTimerRef = useRef(null);
            
            // --- Save effects ---
            useEffect(() => { localStorage.setItem('imposter_players', JSON.stringify(players)); }, [players]);
            useEffect(() => { localStorage.setItem('imposter_category', JSON.stringify(selectedCategory)); }, [selectedCategory]);
            useEffect(() => { localStorage.setItem('imposter_random_mode', JSON.stringify(isRandomMode)); }, [isRandomMode]);
            useEffect(() => { localStorage.setItem('imposter_speak_category', JSON.stringify(speakCategory)); }, [speakCategory]);
            useEffect(() => { localStorage.setItem('imposter_fake_word_mode', JSON.stringify(isFakeWordMode)); }, [isFakeWordMode]);

            useEffect(() => {
                if (players.length < 10) {
                    setEnableTwoImposters(false);
                }
            }, [players]);

            const handleMicClick = async () => {
                if (isRecording) {
                    mediaRecorderRef.current.stop();
                    setIsRecording(false);
                } else {
                    try {
                        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                        audioChunksRef.current = [];
                        const mediaRecorder = new MediaRecorder(stream);
                        mediaRecorderRef.current = mediaRecorder;

                        mediaRecorder.ondataavailable = event => {
                            audioChunksRef.current.push(event.data);
                        };

                        mediaRecorder.onstop = () => {
                            const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });
                            const reader = new FileReader();
                            reader.readAsDataURL(audioBlob);
                            reader.onloadend = () => {
                                setRecordedAudioData(reader.result); // Save as Base64 data URL
                            };
                            stream.getTracks().forEach(track => track.stop());
                        };

                        mediaRecorder.start();
                        setIsRecording(true);
                        setRecordedAudioData(null); // Clear previous recording
                    } catch (err) {
                        console.error("Error accessing microphone:", err);
                        alert("Microphone access was denied. Please allow it in your browser settings.");
                    }
                }
            };
            
            const addPlayer = () => {
                if (newPlayerName.trim()) {
                    audioManager.playSound('uiClick');
                    setPlayers([...players, { name: newPlayerName.trim(), audioData: recordedAudioData }]);
                    setNewPlayerName('');
                    setRecordedAudioData(null); // Reset for the next player
                    if (navigator.vibrate) navigator.vibrate(10);
                }
            };

            const removePlayer = (index) => {
                if (players.length > MIN_PLAYERS) {
                    audioManager.playSound('uiClick');
                    setPlayers(players.filter((_, i) => i !== index));
                    if (navigator.vibrate) navigator.vibrate(10);
                }
            };

            const handleCategorySelect = (cat) => {
                if (selectedCategory !== cat) {
                    audioManager.playSound('selectCategory');
                }
                setSelectedCategory(cat);
                if (navigator.vibrate) navigator.vibrate(5);
            };
            
            const handleCategoryTouchStart = (cat) => {
                categoryLongPressTimerRef.current = setTimeout(() => {
                    setInspectedCategory(cat);
                    audioManager.playSound('openInfo');
                    if (navigator.vibrate) navigator.vibrate(30);
                }, 600);
            };

            const handleCategoryTouchEnd = () => {
                if (categoryLongPressTimerRef.current) {
                    clearTimeout(categoryLongPressTimerRef.current);
                    categoryLongPressTimerRef.current = null;
                }
            };
            
            const handlePlayerPress = (player) => {
                if (player.audioData) {
                    playerPressTimerRef.current = setTimeout(() => {
                        const audio = new Audio(player.audioData);
                        audio.play().catch(e => console.error("Failed to play custom audio:", e));
                        if (navigator.vibrate) navigator.vibrate(20);
                    }, 300);
                }
            };

            const handlePlayerRelease = () => {
                if (playerPressTimerRef.current) {
                    clearTimeout(playerPressTimerRef.current);
                }
            };

            const handleMicPress = () => {
                micTooltipTimer.current = setTimeout(() => setShowMicTooltip(true), 500);
            };
            const handleMicRelease = () => {
                clearTimeout(micTooltipTimer.current);
                setShowMicTooltip(false);
            };

            const handleStartClick = () => {
                if (players.length >= MIN_PLAYERS) {
                    if (navigator.vibrate) navigator.vibrate(30);
                    audioManager.playSound(isRandomMode ? 'startRandomMission' : 'startMission');
                    onStartGame(players, isRandomMode ? [] : [selectedCategory], timerEnabled ? timerMinutes * 60 : null, isRandomMode, speakCategory, enableTwoImposters, isFakeWordMode);
                }
            };
            
            const handleModeChange = (newModeIsRandom) => {
                if (isRandomMode !== newModeIsRandom) {
                    audioManager.playSound('toggleMode');
                    setIsRandomMode(newModeIsRandom);
                }
            };

            return (
                <div className="flex flex-col h-[100dvh] relative z-10">
                    <div className="absolute top-6 left-6 z-20">
                         <button onClick={onBack} className="w-12 h-12 flex items-center justify-center bg-white/5 rounded-full text-white/50 hover:bg-white/10 active:scale-90 transition-transform">
                            <i className="fa-solid fa-chevron-left"></i>
                        </button>
                    </div>
                    <CategoryInfoModal category={inspectedCategory} onClose={() => setInspectedCategory(null)} />

                    <div className="flex-1 overflow-y-auto no-scrollbar pb-32">
                        <div className="max-w-lg mx-auto p-6 pt-28">
                            {/* Header */}
                            <div class="mb-10 text-center">
                                <SeasonalTitle season={currentSeason} className="text-6xl font-display font-black text-transparent bg-clip-text bg-gradient-to-br from-white via-white to-white/50 mb-2 drop-shadow-lg tracking-tight" />
								<div class="subtle-shine-container inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 backdrop-blur-md">
									<span class="text-white/60 text-[10px] font-bold tracking-[0.3em] uppercase">Local Game</span>
								</div>
							</div>

                            {/* Players */}
                            <section className="mb-6 glass-panel rounded-[2rem] p-6">
                                <h2 className="text-sm font-bold tracking-widest text-brand-400 mb-4 flex items-center gap-2 uppercase">
                                    <i className="fa-solid fa-users"></i> Agents
                                    <span className="ml-auto text-[10px] bg-white/5 px-2 py-1 rounded-md text-white/50">{players.length} / {MIN_PLAYERS}+</span>
                                </h2>
                                <div className="flex flex-col gap-3 mb-4">
                                    <div className="flex items-center gap-3 bg-slate-950/50 rounded-xl border border-white/5 focus-within:border-brand-500/50 focus-within:bg-slate-950/80 transition-all pr-4">
                                        <input
                                            type="text"
                                            value={newPlayerName}
                                            onChange={(e) => setNewPlayerName(e.target.value)}
                                            onKeyDown={(e) => e.key === 'Enter' && addPlayer()}
                                            placeholder="Enter codename..."
                                            className="flex-1 bg-transparent px-5 py-4 outline-none placeholder:text-white/20 font-medium text-sm text-white min-w-0"
                                        />
                                        {newPlayerName.trim() && <PlayerAvatar name={newPlayerName.trim()} className="w-8 h-8 rounded-full" />}
                                    </div>
                                    <div className="flex gap-3 relative">
                                        <button 
                                            onClick={handleMicClick}
                                            onMouseDown={handleMicPress}
                                            onMouseUp={handleMicRelease}
                                            onMouseLeave={handleMicRelease}
                                            onTouchStart={handleMicPress}
                                            onTouchEnd={handleMicRelease}
                                            className={`flex-1 flex items-center justify-center rounded-xl font-bold transition-all shadow-lg active:scale-95 border border-white/10 h-14 ${isRecording ? 'bg-red-500 animate-pulse' : (recordedAudioData ? 'bg-green-500' : 'bg-white/10 hover:bg-white/20')}`}
                                        >
                                            <i className={`fa-solid ${recordedAudioData && !isRecording ? 'fa-check' : 'fa-microphone'} text-white text-lg ${isRecording ? '' : 'opacity-70'}`}></i>
                                        </button>
                                        
                                        {showMicTooltip && (
                                            <div className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-xs bg-slate-800 text-white text-xs rounded-md px-3 py-2 shadow-lg animate-fadeIn z-20">
                                                Record a custom "It's your turn" voice note!
                                                <div className="absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-slate-800"></div>
                                            </div>
                                        )}
                                        
                                        <button 
                                            onClick={addPlayer}
                                            className="bg-brand-600 hover:bg-brand-500 flex-1 flex items-center justify-center rounded-xl font-bold transition shadow-lg shadow-brand-900/20 active:scale-95 border border-white/10 h-14"
                                        >
                                            <i className="fa-solid fa-plus text-white text-lg"></i>
                                        </button>
                                    </div>
                                </div>
                                <div className="flex flex-wrap gap-2">
                                    {players.map((p, i) => (
                                        <div 
                                            key={i} 
                                            className="flex items-center gap-2 bg-white/5 border border-white/5 pl-2 pr-1.5 py-1.5 rounded-full animate-fadeIn group hover:bg-white/10 transition-colors cursor-pointer"
                                            onMouseDown={() => handlePlayerPress(p)}
                                            onMouseUp={handlePlayerRelease}
                                            onMouseLeave={handlePlayerRelease}
                                            onTouchStart={() => handlePlayerPress(p)}
                                            onTouchEnd={handlePlayerRelease}
                                        >
                                            <PlayerAvatar name={p.name} className="w-5 h-5 rounded-full" />
                                            {p.audioData && <i className="fa-solid fa-microphone text-brand-400/50 text-xs"></i>}
                                            <span className="truncate max-w-28 text-xs font-bold text-slate-300 pr-1">{p.name}</span>
                                            <button 
                                                onClick={(e) => { e.stopPropagation(); removePlayer(i); }}
                                                disabled={players.length <= MIN_PLAYERS}
                                                className={`w-6 h-6 flex items-center justify-center rounded-full text-[10px] transition-colors 
                                                    ${players.length > MIN_PLAYERS 
                                                        ? 'bg-white/5 hover:bg-red-500/20 text-white/40 hover:text-red-400' 
                                                        : 'opacity-20 cursor-not-allowed'
                                                    }`}
                                            >
                                                <i className="fa-solid fa-xmark"></i>
                                            </button>
                                        </div>
                                    ))}
                                </div>
                            </section>

                            {/* Settings */}
                            <section className="mb-6 glass-panel rounded-[2rem] p-6 space-y-3">
                                <div className="flex items-center justify-between">
                                    <div className="pr-4">
                                        <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                            <i className="fa-solid fa-masks-theater text-yellow-400/80 w-5 text-center"></i>
                                            <span>Fake Word Mode</span>
                                        </h3>
                                        <p className="text-white/40 text-xs mt-1 pl-8">One agent gets a different word. They don't know it's fake.</p>
                                    </div>
                                    <button 
                                        onClick={() => {
                                            setIsFakeWordMode(!isFakeWordMode);
                                            audioManager.playSound(!isFakeWordMode ? 'switchOn' : 'switchOff');
                                            if(navigator.vibrate) navigator.vibrate(10);
                                        }}
                                        className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${isFakeWordMode ? 'bg-yellow-500/80' : 'bg-white/10'}`}
                                    >
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${isFakeWordMode ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>
                                
                                <div className="h-px bg-white/10"></div>

                                <div 
									className={`flex items-center justify-between transition-opacity duration-300 ${players.length < 10 ? 'opacity-50' : ''}`}
									title={players.length < 10 ? "Requires 10 or more players" : (isFakeWordMode ? "Add a second fake word card" : "Add a second spy to the mission")}
								>
                                    <div className="pr-4">
                                        <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                            <i className="fa-solid fa-user-secret text-orange-400/80 w-5 text-center"></i>
                                            <span>{isFakeWordMode ? 'Second Fake Card' : 'Second Imposter'}</span>
                                        </h3>
                                        <p className="text-white/40 text-xs mt-1 pl-8">Adds a second rogue agent when 10 or more players are in the lobby.</p>
                                    </div>
                                    <button 
										onClick={() => {
											if (players.length >= 10) {
												setEnableTwoImposters(!enableTwoImposters);
												audioManager.playSound(!enableTwoImposters ? 'switchOn' : 'switchOff');
												if(navigator.vibrate) navigator.vibrate(10);
											}
										}}
										disabled={players.length < 10}
										className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${enableTwoImposters ? 'bg-orange-500/80' : 'bg-white/10'} ${players.length < 10 ? 'cursor-not-allowed' : ''}`}
									>
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${enableTwoImposters ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>

                                <div className="h-px bg-white/10"></div>

                                <div className={`flex items-center justify-between transition-all duration-300`}>
                                     <div className="pr-4">
                                        <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                            <i className="fa-solid fa-stopwatch text-sky-400/80 w-5 text-center"></i>
                                            <span>Countdown Timer</span>
                                        </h3>
                                        <p className="text-white/40 text-xs mt-1 pl-8">Sets a time limit for discussion. When disabled, the game is untimed.</p>
                                    </div>
                                    <button 
                                        onClick={() => {
                                            setTimerEnabled(!timerEnabled);
                                            audioManager.playSound(!timerEnabled ? 'switchOn' : 'switchOff');
                                            if(navigator.vibrate) navigator.vibrate(10);
                                        }}
                                        className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${timerEnabled ? 'bg-sky-500/80' : 'bg-white/10'}`}
                                    >
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${timerEnabled ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>
                                <div className={`transition-all duration-300 overflow-hidden ${timerEnabled ? 'opacity-100 max-h-40 pt-4' : 'opacity-0 max-h-0'}`}>
                                    <div className="flex justify-between items-end mb-2 px-1">
                                        <span className="text-white/40 text-[10px] font-bold uppercase">Duration</span>
                                        <span className="font-mono text-xl font-bold text-white">{timerMinutes} <span className="text-sm text-white/50">min</span></span>
                                    </div>
                                    <input
										type="range"
										min="1"
										max="15"
										value={timerMinutes}
										onChange={(e) => setTimerMinutes(parseInt(e.target.value))}
										className="w-full h-7 appearance-none cursor-pointer timer-slider bg-transparent"
									/>
                                </div>

                                <div className="h-px bg-white/10"></div>

                                 <div className="flex items-center justify-between">
                                    <div className="pr-4">
                                        <h3 className="font-bold text-white/90 text-base flex items-center gap-3">
                                            <i className="fa-solid fa-volume-high text-purple-400/80 w-5 text-center"></i>
                                            <span>Speak Category</span>
                                        </h3>
                                        <p className="text-white/40 text-xs mt-1 pl-8">Announces the chosen category name when the mission begins.</p>
                                    </div>
                                    <button 
                                        onClick={() => {
                                            setSpeakCategory(!speakCategory);
                                            audioManager.playSound(!speakCategory ? 'switchOn' : 'switchOff');
                                            if(navigator.vibrate) navigator.vibrate(10);
                                        }}
                                        className={`flex-shrink-0 w-12 h-7 rounded-full p-1 transition-all duration-300 ${speakCategory ? 'bg-purple-500/80' : 'bg-white/10'}`}
                                    >
                                        <div className={`w-5 h-5 bg-white rounded-full shadow-md transform transition-transform duration-300 ${speakCategory ? 'translate-x-5' : 'translate-x-0'}`} />
                                    </button>
                                </div>
                            </section>

                            {/* Categories */}
                            <section>
                                <div className="flex items-center justify-between mb-4 px-2">
                                    <h2 className="text-sm font-bold tracking-widest text-teal-400 flex items-center gap-2 uppercase">
                                        <i className="fa-solid fa-layer-group"></i> Mission
                                    </h2>
                                    
                                    <div className="flex bg-slate-950/50 p-1 rounded-lg border border-white/5">
                                        <button 
                                            onClick={() => handleModeChange(false)}
                                            className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${!isRandomMode ? 'bg-white/10 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                        >
                                            Select
                                        </button>
                                        <button 
                                            onClick={() => handleModeChange(true)}
                                            className={`px-3 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wide transition-all ${isRandomMode ? 'bg-gradient-to-r from-brand-600 to-fuchsia-600 text-white shadow-sm' : 'text-white/30 hover:text-white/60'}`}
                                        >
                                            Random
                                        </button>
                                    </div>
                                </div>

                                {isRandomMode ? (
                                    <div className="glass-panel rounded-[2rem] p-8 text-center animate-fadeIn border border-brand-500/20 relative overflow-hidden group">
                                        <div className="absolute inset-0 bg-gradient-to-br from-brand-500/10 via-transparent to-fuchsia-500/10 opacity-50 group-hover:opacity-100 transition-opacity duration-700"></div>
                                        <div className="relative z-10 py-8">
                                            <div className="w-24 h-24 mx-auto bg-gradient-to-br from-brand-500 to-fuchsia-600 rounded-3xl rotate-12 flex items-center justify-center shadow-lg shadow-brand-900/40 mb-6 group-hover:rotate-[20deg] group-hover:scale-110 transition-transform duration-500">
                                                <i className="fa-solid fa-dice text-4xl text-white drop-shadow-md"></i>
                                            </div>
                                            <h3 className="text-2xl font-display font-bold text-white mb-2">Mystery Mode</h3>
                                            <p className="text-white/50 text-sm max-w-[200px] mx-auto leading-relaxed">
                                                The system will automatically select a random category for your mission.
                                            </p>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="grid grid-cols-2 sm:grid-cols-3 gap-3 animate-fadeIn">
                                        {DISPLAY_CATEGORIES.map(cat => {
											const iconSource = CATEGORY_ICONS[cat];
											const isSelected = selectedCategory === cat;
											const isSupercell = cat === 'Supercell';
											const isChristmas = cat === 'Christmas';
											const isHalloween = cat === 'Halloween';
											const isSeasonal = isChristmas || isHalloween;
											
											let cardClasses = `relative overflow-hidden flex flex-col items-center justify-center gap-3 p-4 rounded-[1.5rem] border transition-all duration-300 active:scale-95 group min-h-[110px] `;
											let checkmarkBg = 'bg-teal-500 text-slate-900';

											if (isChristmas) {
												if (isSelected) {
													cardClasses += 'border-red-400 bg-red-900/20 ring-red-500 shadow-lg shadow-red-900/40 text-white';
													checkmarkBg = 'bg-red-500 text-white';
												} else {
													cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
												}
											} else if (isHalloween) {
												if (isSelected) {
													cardClasses += 'border-orange-400 bg-orange-900/20 ring-orange-500 shadow-lg shadow-orange-900/40 text-white';
													 checkmarkBg = 'bg-orange-500 text-white';
												} else {
													cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
												}
											} else if (isSupercell) {
												if (isSelected) {
													cardClasses += 'border-blue-400 bg-blue-900/20 ring-blue-500 shadow-lg shadow-blue-900/40 text-white';
													checkmarkBg = 'bg-blue-500 text-white';
												} else {
													cardClasses += 'border-white/10 bg-slate-900/40 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 text-slate-300';
												}
											} else {
												if (isSelected) {
													cardClasses += 'glass-panel bg-teal-500/10 border-teal-500/40 text-teal-100 shadow-[0_0_20px_rgba(20,184,166,0.1)]';
												} else {
													cardClasses += 'glass-panel-lighter border-white/5 text-slate-400 hover:bg-white/5 hover:border-white/10';
												}
											}

											return (
												<button
													key={cat}
													onClick={() => handleCategorySelect(cat)}
													onMouseDown={() => handleCategoryTouchStart(cat)}
													onMouseUp={handleCategoryTouchEnd}
													onMouseLeave={handleCategoryTouchEnd}
													onTouchStart={() => handleCategoryTouchStart(cat)}
													onTouchEnd={handleCategoryTouchEnd}
													onTouchMove={handleCategoryTouchEnd}
													className={cardClasses}
												>
													{isSupercell && (
														<div className="supercell-container pointer-events-none">
															<div className="supercell-bg-1"></div>
															<div className="supercell-bg-2"></div>
														</div>
													)}
													{isSeasonal && (
														<div 
															className="absolute inset-0 bg-cover bg-center pointer-events-none"
															style={{
																backgroundImage: isChristmas 
																	? `url("https://www.catholicnewsagency.com/images/three-kings.jpg?jpg")`
																	: `url("https://picjumbo.com/wp-content/uploads/dark-halloween-background-with-glowing-halloween-pumpkins-free-image.jpeg")`
															}}
														></div>
													)}

													<div className="relative z-10 flex flex-col items-center gap-2">
														<FaIcon 
															name={iconSource} 
															sizeClass="text-2xl" 
															className={`transition-all duration-300 ${isSupercell || isSeasonal ? "drop-shadow-md brightness-125" : (isSelected ? "text-teal-400 scale-110" : "text-white/40 group-hover:text-white/70")}`} 
														/>
														<span className={`text-xs font-bold tracking-wide transition-colors ${isSupercell || isSeasonal ? 'text-white drop-shadow-md' : ''}`}>{cat}</span>
													</div>

													{isSelected && (
														<div className={`absolute top-3 right-3 w-5 h-5 rounded-full flex items-center justify-center text-[10px] shadow-sm ${checkmarkBg}`}>
															<i className="fa-solid fa-check"></i>
														</div>
													)}
												</button>
											)
										})}
                                    </div>
                                )}
                            </section>
                        </div>
                    </div>

                    {/* Fixed Bottom Start Button */}
                    <div className="fixed bottom-0 left-0 w-full p-6 bg-gradient-to-t from-[#020617] via-[#020617] to-transparent z-50">
                        <div className="max-w-lg mx-auto pb-[env(safe-area-inset-bottom)]">
                            <button
                                onClick={handleStartClick}
                                disabled={players.length < MIN_PLAYERS}
                                className="w-full bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] hover:shadow-[0_0_50px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:shadow-none active:scale-[0.98] transition-all flex items-center justify-center gap-3 relative overflow-hidden group"
                            >
                                <div className="absolute inset-0 bg-gradient-to-r from-transparent via-slate-200/50 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"></div>
                                <span className="relative z-10 flex items-center gap-3">
                                    <i className="fa-solid fa-play text-sm"></i> START MISSION
                                </span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // 2. Card Reveal Screen (Enhanced with 3D Flip)
        const CardRevealScreen = ({ player, word, onNext, isLastPlayer, audioManager, onAcknowledge, isOnline, onConfused }) => {
            const [step, setStep] = useState(isOnline ? 'reveal' : 'handover'); 
            const [isFlipped, setIsFlipped] = useState(false);
            
            useEffect(() => {
                if(!isOnline) {
                    setStep('handover');
                    setIsFlipped(false);
                } else {
                    setStep('reveal');
                }
            }, [player, isOnline]);
            
            useEffect(() => {
                if (step === 'handover' && player.audioData) {
                    const audio = new Audio(player.audioData);
                    audio.play().catch(e => console.error("Custom audio playback failed:", e));
                }
            }, [player, step]);

            const handleReveal = () => {
                if (!isFlipped) {
                    setIsFlipped(true);
                    audioManager.playSound('uiClick');
                    if (navigator.vibrate) navigator.vibrate();
                }
            };
            
            const handleAckAndNext = () => {
                 audioManager.playSound('uiClick');
                if (isOnline) {
                    onAcknowledge();
                } else {
                    if(navigator.vibrate) navigator.vibrate(20);
                    onNext();
                }
            };

            const renderHandover = () => (
                <div className="flex flex-col items-center justify-center h-full text-center p-8 animate-slide-up relative z-10">
                    <div className="w-32 h-32 rounded-full flex items-center justify-center mb-10 relative">
                        <div className="absolute inset-0 bg-brand-500/20 blur-2xl rounded-full animate-pulse-slow"></div>
                        <div className="glass-panel w-full h-full rounded-full flex items-center justify-center border border-white/10 overflow-hidden">
                            <img src="https://em-content.zobj.net/source/microsoft-teams/363/detective_light-skin-tone_1f575-1f3fb_1f3fb.png" alt="Detective" draggable="false" className="w-35 h-35 relative top-3" />
                        </div>
                    </div>
                    
                    <h2 className="text-brand-400 text-xs font-bold uppercase tracking-[0.4em] mb-4">Classified Info For</h2>
                    <h1 className="text-6xl font-display font-black text-white mb-16 drop-shadow-2xl">{player.name}</h1>
                    
                    <div className="w-full max-w-sm">
                        <button 
                            onClick={() => {
                                audioManager.playSound('uiClick');
                                setStep('reveal');
                                if (navigator.vibrate) navigator.vibrate(20);
                            }}
                            className="w-full glass-panel hover:bg-white/5 border border-white/10 text-white font-display font-bold text-lg py-5 rounded-[1.5rem] transition-all active:scale-95 flex items-center justify-center gap-3"
                        >
                            <i className="fa-solid fa-fingerprint text-brand-400"></i> Verify Identity
                        </button>
                    </div>
                </div>
            );

            const renderFlipCard = () => (
                <div className="flex flex-col items-center justify-center h-full w-full p-6 relative">
                    {/* Background Overlay */}
                    <div className="absolute inset-0 bg-slate-950/80 backdrop-blur-sm z-0"></div>

                    {/* Card Container */}
                    <div className="relative w-full max-w-xs aspect-[3/4] perspective-1000 z-10 cursor-pointer" onClick={handleReveal}>
                        <div className={`relative w-full h-full transition-transform duration-700 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                            
                            {/* FRONT (Locked) */}
                            <div className="absolute inset-0 backface-hidden">
                                <div className="w-full h-full bg-slate-900 rounded-[2.5rem] border border-white/10 shadow-2xl flex flex-col items-center justify-center p-8 relative overflow-hidden group">
                                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/soft-wallpaper.png')] opacity-10"></div>
                                    <div className="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>

                                    <div className="w-24 h-24 flex items-center justify-center mb-8">
                                        <img src="https://em-content.zobj.net/source/microsoft-teams/337/locked_1f512.png" alt="Locked" draggable="false" className="w-20 h-20" />
                                    </div>
                                    <h3 className="text-white font-display font-bold text-2xl mb-2">TOP SECRET</h3>
                                    <p className="text-white/40 font-medium text-sm text-center tracking-wide">Tap to decrypt</p>
                                    
                                    <div className="absolute bottom-10 flex gap-2 items-center text-white/20 text-[10px] font-bold uppercase tracking-widest animate-pulse">
                                        <span>Tap to Open</span>
                                    </div>
                                </div>
                            </div>

                            {/* BACK (Revealed) */}
                            <div className="absolute inset-0 rotate-y-180 backface-hidden">
                                <div className={`w-full h-full rounded-[2.5rem] flex flex-col items-center justify-center p-8 text-center relative overflow-hidden shadow-2xl border ${
                                     word === "IMPOSTER" 
                                        ? 'bg-gradient-to-br from-red-950 to-slate-950 border-red-500/20' 
                                        : 'bg-gradient-to-br from-teal-950 to-slate-950 border-teal-500/20'
                                }`}>
                                    
                                    {/* Shine Effect */}
                                    <div className="absolute inset-0 z-0 opacity-20 pointer-events-none overflow-hidden">
                                         <div className="absolute w-[200%] h-[200%] bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shine"></div>
                                    </div>

                                    <div className={`absolute top-[-50%] w-full h-full opacity-30 blur-[100px] z-0 ${word === 'IMPOSTER' ? 'bg-red-600' : 'bg-teal-500'}`}></div>

                                    <div className="relative z-10 flex flex-col items-center justify-center h-full">
                                        <p className={`text-[10px] uppercase tracking-[0.4em] font-bold mb-8 ${word === 'IMPOSTER' ? 'text-red-400' : 'text-teal-400'}`}>Your Mission Role</p>
                                        
                                        {word === "IMPOSTER" ? (
                                            <>
                                                <div className="w-28 h-28 flex items-center justify-center mb-6">
                                                    <img src="https://em-content.zobj.net/source/microsoft-teams/337/shushing-face_1f92b.png" alt="Shushing" draggable="false" className="w-24 h-24 drop-shadow-lg" />
                                                </div>
                                                <h2 className="text-4xl font-display font-black text-red-500 tracking-tight mb-4 drop-shadow-sm">IMPOSTER</h2>
                                                <p className="text-red-200/60 text-xs font-medium leading-relaxed max-w-[200px]">Blend in. Deceive. Don't let them know you are the spy.</p>
                                            </>
                                        ) : (
                                            <>
                                                <div className="w-28 h-28 flex items-center justify-center mb-6">
                                                    <img src="https://em-content.zobj.net/source/microsoft-teams/337/clipboard_1f4cb.png" alt="Clipboard" draggable="false" className="w-20 h-20 drop-shadow-lg" />
                                                </div>
                                                <h2 className="text-3xl font-display font-bold text-white mb-4 drop-shadow-sm">{word}</h2>
                                                <p className="text-teal-200/60 text-xs font-medium leading-relaxed max-w-[200px]">Memorize this word. It proves your innocence.</p>
                                            </>
                                        )}
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    {/* Action Buttons */}
                    <div className={`w-full max-w-sm mt-8 transition-all duration-700 transform ${isFlipped ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'}`}>
                        <button 
                            onClick={(e) => {
                                e.stopPropagation(); // Prevent re-triggering flip
                                handleAckAndNext();
                            }}
                            className="w-full bg-white hover:bg-slate-200 text-slate-950 py-5 rounded-[1.5rem] font-display font-bold text-lg shadow-[0_0_30px_rgba(255,255,255,0.1)] active:scale-95 transition-all flex items-center justify-center gap-3"
                        >
                            <i className="fa-solid fa-check-circle text-lg"></i>
                            {isOnline ? "CONTINUE" : (isLastPlayer ? "REVEAL TURN ORDER" : "NEXT PLAYER")}
                        </button>
                        
                        {isOnline && word !== "IMPOSTER" && (
                            <div className="w-full max-w-sm mt-3">
                                <button
                                    onClick={(e) => {
                                        e.stopPropagation();
                                        onConfused();
                                    }}
                                    className="w-full text-white/50 hover:text-white hover:bg-white/5 font-bold text-sm py-3 rounded-xl transition-all"
                                >
                                    I don't recognize this word
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );

            return (
                <div className="h-[100dvh] relative overflow-hidden">
                    <div className="absolute inset-0 pointer-events-none">
                         <div className="blob bg-brand-600 top-[-10%] left-[-10%] w-[50%] h-[50%]"></div>
                         <div className="blob bg-cyan-600 bottom-[-10%] right-[-10%] w-[50%] h-[50%] animation-delay-2000"></div>
                    </div>
                    <div className="relative z-10 h-full">
                        {step === 'handover' ? renderHandover() : renderFlipCard()}
                    </div>
                </div>
            );
        };

        // 3. Turn Order Screen with Countdown
        const TurnOrderScreen = ({ players, onStartMission, audioManager, isHost }) => {
            const [countdown, setCountdown] = useState(10);

            useEffect(() => {
                if (audioManager) {
                    audioManager.playSound('turnOrderReveal');
                }
                return () => {
                    if (audioManager) {
                        audioManager.stopSound('turnOrderReveal');
                    }
                };
            }, [audioManager]);

            useEffect(() => {
                const timer = setInterval(() => {
                    setCountdown(prev => {
                        if (prev <= 1) {
                            clearInterval(timer);
                            if (isHost) {
                                onStartMission();
                            }
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);
                return () => clearInterval(timer);
            }, [isHost, onStartMission]);
            
            return (
                <div className="h-[100dvh] flex flex-col items-center p-6 text-center relative overflow-hidden animate-fadeIn">
                     <div className="absolute inset-0 pointer-events-none">
                         <div className="blob bg-teal-600/30 top-[-20%] left-[-20%] w-[60%] h-[60%]"></div>
                         <div className="blob bg-sky-600/30 bottom-[-20%] right-[-20%] w-[60%] h-[60%] animation-delay-2000"></div>
                    </div>

                    {/* Header */}
                    <div className="w-full max-w-sm pt-12">
                        <h1 className="text-4xl font-display font-bold text-white mb-4">Turn Order Established</h1>
                        <p className="text-white/60 mb-8 max-w-xs mx-auto">The mission will proceed in the following randomly assigned sequence.</p>
                    </div>
                    
                    {/* Scrollable List */}
                    <div className="flex-1 w-full max-w-sm my-4 flex flex-col min-h-0">
                        <div className="w-full glass-panel rounded-2xl p-6 overflow-y-auto no-scrollbar">
                            <div className="space-y-4">
                                {players.map((player, index) => (
                                    <div key={index} className="flex items-center gap-3 animate-slide-up" style={{ animationDelay: `${index * 100}ms` }}>
                                        <div className="flex-shrink-0 w-8 h-8 flex items-center justify-center bg-sky-900/50 text-sky-400 font-mono font-bold text-sm rounded-lg border border-sky-400/20">{index + 1}</div>
                                        <PlayerAvatar name={player.name} className="w-6 h-6 rounded-full" />
                                        <div className="text-left font-display font-semibold text-lg text-white/90 truncate">{player.name}</div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="w-full max-w-sm pb-8">
                        <div
                            className="w-full bg-white text-slate-950 font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-all flex items-center justify-center gap-3"
                        >
                            {countdown > 0 ? (
                                <span className="font-mono text-2xl tracking-widest">{countdown}</span>
                            ) : (
                                <>
                                 <i className="fa-solid fa-rocket text-sky-500"></i> BEGIN MISSION
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };


        // 4. Game Timer Screen
        const GameTimerScreen = ({ lobbyData, onEndGame, firstPlayer, audioManager, isHost, lobbyId }) => {
            const [showTurnOrder, setShowTurnOrder] = useState(false);
            const { duration, missionStartTime, turnOrder } = lobbyData || {};
            const [timeLeft, setTimeLeft] = useState(duration || 0);
            const timerRef = useRef(null);

            // Force the timer music to play as soon as the screen is shown
            useEffect(() => {
                if (audioManager) {
                    audioManager.playMusic('timerMusic');
                }
            }, [audioManager]);

            useEffect(() => {
                if (!duration || !missionStartTime) {
                    return;
                }

                let timerExpired = false;
                const updateTimer = () => {
                    const getStartTime = () => {
                        if (missionStartTime.toDate) return missionStartTime.toDate().getTime(); // Firestore timestamp
                        if (missionStartTime instanceof Date) return missionStartTime.getTime(); // JS Date for local game
                        return Date.now(); // Fallback
                    };

                    const startTime = getStartTime();
                    const elapsed = (Date.now() - startTime) / 1000;
                    const newTimeLeft = Math.round(Math.max(0, duration - elapsed));
                    
                    setTimeLeft(newTimeLeft);

                    if (newTimeLeft <= 0 && !timerExpired) {
                        timerExpired = true; // Prevents multiple triggers
                        clearInterval(timerRef.current);
                        
                        audioManager.stopMusic(); 
						audioManager.playSound('alarm');
                        
                        if (navigator.vibrate) navigator.vibrate();
                        
                        // Host ends the game for everyone in online mode
                        if (isHost && lobbyId) {
                            onEndGame();
                        }
                    }
                };

                if(timerRef.current) clearInterval(timerRef.current);
                updateTimer(); 
                timerRef.current = setInterval(updateTimer, 1000);

                return () => {
					clearInterval(timerRef.current);
					audioManager.stopSound('alarm');
				};
            }, [duration, missionStartTime, isHost, onEndGame, audioManager, lobbyId]);

            const handleIdentifyImposter = () => {
                if (lobbyId && !isHost) return;
                
                if(navigator.vibrate) navigator.vibrate(50);
                
                onEndGame();
            };

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            const progress = duration ? timeLeft / duration : 0;
            const strokeDasharray = 2 * Math.PI * 120;
            const strokeDashoffset = strokeDasharray * (1 - progress);
            const isActive = duration && timeLeft > 0;

            return (
                <div className="h-[100dvh] flex flex-col items-center justify-between p-6 relative overflow-hidden">
                    {showTurnOrder && <TurnOrderReviewModal players={turnOrder} onClose={() => setShowTurnOrder(false)} />}
                    <div className="absolute inset-0 pointer-events-none">
                        <div className={`absolute inset-0 bg-red-600/10 transition-opacity duration-1000 ${timeLeft < 30 && isActive ? 'opacity-100 animate-pulse' : 'opacity-0'}`}></div>
                        <div className="blob bg-brand-900/30 top-0 left-0 w-full h-full"></div>
                    </div>

                    {/* Header */}
                    <div className="w-full mt-8 glass-panel p-4 rounded-[1.5rem] flex items-center justify-between gap-4 z-10">
                        <div className="flex items-center gap-4 min-w-0">
                            <div className="bg-brand-500/20 w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0">
                                <i className="fa-solid fa-comments text-brand-300"></i>
                            </div>
                            <div className="min-w-0">
                                <p className="text-brand-300/70 text-[10px] uppercase font-bold tracking-widest mb-1">First Questioner</p>
                                <div className="flex items-center gap-3">
                                    <PlayerAvatar name={firstPlayer} className="w-6 h-6 rounded-full"/>
                                    <p className="text-white font-display font-bold text-xl tracking-wide truncate">{firstPlayer}</p>
                                </div>
                            </div>
                        </div>
                        <button 
                            onClick={() => {
                                setShowTurnOrder(true);
                                audioManager.playSound('uiClick');
                            }}
                            className="w-12 h-12 flex-shrink-0 bg-white/5 hover:bg-white/10 rounded-full flex items-center justify-center text-white/60 hover:text-white transition-colors active:scale-90"
                            aria-label="Review turn order"
                        >
                            <i className="fa-solid fa-list-ol"></i>
                        </button>
                    </div>

                    {/* Timer */}
                    <div className="flex-1 flex flex-col items-center justify-center z-10 w-full relative">
                        {duration ? (
                            <div className="relative transform scale-90 sm:scale-100 transition-transform">
                                <div className={`absolute inset-0 rounded-full blur-[100px] transition-all duration-1000 ${timeLeft < 30 ? 'bg-red-500/20' : 'bg-brand-500/10'}`}></div>
                                <div className="relative">
                                    {/* Track */}
                                    <svg className="w-72 h-72 transform -rotate-90">
                                        <circle cx="144" cy="144" r="120" stroke="rgba(255,255,255,0.05)" strokeWidth="8" fill="transparent" />
                                        <circle 
                                            cx="144" cy="144" r="120" stroke="currentColor" strokeWidth="8" fill="transparent" 
                                            className={`${timeLeft < 30 ? 'text-red-500 shadow-[0_0_20px_rgba(239,68,68,0.5)]' : 'text-brand-500 shadow-[0_0_20px_rgba(139,92,246,0.5)]'} transition-all duration-1000 drop-shadow-xl`}
                                            strokeDasharray={strokeDasharray}
                                            strokeDashoffset={strokeDashoffset}
                                            strokeLinecap="round"
                                        />
                                    </svg>
                                    <div className="absolute inset-0 flex flex-col items-center justify-center">
                                        <span className={`text-7xl font-mono font-bold tracking-tighter tabular-nums ${timeLeft < 30 && isActive ? 'text-red-500 animate-pulse' : 'text-white'}`}>
                                            {formatTime(timeLeft)}
                                        </span>
                                        <span className="text-white/30 text-[10px] font-bold uppercase tracking-[0.4em] mt-4 ml-1">
                                            {timeLeft === 0 ? "TIME'S UP" : "REMAINING"}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="text-center py-16 px-8 glass-panel rounded-[2.5rem] border border-white/5">
                                <div className="w-24 h-24 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-white/10">
                                    <i className="fa-solid fa-infinity text-white/50 text-4xl"></i>
                                </div>
                                <h2 className="text-3xl font-display font-bold mb-4 text-white">Untimed Mode</h2>
                                <p className="text-white/40 text-sm font-medium leading-relaxed max-w-xs mx-auto">
                                    Analyze behavior. Watch for nervous ticks. Take your time to find the spy.
                                </p>
                            </div>
                        )}
                    </div>

                    {/* Action */}
                    <div className="w-full z-10 pb-[env(safe-area-inset-bottom)] mb-6">
                        <button 
                            onClick={handleIdentifyImposter}
                            disabled={lobbyId && !isHost}
                            className="w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white font-display font-bold text-lg py-5 rounded-[1.5rem] shadow-[0_0_40px_rgba(220,38,38,0.4)] hover:shadow-[0_0_55px_rgba(234,88,12,0.5)] transition-all duration-300 ease-out active:scale-[0.98] hover:scale-[1.01] flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            <i className="fa-solid fa-user-secret text-xl"></i>
                            {duration && timeLeft === 0 && !lobbyId ? 'REVEAL IMPOSTER' : 'IDENTIFY IMPOSTER'}
                        </button>
                    </div>
                </div>
            );
        };
        
        // 5. Voting Screen
        const VotingScreen = ({ lobbyData, lobbyPlayers, user, lobbyId, audioManager }) => {
            const me = lobbyPlayers.find(p => p.id === user.uid);
            const [selectedVotes, setSelectedVotes] = useState([]);
            const numImposters = lobbyData.imposterIds?.length || lobbyData.fakeWordPlayerIds?.length || 1;
            const isFakeWordMode = lobbyData.isFakeWordMode;

            const handleSelectPlayer = (targetPlayerId) => {
                audioManager.playSound('uiClick');
                setSelectedVotes(prev => {
                    if (prev.includes(targetPlayerId)) {
                        return prev.filter(id => id !== targetPlayerId);
                    }
                    if (prev.length < numImposters) {
                        return [...prev, targetPlayerId];
                    }
                    // If already at max votes, replace the last selection
                    return [...prev.slice(0, prev.length - 1), targetPlayerId];
                });
            };

            const handleConfirmVote = () => {
                if (selectedVotes.length === numImposters) {
                    audioManager.playSound('uiClick');
                    db.collection('lobbies').doc(lobbyId).collection('players').doc(user.uid).update({
                        votedFor: selectedVotes
                    });
                }
            };
            
            const VotedForName = ({ playerId }) => {
                const player = lobbyPlayers.find(p => p.id === playerId);
                if (!player) return <span className="flex-1 text-right font-bold text-white truncate">Unknown</span>;

                return (
                    <div className="flex items-center justify-end gap-2">
                        <span className="flex-1 text-right font-bold text-white truncate">{player.name}</span>
                        <PlayerAvatar name={player.name} className="w-5 h-5 rounded-full" />
                    </div>
                );
            };
            
            const renderVotingRecord = (player) => {
                if (!player.votedFor || !Array.isArray(player.votedFor) || player.votedFor.length === 0) {
                     return <i className="fa-solid fa-ellipsis text-white/40"></i>;
                }
                return <i className="fa-solid fa-check text-green-400 animate-fadeIn"></i>;
            }

            return (
                <div className="h-[100dvh] flex flex-col items-center justify-start pt-16 p-6 text-center overflow-y-auto no-scrollbar relative animate-fadeIn">
                     <div className="absolute inset-0 pointer-events-none">
                        <div className="blob bg-red-600/20 top-0 left-0 w-full h-full"></div>
                    </div>
                    
                    <div className="relative z-10 w-full max-w-sm">
                        <div className="w-24 h-24 rounded-full flex items-center justify-center mb-8 relative mx-auto">
                            <div className="absolute inset-0 bg-red-500/20 blur-2xl rounded-full animate-pulse-slow"></div>
                            <div className="glass-panel w-full h-full rounded-full flex items-center justify-center border border-white/10">
                               <i className={`fa-solid ${isFakeWordMode ? 'fa-question' : 'fa-user-secret'} text-red-400 text-4xl`}></i>
                            </div>
                        </div>
                        <h1 className="text-4xl font-display font-bold text-white mb-4">{isFakeWordMode ? 'Who Has the Fake Word?' : 'Who is the Imposter?'}</h1>
                        <p className="text-white/60 mb-10">{numImposters > 1 ? `Select the ${numImposters} agents you believe are suspicious.` : "Cast your vote. The agent with the most votes will be revealed."}</p>

                        {me?.votedFor && me.votedFor.length > 0 ? (
                             <div className="w-full max-w-sm">
                                <div className="glass-panel p-8 rounded-2xl mb-6 text-center">
                                    <i className="fa-solid fa-check-circle text-green-400 text-4xl mb-4"></i>
                                    <h3 className="text-xl font-bold text-white mb-2">Vote Cast!</h3>
                                    <p className="text-white/50 text-sm mb-4">You voted for:</p>
                                    <div className="flex flex-col gap-2 items-center">
                                        {me.votedFor.map(voteId => <VotedForName key={voteId} playerId={voteId} />)}
                                    </div>
                                    <hr className="border-white/10 my-4" />
                                    <p className="text-white/50 text-sm">Waiting for other agents to vote.</p>
                                </div>
                                <div className="glass-panel p-6 rounded-2xl">
                                    <h4 className="text-sm font-bold tracking-widest text-brand-400 mb-4 uppercase">Voting Status</h4>
                                    <div className="space-y-3">
                                        {lobbyPlayers.map(player => (
                                            <div key={player.id} className="flex items-center justify-between bg-white/5 px-4 py-3 rounded-lg">
                                                <div className="flex items-center gap-3 truncate">
                                                    <PlayerAvatar name={player.name} className="w-6 h-6 rounded-full"/>
                                                    <span className="font-semibold text-white/90 truncate">{player.name}</span>
                                                </div>
                                                {renderVotingRecord(player)}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <>
                                <div className="w-full flex flex-col gap-3">
                                    {lobbyPlayers.filter(p => p.id !== user.uid).map(player => (
                                        <button 
                                            key={player.id} 
                                            onClick={() => handleSelectPlayer(player.id)}
                                            className={`w-full text-left p-4 rounded-xl transition-all flex items-center gap-4 active:scale-95 border ${selectedVotes.includes(player.id) ? 'bg-brand-500/20 border-brand-400' : 'bg-white/5 hover:bg-white/10 border-transparent'}`}
                                        >
                                            <div className={`w-6 h-6 rounded-full flex items-center justify-center border-2 ${selectedVotes.includes(player.id) ? 'bg-brand-500 border-brand-400' : 'border-white/20'}`}>
                                                {selectedVotes.includes(player.id) && <i className="fa-solid fa-check text-xs text-white"></i>}
                                            </div>
                                            <PlayerAvatar name={player.name} className="w-8 h-8 rounded-full" />
                                            <span className="font-bold text-lg">{player.name}</span>
                                        </button>
                                    ))}
                                </div>
                                <button
                                    onClick={handleConfirmVote}
                                    disabled={selectedVotes.length !== numImposters}
                                    className="w-full mt-6 bg-red-600 text-white font-display font-bold text-lg py-4 rounded-xl shadow-[0_0_20px_rgba(220,38,38,0.3)] transition-all active:scale-95 disabled:opacity-50 disabled:shadow-none"
                                >
                                    Confirm Vote ({selectedVotes.length}/{numImposters})
                                </button>
                            </>
                        )}
                    </div>
                </div>
            )
        };

		// 6. Results Screen
        const ResultScreen = ({ lobbyData, lobbyPlayers, onRestart, onBackToHome, onConfirmExit, audioManager, isHost, isLocal }) => {
            const { gameResult, imposterIds, imposterIndices, fakeWordPlayerIds, fakeWordPlayerIndices, secretWord, fakeWord, turnOrder, players } = lobbyData;
            const isFakeWordMode = lobbyData.isFakeWordMode;
            
            const roguePlayerIds = isFakeWordMode ? fakeWordPlayerIds : imposterIds;
            const roguePlayerIndices = isFakeWordMode ? fakeWordPlayerIndices : imposterIndices;

            const roguePlayers = isLocal
                ? roguePlayerIndices.map(i => players[i])
                : lobbyPlayers.filter(p => roguePlayerIds?.includes(p.id));

            const roguePlayerNames = roguePlayers.map(p => p?.name || "Unknown").join(' & ');

            // New logic to check if all players are present for a rematch
            const originalPlayerCount = turnOrder?.length || 0;
            const currentPlayerCount = lobbyPlayers.length;
            const notAllPlayersPresent = !isLocal && originalPlayerCount > 0 && originalPlayerCount !== currentPlayerCount;

            const soundPlayedRef = useRef(false);

            useEffect(() => {
                if (soundPlayedRef.current) return;

                let soundToPlay = null;
                if (isLocal) {
                    soundToPlay = audioManager.getSound('imposterWin'); // Same sound for local reveal
                } else if (gameResult?.winner === 'imposter' || gameResult?.winner === 'fakeWordPlayer') {
                    soundToPlay = audioManager.getSound('imposterWin');
                } else if (gameResult?.winner === 'agents') {
                    soundToPlay = audioManager.getSound('agentWin');
                }

                if (soundToPlay) {
                    soundPlayedRef.current = true;
                    soundToPlay.currentTime = 0;
                    soundToPlay.play().catch(e => console.error("Result music failed to play:", e));
                }
                
                return () => {
                    if (soundToPlay) {
                        soundToPlay.pause();
                        soundToPlay.currentTime = 0;
                    }
                };
            }, [audioManager, gameResult, isLocal]);


            const renderResultContent = () => {
                if (!gameResult) {
                    return <p>Calculating results...</p>;
                }

                const title = isFakeWordMode ? `The Player with the Fake Word Was...` : (roguePlayers.length > 1 ? `The Imposters Were...` : `The Imposter Was...`);

                if (isLocal) {
                    return (
                        <>
                            <div className="w-28 h-28 bg-gradient-to-br from-red-500/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-red-500/40 shadow-[0_0_40px_rgba(239,68,68,0.2)] overflow-hidden">
                                <img src="https://em-content.zobj.net/source/microsoft-teams/337/ninja_medium-light-skin-tone_1f977-1f3fc_1f3fc.png" alt="Ninja" draggable="false" className="w-30 h-30 drop-shadow-lg relative top-3" />
                            </div>
                            <h2 className="text-3xl font-display font-bold text-white mb-2">{title}</h2>
                            <p className="text-4xl font-black text-red-400 tracking-tight drop-shadow-sm">{roguePlayerNames}</p>
                        </>
                    );
                }
                
                if (gameResult.winner === 'imposter' || gameResult.winner === 'fakeWordPlayer') {
                    const winnerName = isFakeWordMode ? "FAKE WORD PLAYER WINS" : "IMPOSTER WINS";
                    return (
                        <>
                         <div className="w-28 h-28 bg-gradient-to-br from-red-500/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-red-500/40 shadow-[0_0_40px_rgba(239,68,68,0.2)] overflow-hidden">
                            <img src="https://em-content.zobj.net/source/microsoft-teams/337/ninja_medium-light-skin-tone_1f977-1f3fc_1f3fc.png" alt="Ninja" draggable="false" className="w-30 h-30 drop-shadow-lg relative top-3" />
                        </div>
                        <h2 className="text-3xl font-display font-bold text-red-400 mb-2">{winnerName}</h2>
                        <p className="text-white/60 mb-6 max-w-xs mx-auto">
                            {gameResult.reason === 'tie'
                                ? "The agents couldn't agree on a suspect, allowing the rogue agent to escape!"
                                : `The agents incorrectly accused ${gameResult.accusedName}, allowing the real rogue agent to win!`}
                        </p>
                        <p className="text-white">{title.replace('...', '')} <span className="font-bold text-red-400">{roguePlayerNames}</span></p>
                        </>
                    );
                } else { // Agents win
                     return (
                        <>
                         <div className="w-28 h-28 bg-gradient-to-br from-teal-500/20 to-transparent rounded-full flex items-center justify-center mx-auto mb-8 ring-1 ring-teal-500/40 shadow-[0_0_40px_rgba(20,184,166,0.1)] overflow-hidden">
                            <img src="https://em-content.zobj.net/source/microsoft-teams/363/detective_light-skin-tone_1f575-1f3fb_1f3fb.png" alt="Detective" draggable="false" className="w-35 h-35 drop-shadow-lg relative top-3" />
                        </div>
                        <h2 className="text-3xl font-display font-bold text-teal-400 mb-2">AGENTS WIN</h2>
                        <p className="text-white/60 mb-6 max-w-xs mx-auto">
                           The agents successfully identified a rogue element!
                        </p>
                        <p className="text-white">{title.replace('...', '')} <span className="font-bold text-teal-400">{roguePlayerNames}</span></p>
                        </>
                    );
                }
            };

            return (
                <div className="h-[100dvh] flex flex-col items-center p-6 text-center overflow-y-auto no-scrollbar">
                    <div className="absolute inset-0 pointer-events-none">
                        <div className={`blob ${ (gameResult?.winner !== 'agents' && !isLocal) || isLocal ? 'bg-red-600/20' : 'bg-teal-600/20'} top-0 left-0 w-full h-full`}></div>
                    </div>
                    
                    <div className="relative my-8 animate-float w-full max-w-sm z-10">
                        <div className={`absolute inset-0 ${ (gameResult?.winner !== 'agents' && !isLocal) || isLocal ? 'bg-red-500' : 'bg-teal-500'} rounded-[2.5rem] blur-[50px] opacity-20`}></div>
                        <div className={`relative glass-panel p-10 rounded-[2.5rem] border ${ (gameResult?.winner !== 'agents' && !isLocal) || isLocal ? 'border-red-500/30' : 'border-teal-500/30'}`}>
                           {renderResultContent()}
                        </div>
                    </div>

                    <div className="glass-panel p-6 rounded-[2rem] w-full max-w-sm mb-8 border border-white/5 z-10">
                        <p className="text-slate-500 text-[10px] uppercase tracking-widest font-bold mb-3">{isFakeWordMode ? 'The Real Word' : 'The Secret Word'}</p>
                        <p className="text-3xl font-display font-bold text-teal-400 tracking-wide">{secretWord}</p>
                         {isFakeWordMode && fakeWord && (
                            <>
                                <div className="h-px bg-white/10 my-4"></div>
                                <p className="text-slate-500 text-[10px] uppercase tracking-widest font-bold mb-3">The Fake Word</p>
                                <p className="text-3xl font-display font-bold text-yellow-400 tracking-wide">{fakeWord}</p>
                            </>
                         )}
                    </div>

                    {!isLocal && lobbyData.votingRecord && (
                        <div className="glass-panel p-6 rounded-[2rem] w-full max-w-sm mb-8 border border-white/5 z-10 animate-fadeIn">
                            <h3 className="text-sm font-bold tracking-widest text-brand-400 mb-4 uppercase">Voting Record</h3>
                            <div className="space-y-2 text-left">
                                {lobbyData.votingRecord.map((record, index) => (
                                    <div key={index} className="flex items-center text-sm bg-white/5 px-3 py-2 rounded-lg">
                                        <div className="flex-1 flex items-center gap-2 min-w-0">
                                            <PlayerAvatar name={record.voterName} className="w-5 h-5 rounded-full" />
                                            <span className="font-semibold text-white/80 truncate">{record.voterName}</span>
                                        </div>
                                        <i className="fa-solid fa-arrow-right text-white/30 mx-2 flex-shrink-0"></i>
                                        <div className="flex-1 flex items-center justify-end gap-2 min-w-0">
                                            <span className="font-bold text-white truncate">{record.votedForName}</span>
                                            {record.votedForName !== 'No Vote' && <PlayerAvatar name={record.votedForName} className="w-5 h-5 rounded-full" />}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                    
                    <div className="w-full max-w-sm z-10 flex flex-col gap-3 pb-[env(safe-area-inset-bottom)] mb-8">
                         {isHost ? (
                            <button 
                                onClick={() => {
                                    if(navigator.vibrate) navigator.vibrate(20);
                                    onRestart();
                                }}
                                disabled={notAllPlayersPresent}
                                className="w-full bg-white text-slate-950 py-5 rounded-[1.5rem] font-display font-bold text-lg shadow-[0_0_30px_rgba(255,255,255,0.15)] active:scale-95 transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none"
                            >
                                <i className="fa-solid fa-rotate-right text-lg"></i>
                                {notAllPlayersPresent ? 'WAITING FOR PLAYERS' : 'PLAY AGAIN'}
                            </button>
                        ) : (
                             <button
                                disabled={true}
                                className="w-full bg-white text-slate-950 py-5 rounded-[1.5rem] font-display font-bold text-lg opacity-50 cursor-not-allowed flex items-center justify-center gap-3"
                            >
                                <i className="fa-solid fa-hourglass-half text-lg"></i>
                                WAITING FOR HOST
                            </button>
                        )}
                        <button 
                            onClick={isHost ? onBackToHome : onConfirmExit}
                            className="w-full bg-white/5 hover:bg-white/10 text-white/70 py-4 rounded-[1.5rem] font-display font-bold text-base active:scale-95 transition-all flex items-center justify-center gap-3"
                        >
                            <i className="fa-solid fa-house text-sm"></i> BACK TO HOME
                        </button>
                    </div>
                </div>
            );
        };
        
        // --- HELPER FUNCTIONS ---
        // Fisher-Yates Shuffle - Unbiased randomization
        const shuffleArray = (array) => {
            let currentIndex = array.length, randomIndex;
            // While there remain elements to shuffle.
            while (currentIndex > 0) {
                // Pick a remaining element.
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                // And swap it with the current element.
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        };

        const generateRandomString = (length, chars) => {
            let result = '';
            for (let i = 0; i < length; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        };

        const generateLobbyId = () => generateRandomString(6, 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789');
        const generateLobbyPassword = () => generateRandomString(4, 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789');
		
		// --- CORRECTED & RELIABLE: Asset Preloading without Fetch ---
        const preloadAssets = (onProgress) => {
            const imageUrls = new Set();
            const audioUrls = new Set();

            // 1. Gather all static UI and background images
            [
                'https://em-content.zobj.net/source/microsoft-teams/400/disguised-face_1f978.png',
                'https://em-content.zobj.net/source/microsoft-teams/363/detective_light-skin-tone_1f575-1f3fb_1f3fb.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/locked_1f512.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/shushing-face_1f92b.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/clipboard_1f4cb.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/ninja_medium-light-skin-tone_1f977-1f3fc_1f3fc.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/three-oclock_1f552.png',
                'https://www.clashchamps.com/wp-content/uploads/2024/06/czJOx2-Q.png',
                'https://wallpapercat.com/w/full/0/4/f/283609-2500x1466-desktop-hd-clash-of-clans-wallpaper.jpg',
                'https://em-content.zobj.net/source/microsoft-teams/337/direct-hit_1f3af.png',
                'https://em-content.zobj.net/source/microsoft-teams/363/speaking-head_1f5e3-fe0f.png',
                'https://em-content.zobj.net/source/microsoft-teams/363/eyes_1f440.png',
                'https://images.emojiterra.com/microsoft/fluent-emoji/15.1/3d/1f3ad_3d.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/face-with-monocle_1f9d0.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/busts-in-silhouette_1f465.png',
                'https://em-content.zobj.net/source/microsoft-teams/337/hammer-and-pick_2692-fe0f.png',
                'https://www.catholicnewsagency.com/images/three-kings.jpg?jpg',
                'https://picjumbo.com/wp-content/uploads/dark-halloween-background-with-glowing-halloween-pumpkins-free-image.jpeg'
            ].forEach(url => imageUrls.add(url));

            // 2. Gather all CATEGORY_ICONS
            Object.values(CATEGORY_ICONS).forEach(icon => {
                if (Array.isArray(icon)) {
                    icon.forEach(url => imageUrls.add(url));
                } else if (icon) {
                    imageUrls.add(icon);
                }
            });

            // 3. Gather all AUDIO_URLS
            Object.values(AUDIO_URLS).forEach(value => {
                if (typeof value === 'string') {
                    audioUrls.add(value);
                } else if (typeof value === 'object' && value !== null) {
                    Object.values(value).forEach(nestedUrl => audioUrls.add(nestedUrl));
                }
            });

            const imagePromises = Array.from(imageUrls).map(src => {
                return new Promise(resolve => {
                    if (!src || typeof src !== 'string') return resolve();
                    const img = new Image();
                    img.src = src;
                    const assetLoaded = () => { if (onProgress) onProgress(); resolve(); };
                    img.onload = assetLoaded;
                    img.onerror = assetLoaded;
                });
            });

            const audioPromises = Array.from(audioUrls).map(src => {
                return new Promise(resolve => {
                    if (!src || typeof src !== 'string') return resolve();
                    const audio = new Audio();
                    const assetLoaded = () => { if (onProgress) onProgress(); resolve(); };
                    audio.addEventListener('canplaythrough', assetLoaded, { once: true });
                    audio.addEventListener('error', assetLoaded, { once: true });
                    audio.src = src;
                    audio.load(); // Important: explicitly tell the browser to start loading
                });
            });

            const allPromises = [...imagePromises, ...audioPromises];
            return {
                assetPromise: Promise.all(allPromises),
                count: allPromises.length
            };
        };

        // --- MAIN APP ---
        const App = () => {
			// Network State
            const [isOnlineStatus, setIsOnlineStatus] = useState(navigator.onLine);

            useEffect(() => {
                const setOnline = () => setIsOnlineStatus(true);
                const setOffline = () => setIsOnlineStatus(false);

                window.addEventListener('online', setOnline);
                window.addEventListener('offline', setOffline);

                return () => {
                    window.removeEventListener('online', setOnline);
                    window.removeEventListener('offline', setOffline);
                };
            }, []);
            // Core App State
            const [isLoading, setIsLoading] = useState(true);
            const [appReady, setAppReady] = useState(false); // New state for preloading
            const [user, setUser] = useState(null);
            const [gameMode, setGameMode] = useState('select'); // 'select', 'local', 'online'
            const [showHowToPlay, setShowHowToPlay] = useState(false); // New state for "How to Play" modal
            const [initialLobbyParams, setInitialLobbyParams] = useState(null);

            // Local Game State
            const [localGameState, setLocalGameState] = useState('setup'); 
            const [localGameData, setLocalGameData] = useState({
                players: [],
                imposterIndices: [],
                fakeWordPlayerIndices: [],
                secretWord: '',
                fakeWord: '',
                isFakeWordMode: false,
                duration: null,
                firstPlayer: '',
                category: '',
                speakCategory: false,
                turnOrder: [],
            });
            const [localCurrentPlayerIndex, setLocalCurrentPlayerIndex] = useState(0);

            // Online Game State
            const [lobbyId, setLobbyId] = useState(null);
            const [lobbyData, setLobbyData] = useState(null);
            const [lobbyPlayers, setLobbyPlayers] = useState([]);
            const lobbyListenerUnsubscribe = useRef(null);
            const playersListenerUnsubscribe = useRef(null);
            const [showRemovedModal, setShowRemovedModal] = useState(false);
            const [lobbyClosedInfo, setLobbyClosedInfo] = useState(null);
            const [showExitConfirmModal, setShowExitConfirmModal] = useState(false);
            
            // Notification States
            const [restartNotification, setRestartNotification] = useState(null);
            const [showImposterVoteNotification, setShowImposterVoteNotification] = useState(false);
            const lastSeenRestartTimestampRef = useRef(0);

            // Audio Manager, Mute State & Sync State
            const audioManagerRef = useRef(null);
            const [isMuted, setIsMuted] = useState(() => {
                try {
                    const savedMuteState = localStorage.getItem('imposter_isMuted');
                    return savedMuteState !== null ? JSON.parse(savedMuteState) : false;
                } catch {
                    return false;
                }
            });
            const lastPlayedEventTimestamp = useRef(0);
            
            // --- Refs to hold the latest state for use in Firestore listeners ---
            const latestLobbyData = useRef(lobbyData);
            const latestLobbyPlayers = useRef(lobbyPlayers);
            const previousGameStateRef = useRef();
            const previousPlayersRef = useRef(lobbyPlayers);
            
            const ACTIVE_WORD_BANK = getActiveWordBank(WORD_BANK);
            
            // --- Effects ---

            // Keep refs updated with the latest state
            useEffect(() => {
                latestLobbyData.current = lobbyData;
            }, [lobbyData]);

            useEffect(() => {
                latestLobbyPlayers.current = lobbyPlayers;
            }, [lobbyPlayers]);
            
            // Initialize Audio Manager
            useEffect(() => {
                // Ensure this only runs once
                if (audioManagerRef.current) return;
            
                const manager = {
                    sounds: {},
                    music: {},
                    isMuted: isMuted,
                    isUnlocked: false,
                    currentMusicTrack: null,
            
                    // This function is crucial. It must be called by a user interaction (e.g., a click).
                    unlockAudio: function() {
                        if (this.isUnlocked) return;
                        this.isUnlocked = true;
                        // A common trick to "wake up" the audio context in some browsers
                        const silentSound = new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA");
                        silentSound.play().catch(() => {});
                    },
            
                    // Initialize a single sound
                    initSound: function(name, url, options = {}) {
                        try {
                            const audio = new Audio(url);
                            audio.loop = options.loop || false;
                            audio.volume = options.volume || 1.0;
                            audio.preload = 'auto';
                            
                            if (options.isMusic) {
                                this.music[name] = audio;
                            } else {
                                this.sounds[name] = audio;
                            }
                        } catch (e) {
                            console.error(`Failed to initialize sound: ${name}`, e);
                        }
                    },
            
                    playSound: function(name, category = null) {
                        if (!this.isUnlocked) return;
            
                        let soundToPlay = null;
                        if (name === 'category' && category && this.sounds.categories && this.sounds.categories[category]) {
                            soundToPlay = this.sounds.categories[category];
                        } else {
                            soundToPlay = this.sounds[name];
                        }
            
                        if (soundToPlay) {
                            soundToPlay.currentTime = 0;
                            soundToPlay.play().catch(error => {
                                // This error often happens if the user hasn't interacted yet.
                                // It's generally safe to ignore in this context.
                            });
                        }
                    },
            
                    playMusic: function(name) {
                        if (!this.isUnlocked || (this.currentMusicTrack === name && this.music[name] && !this.music[name].paused)) return;
            
                        this.stopMusic();
                        const track = this.music[name];
                        if (track) {
                            this.currentMusicTrack = name;
                            track.muted = this.isMuted;
                            track.play().catch(() => {});
                        }
                    },
            
                    stopMusic: function() {
                        if (this.currentMusicTrack && this.music[this.currentMusicTrack]) {
                            const track = this.music[this.currentMusicTrack];
                            if (!track.paused) {
                                track.pause();
                                track.currentTime = 0;
                            }
                        }
                        this.currentMusicTrack = null;
                    },

                    stopSound: function(name) {
						if (!this.isUnlocked) return;
						const sound = this.sounds[name];
						if (sound && !sound.paused) {
							sound.pause();
							sound.currentTime = 0;
						}
					},
            
                    setMuted: function(muted) {
                        this.isMuted = muted;
                        Object.values(this.music).forEach(track => {
                            track.muted = muted;
                        });
                    },
            
                    pauseAllMusic: function() {
                        if (this.currentMusicTrack && this.music[this.currentMusicTrack]) {
                            this.music[this.currentMusicTrack].pause();
                        }
                    },
            
                    resumeAllMusic: function() {
                        if (this.isUnlocked && this.currentMusicTrack && this.music[this.currentMusicTrack]) {
                            this.music[this.currentMusicTrack].play().catch(() => {});
                        }
                    },
                    getSound: function(name) { return this.sounds[name]; }
                };
            
                // --- Initialize all sounds defined in AUDIO_URLS ---
                const musicTracks = ['mainMenuMusic', 'categorySelectionMusic', 'timerMusic', 'christmasMainMenuMusic', 'halloweenMainMenuMusic'];
                
                Object.entries(AUDIO_URLS).forEach(([key, value]) => {
                    if (typeof value === 'string') {
                        const isMusic = musicTracks.includes(key);
                        // Define special options for specific sounds
                        let options = { isMusic, loop: isMusic };
                        if (key === 'categorySelectionMusic') options.volume = 0.7;
                        if (key === 'timerMusic') options.volume = 0.5;
                        if (key === 'turnOrderReveal') options.volume = 0.6;
                        
                        manager.initSound(key, value, options);

                    } else if (key === 'categories') {
                        manager.sounds.categories = {};
                        Object.entries(value).forEach(([cat, url]) => {
                             const audio = new Audio(url);
                             audio.preload = 'auto';
                             manager.sounds.categories[cat] = audio;
                        });
                    }
                });
            
                audioManagerRef.current = manager;
            }, []);
			
			useEffect(() => {
                if (audioManagerRef.current) {
                    audioManagerRef.current.setMuted(isMuted);
                }
            }, [isMuted]);

            // Auth, and URL Param Handling
            useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const lobbyIdParam = params.get('lobbyId');
                const passwordParam = params.get('password');
                if (lobbyIdParam) {
                    setInitialLobbyParams({ lobbyId: lobbyIdParam, password: passwordParam || '' });
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
                
                const authUnsubscribe = auth.onAuthStateChanged(firebaseUser => {
                    if (firebaseUser) {
                        setUser(firebaseUser);
                    } else {
                        auth.signInAnonymously().catch(error => console.error("Anonymous sign-in failed:", error));
                    }
                });

                const disableImageContextMenu = (e) => {
                    if (e.target.tagName === 'IMG') e.preventDefault();
                };
                document.addEventListener('contextmenu', disableImageContextMenu);

                return () => {
                    authUnsubscribe();
                    document.removeEventListener('contextmenu', disableImageContextMenu);
                };
            }, []);

            // Background Music Manager
            useEffect(() => {
                if (isLoading || !audioManagerRef.current || !audioManagerRef.current.isUnlocked) return;
                
                let targetMusic = null;

                if (gameMode === 'select' || (gameMode === 'online' && !lobbyId)) {
                    if (currentSeason === 'christmas') {
                        targetMusic = 'christmasMainMenuMusic';
                    } else if (currentSeason === 'halloween') {
                        targetMusic = 'halloweenMainMenuMusic';
                    } else {
                        targetMusic = 'mainMenuMusic';
                    }
                } else if ((gameMode === 'online' && lobbyId && lobbyData?.gameState === 'waiting') || (gameMode === 'local' && localGameState === 'setup')) {
					targetMusic = 'categorySelectionMusic';
				} else if ((gameMode === 'local' && localGameState === 'active') || (gameMode === 'online' && lobbyData?.gameState === 'active')) {
                    targetMusic = 'timerMusic';
                }

                if (targetMusic) {
                    audioManagerRef.current.playMusic(targetMusic);
                } else {
                    audioManagerRef.current.stopMusic();
                }

            }, [isLoading, gameMode, localGameState, lobbyId, lobbyData?.gameState, audioManagerRef.current?.isUnlocked, currentSeason]);
            
            // Handle Browser Tab Visibility
            useEffect(() => {
                const handleVisibilityChange = () => {
                    if (document.hidden) {
                        audioManagerRef.current?.pauseAllMusic();
                    } else {
                        audioManagerRef.current?.resumeAllMusic();
                    }
                };
                document.addEventListener("visibilitychange", handleVisibilityChange);
                return () => document.removeEventListener("visibilitychange", handleVisibilityChange);
            }, []);
			
            const handleMuteToggle = () => {
                const newMutedState = !isMuted;
                setIsMuted(newMutedState);
                try {
                    localStorage.setItem('imposter_isMuted', JSON.stringify(newMutedState));
                } catch (error) {
                    console.error("Could not save mute state to local storage:", error);
                }
            };

            // Firestore Listeners & Game Logic for Online Mode
            useEffect(() => {
                if (gameMode !== 'online' || !lobbyId || !user) {
                    if (lobbyListenerUnsubscribe.current) lobbyListenerUnsubscribe.current();
                    if (playersListenerUnsubscribe.current) playersListenerUnsubscribe.current();
                    return;
                }
                
                const lobbyRef = db.collection('lobbies').doc(lobbyId);
                
                lobbyListenerUnsubscribe.current = lobbyRef.onSnapshot(doc => {
                    if (doc.exists) {
                        const data = doc.data();
                        const previousData = latestLobbyData.current;
                        setLobbyData(data);
                        
                        // --- Sound logic based on state changes ---
                        if (previousData && data.gameState !== previousData.gameState) {
                            if (previousData.gameState === 'waiting' && data.gameState === 'reveal') {
                                audioManagerRef.current.playSound(data.isRandomMode ? 'startRandomMission' : 'startMission');
                            }
                            if (previousData.gameState === 'result' && data.gameState === 'waiting') {
                                audioManagerRef.current.playSound('playAgain');
                            }
                        }
                        
                        if (data.lastRestartReason && data.lastRestartReason.timestamp > lastSeenRestartTimestampRef.current) {
							setRestartNotification(data.lastRestartReason.word);
							lastSeenRestartTimestampRef.current = data.lastRestartReason.timestamp;
						}
                        
                        if (data.lastSoundEvent && data.lastSoundEvent.timestamp > lastPlayedEventTimestamp.current) {
                            const soundName = data.lastSoundEvent.name;
                            audioManagerRef.current.playSound(soundName, data.lastSoundEvent.category || null);
                            lastPlayedEventTimestamp.current = data.lastSoundEvent.timestamp;
                        }
                    } else {
                        const wasIHost = latestLobbyData.current?.hostId === user.uid;
                        if (!wasIHost && lobbyId) {
                            const host = latestLobbyPlayers.current.find(p => p.id === latestLobbyData.current?.hostId);
                            setLobbyClosedInfo({ hostName: host ? host.name : 'The host' });
                        }
                        handleBackToHome(true);
                    }
                });

                const playersRef = lobbyRef.collection('players').orderBy('createdAt');
                playersListenerUnsubscribe.current = playersRef.onSnapshot(snapshot => {
                    const newPlayers = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                    const currentLobbyDoc = latestLobbyData.current;

                    if (newPlayers.length > 0 && latestLobbyPlayers.current.length > 0) {
                        const wasIInLobby = latestLobbyPlayers.current.some(p => p.id === user.uid);
                        const amIStillInLobby = newPlayers.some(p => p.id === user.uid);
                        if (wasIInLobby && !amIStillInLobby) setShowRemovedModal(true);
                    }

                    if (currentLobbyDoc?.notifyImposterOnVote && !currentLobbyDoc?.isFakeWordMode && currentLobbyDoc.imposterIds?.includes(user.uid)) {
                        const previouslyConfused = previousPlayersRef.current.some(p => p.status === 'confused');
                        const nowConfused = newPlayers.some(p => p.status === 'confused');
                        if (!previouslyConfused && nowConfused) {
                            setShowImposterVoteNotification(true);
                        }
                    }
                    
                    setLobbyPlayers(newPlayers);
                    previousPlayersRef.current = newPlayers;
                    
                    if (!currentLobbyDoc) return;

                    const hostIsMissing = newPlayers.length > 0 && !newPlayers.some(p => p.id === currentLobbyDoc.hostId);
                    if (hostIsMissing) {
                        const newHost = newPlayers[0];
                        if (newHost && newHost.id === user.uid) {
                            console.log(`Host left. Promoting ${newHost.name} to new host.`);
                            lobbyRef.update({ hostId: newHost.id });
                        }
                    }

                    const isHost = user.uid === currentLobbyDoc.hostId;
                    if (!isHost) return;
                    
                    if (currentLobbyDoc.gameState === 'voting') {
                        const allVoted = newPlayers.length > 0 && newPlayers.every(p => p.votedFor);
                        if (allVoted) setTimeout(() => calculateResults(currentLobbyDoc, newPlayers), 1000);
                    }
                    
                    if (currentLobbyDoc.gameState === 'reveal') {
                        const rogueIds = currentLobbyDoc.isFakeWordMode ? currentLobbyDoc.fakeWordPlayerIds : currentLobbyDoc.imposterIds;
                        if (!rogueIds) return;

                        const pollIsActive = newPlayers.some(p => p.status === 'confused');
                        if (pollIsActive) {
                            // In fake word mode, everyone is polled. In classic, imposters are excluded.
                            const agentsToPoll = currentLobbyDoc.isFakeWordMode 
                                ? newPlayers.filter(p => !p.status)
                                : newPlayers.filter(p => !rogueIds.includes(p.id) && !p.status);

                            if (agentsToPoll.length === 0) {
                                lobbyRef.get().then(doc => {
                                    if (doc.exists && doc.data().gameState === 'reveal') {
                                        calculateConfusionResult(doc.data(), newPlayers);
                                    }
                                });
                            }
                        }
                    }
                });

                return () => {
                    if (lobbyListenerUnsubscribe.current) lobbyListenerUnsubscribe.current();
                    if (playersListenerUnsubscribe.current) playersListenerUnsubscribe.current();
                };
            }, [gameMode, lobbyId, user]);
            
            useEffect(() => {
                if (lobbyData && lobbyData.gameState !== previousGameStateRef.current) {
                    if (
                        user && lobbyId &&
                        (previousGameStateRef.current === 'result' || previousGameStateRef.current === 'reveal') &&
                        lobbyData.gameState === 'waiting'
                    ) {
                        db.collection('lobbies').doc(lobbyId).collection('players').doc(user.uid).update({
                            hasSeenCard: firebase.firestore.FieldValue.delete(),
                            votedFor: firebase.firestore.FieldValue.delete(),
                            status: firebase.firestore.FieldValue.delete()
                        }).catch(err => console.error("Could not reset player state:", err));
                    }
                    previousGameStateRef.current = lobbyData.gameState;
                }
            }, [lobbyData, user, lobbyId]);


            // --- LOCAL GAME HANDLERS ---
            const startLocalGame = (players, selectedCategories, duration, isRandomMode, speakCategory, enableTwoImposters, isFakeWordMode) => {
                // Use proper shuffle
                const shuffledPlayers = shuffleArray([...players]);
                
                const useRandom = isRandomMode || (selectedCategories && selectedCategories.length === 0);
                let finalCategory;
                
                // --- CRASH FIX START: Validate Category ---
                const validCategories = Object.keys(ACTIVE_WORD_BANK);
                
                if (useRandom) {
                    finalCategory = validCategories[Math.floor(Math.random() * validCategories.length)];
                } else {
                    finalCategory = selectedCategories[0]; 
                    // Verify the selected category actually exists in the current season
                    if (!ACTIVE_WORD_BANK[finalCategory]) {
                        console.warn(`Category ${finalCategory} not found in active bank. Defaulting to Movies.`);
                        finalCategory = 'Movies';
                    }
                }
                
                const words = ACTIVE_WORD_BANK[finalCategory];
                // Safety check to prevent the "length of undefined" crash
                if (!words || words.length === 0) {
                     alert("Error: Word bank is empty for this category. Please try another.");
                     return;
                }
                // --- CRASH FIX END ---

                const secretWord = words[Math.floor(Math.random() * words.length)];
                
                const numRoguePlayers = enableTwoImposters && shuffledPlayers.length >= 10 ? 2 : 1;
                
                // Use proper shuffle for indices
                const playerIndices = Array.from(Array(shuffledPlayers.length).keys());
                const shuffledIndices = shuffleArray([...playerIndices]);
                const roguePlayerIndices = shuffledIndices.slice(0, numRoguePlayers);

                let fakeWord = '';
                if(isFakeWordMode) {
                    const availableFakeWords = words.filter(w => w !== secretWord);
                    if(availableFakeWords.length > 0) {
                        fakeWord = availableFakeWords[Math.floor(Math.random() * availableFakeWords.length)];
                    } else {
                        fakeWord = secretWord; 
                    }
                }

                setLocalGameData({ 
                    players: shuffledPlayers,
                    imposterIndices: isFakeWordMode ? [] : roguePlayerIndices,
                    fakeWordPlayerIndices: isFakeWordMode ? roguePlayerIndices : [],
                    secretWord,
                    fakeWord,
                    isFakeWordMode,
                    duration,
                    firstPlayer: shuffledPlayers[0].name,
                    category: finalCategory,
                    speakCategory,
                    turnOrder: shuffledPlayers.map((p, i) => ({ name: p.name, id: `local_${i}` }))
                });
                setLocalCurrentPlayerIndex(0);
                setLocalGameState('pass');
            };

            const handleLocalNextPlayer = () => {
                if (localCurrentPlayerIndex < localGameData.players.length - 1) {
                    setLocalCurrentPlayerIndex(prev => prev + 1);
                } else {
                    setLocalGameState('turnOrder');
                }
            };
            const handleStartLocalActiveGame = () => {
                audioManagerRef.current.playSound('uiClick');
                 if (localGameData.speakCategory && localGameData.category) {
                    audioManagerRef.current.playSound('category', localGameData.category);
                }
                setLocalGameData(prev => ({ ...prev, missionStartTime: new Date() }));
                setLocalGameState('active');
            };

            const handleLocalEndGame = () => {
                setLocalGameData(prev => ({
                    ...prev,
                    gameResult: { winner: 'local' }
                }));
                setLocalGameState('result');
            };

            const handleLocalRestart = () => {
                audioManagerRef.current.playSound('playAgain');
                setLocalGameState('setup');
                setLocalGameData({
                    players: [], imposterIndices: [], fakeWordPlayerIndices: [], secretWord: '', fakeWord: '', isFakeWordMode: false,
                    duration: null, firstPlayer: '', category: '', speakCategory: false
                });
            };
            
            // --- ONLINE GAME HANDLERS ---
            const deleteLobby = async (lobbyIdToDelete) => {
                const lobbyRef = db.collection('lobbies').doc(lobbyIdToDelete);
                const playersRef = lobbyRef.collection('players');

                try {
                    const playersSnapshot = await playersRef.get();
                    if (!playersSnapshot.empty) {
                        const batch = db.batch();
                        playersSnapshot.docs.forEach(doc => batch.delete(doc.ref));
                        await batch.commit();
                    }
                    await lobbyRef.delete();
                } catch (error) {
                    console.error("Error deleting lobby:", error);
                }
            };
            
			const handleBackToHome = async (silent = false) => {
                if (!silent && audioManagerRef.current.isUnlocked) {
				    audioManagerRef.current.playSound('uiClick');
                }

				const currentLobbyId = lobbyId;
				const isOnlineMode = gameMode === 'online';
                const currentLobbyData = latestLobbyData.current;

				if (lobbyListenerUnsubscribe.current) lobbyListenerUnsubscribe.current();
				if (playersListenerUnsubscribe.current) playersListenerUnsubscribe.current();
				lobbyListenerUnsubscribe.current = null;
				playersListenerUnsubscribe.current = null;
				
				setGameMode('select');
				setLocalGameState('setup');
				setLobbyId(null);
				setLobbyData(null);
				setLobbyPlayers([]);
                latestLobbyData.current = null;
                previousGameStateRef.current = null;

				if (isOnlineMode && currentLobbyId && user && currentLobbyData) {
                    const isHostLeaving = user.uid === currentLobbyData.hostId;
					if (isHostLeaving) {
						await deleteLobby(currentLobbyId);
					} else {
						await db.collection('lobbies').doc(currentLobbyId).collection('players').doc(user.uid).delete().catch(() => {});
					}
				}
			};

            const handleCreateLobby = async (username) => {
                if (audioManagerRef.current) audioManagerRef.current.unlockAudio();
                const newLobbyId = generateLobbyId();
                const newPassword = generateLobbyPassword();
                const lobbyRef = db.collection('lobbies').doc(newLobbyId);
                const expiryDate = new Date();
                expiryDate.setDate(expiryDate.getDate() + 1);
                
                await lobbyRef.set({
                    hostId: user.uid, password: newPassword, category: 'Movies',
                    isRandomMode: false, speakCategory: false, gameState: 'waiting',
                    isFakeWordMode: false,
                    enableTwoImposters: false, notifyImposterOnVote: false,
                    usedWords: [],
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    expireAt: firebase.firestore.Timestamp.fromDate(expiryDate)
                });
                await lobbyRef.collection('players').doc(user.uid).set({
                    name: username, isHost: true,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                setLobbyId(newLobbyId);
            };

            const handleJoinLobby = async (lobbyId, password, username) => {
                if (audioManagerRef.current) audioManagerRef.current.unlockAudio();
                const lobbyRef = db.collection('lobbies').doc(lobbyId);
                const lobbyDoc = await lobbyRef.get();
                if (!lobbyDoc.exists) throw new Error('Lobby not found.');
                const data = lobbyDoc.data();
                if (data.password !== password) throw new Error('Incorrect password.');
                if (data.gameState !== 'waiting') throw new Error('Game is already in progress.');

                const playersSnapshot = await lobbyRef.collection('players').get();
                if (playersSnapshot.docs.some(doc => doc.id === user.uid)) {
                    setLobbyId(lobbyId);
                    return;
                }
                if (playersSnapshot.docs.map(doc => doc.data().name).includes(username)) throw new Error('Username is already taken.');
                
                await lobbyRef.collection('players').doc(user.uid).set({
                    name: username,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                setLobbyId(lobbyId);
            };
            
             const handleStartGameOnline = async () => {
                if (lobbyPlayers.length < 3) return;
                
                // --- ONLINE CRASH FIX START ---
                let finalCategory = lobbyData.category;
                const validCategories = Object.keys(ACTIVE_WORD_BANK);

                // If Random Mode is ON, pick a valid random category
                if (lobbyData.isRandomMode) {
                    finalCategory = validCategories[Math.floor(Math.random() * validCategories.length)];
                } 
                // If Random Mode is OFF, check if the selected category is valid
                else if (!ACTIVE_WORD_BANK[finalCategory]) {
                    console.warn(`Online Lobby Category ${finalCategory} invalid. Defaulting to Movies.`);
                    finalCategory = 'Movies';
                }

                // Get words and ensure safety
                const wordsForCategory = ACTIVE_WORD_BANK[finalCategory] || [];
                if (wordsForCategory.length === 0) {
                    // Fallback to Movies if the list is somehow empty
                    finalCategory = 'Movies';
                }
                // --- ONLINE CRASH FIX END ---

                const actualWords = ACTIVE_WORD_BANK[finalCategory];
                const availableWords = actualWords.filter(word => !(lobbyData.usedWords || []).includes(word));
                
                let wordPool = availableWords.length > 0 ? availableWords : actualWords;
                const secretWord = wordPool[Math.floor(Math.random() * wordPool.length)];
                
                // 1. Determine Turn Order (Shuffle the lobby players)
                const turnOrderList = shuffleArray([...lobbyPlayers]);
                
                // 2. Determine Imposters/FakeWordPlayers INDEPENDENTLY from turn order
                const numRoguePlayers = lobbyData.enableTwoImposters && lobbyPlayers.length >= 10 ? 2 : 1;
                
                const allPlayerIds = turnOrderList.map(p => p.id);
                const shuffledPlayerIds = shuffleArray([...allPlayerIds]);
                const roguePlayerIds = shuffledPlayerIds.slice(0, numRoguePlayers);

                let updatePayload = {
                    secretWord,
                    turnOrder: turnOrderList.map(p => ({name: p.name, id: p.id})),
                    category: finalCategory, // Ensure we save the valid category back to the DB
                    gameState: 'reveal',
                    usedWords: firebase.firestore.FieldValue.arrayUnion(secretWord),
                };

                if (lobbyData.isFakeWordMode) {
                    wordPool = wordPool.filter(w => w !== secretWord);
                    const fakeWord = wordPool.length > 0 ? wordPool[Math.floor(Math.random() * wordPool.length)] : secretWord;
                    updatePayload.fakeWord = fakeWord;
                    updatePayload.fakeWordPlayerIds = roguePlayerIds;
                    updatePayload.imposterIds = []; // Clear imposterIds
                } else {
                    updatePayload.imposterIds = roguePlayerIds;
                    updatePayload.fakeWordPlayerIds = []; // Clear fakeWordPlayerIds
                }
                
                await db.collection('lobbies').doc(lobbyId).update(updatePayload);
            };

            const handleAcknowledgeCard = () => {
                db.collection('lobbies').doc(lobbyId).collection('players').doc(user.uid).update({ hasSeenCard: true });
            };

            const handleDeclareConfusion = () => {
                db.collection('lobbies').doc(lobbyId).collection('players').doc(user.uid).update({ hasSeenCard: true, status: 'confused' });
            };

            const handleConfusionVote = (vote) => {
                db.collection('lobbies').doc(lobbyId).collection('players').doc(user.uid).update({ status: vote });
            };
            
            const handleStartMissionOnline = () => {
                db.collection('lobbies').doc(lobbyId).update({ 
                    gameState: 'turnOrder',
                    lastSoundEvent: { name: 'uiClick', timestamp: Date.now() }
                }); 
            };
            
            const handleStartActiveMission = () => {
                db.collection('lobbies').doc(lobbyId).update({
                    gameState: 'active',
                    missionStartTime: firebase.firestore.FieldValue.serverTimestamp(),
                    duration: 3 * 60,
                    lastSoundEvent: {
                        name: lobbyData.speakCategory ? 'category' : 'uiClick',
                        category: lobbyData.speakCategory ? lobbyData.category : null,
                        timestamp: Date.now()
                    }
                });

                setTimeout(() => {
                    db.collection('lobbies').doc(lobbyId).update({
                        lastSoundEvent: firebase.firestore.FieldValue.delete()
                    }).catch(err => console.log("Could not clear sound event, it might have been cleared already."));
                }, 2000);
            }

            const handleEndGameOnline = () => {
                if (lobbyData.gameState === 'active') {
                    db.collection('lobbies').doc(lobbyId).update({ gameState: 'voting' });
                }
            };

            const calculateConfusionResult = async (currentLobbyData, currentLobbyPlayers) => {
                const rogueIds = currentLobbyData.isFakeWordMode ? currentLobbyData.fakeWordPlayerIds : currentLobbyData.imposterIds;
				
				// In Fake Word mode, everyone is polled. In Classic, imposters are not.
                const polledPlayers = currentLobbyData.isFakeWordMode
                    ? currentLobbyPlayers
                    : currentLobbyPlayers.filter(p => !rogueIds.includes(p.id));

                const confusedCount = polledPlayers.filter(p => p.status === 'confused').length;
                const majorityIsConfused = confusedCount > (polledPlayers.length / 2);

                const lobbyRef = db.collection('lobbies').doc(lobbyId);

                if (majorityIsConfused) {
                    await lobbyRef.update({
                        gameState: 'waiting',
                        lastRestartReason: { word: currentLobbyData.secretWord, timestamp: Date.now() },
                        usedWords: firebase.firestore.FieldValue.arrayUnion(currentLobbyData.secretWord),
                        secretWord: firebase.firestore.FieldValue.delete(),
                        imposterIds: firebase.firestore.FieldValue.delete(),
                        fakeWordPlayerIds: firebase.firestore.FieldValue.delete(),
                        fakeWord: firebase.firestore.FieldValue.delete(),
                        turnOrder: firebase.firestore.FieldValue.delete(),
                    });
                } else {
                    const batch = db.batch();
                    const playersRef = lobbyRef.collection('players');
                    currentLobbyPlayers.forEach(player => {
                        if (player.status) {
							const playerRef = playersRef.doc(player.id);
                            batch.update(playerRef, { status: firebase.firestore.FieldValue.delete() });
                        }
                    });
                    await batch.commit();
                }
            };
            
            const calculateResults = async (currentLobbyData, currentLobbyPlayers) => {
                if (currentLobbyData.gameState !== 'voting') return;

                const isFakeWordMode = currentLobbyData.isFakeWordMode;
                const roguePlayerIds = isFakeWordMode ? currentLobbyData.fakeWordPlayerIds : currentLobbyData.imposterIds;
                const numRoguePlayers = roguePlayerIds?.length || 1;

                const voteCounts = currentLobbyPlayers.reduce((acc, p) => {
                    if (p.votedFor && Array.isArray(p.votedFor)) {
                        p.votedFor.forEach(voteId => {
                            acc[voteId] = (acc[voteId] || 0) + 1;
                        });
                    }
                    return acc;
                }, {});

                const sortedAccused = Object.entries(voteCounts).sort(([, a], [, b]) => b - a);
                let result = {};

                if (numRoguePlayers === 1) {
                    const maxVotes = sortedAccused.length > 0 ? sortedAccused[0][1] : 0;
                    const accusedIds = sortedAccused.filter(([, votes]) => votes === maxVotes).map(([id]) => id);

                    if (accusedIds.length === 1 && roguePlayerIds.includes(accusedIds[0])) {
                        result = { winner: 'agents' };
                    } else if (accusedIds.length !== 1) {
                        result = { winner: isFakeWordMode ? 'fakeWordPlayer' : 'imposter', reason: 'tie' };
                    } else {
                        const accusedPlayer = currentLobbyPlayers.find(p => p.id === accusedIds[0]);
                        result = { winner: isFakeWordMode ? 'fakeWordPlayer' : 'imposter', reason: 'wrong_vote', accusedName: accusedPlayer?.name || 'an agent' };
                    }
                } else { // Logic for 2 imposters/fake cards
                    const accusedTopTwoIds = sortedAccused.slice(0, 2).map(([id]) => id);
                    const isTieForSecond = sortedAccused.length > 2 && sortedAccused[1][1] === sortedAccused[2][1];

                    if (accusedTopTwoIds.length < 2 || isTieForSecond) {
                        result = { winner: isFakeWordMode ? 'fakeWordPlayer' : 'imposter', reason: 'tie' };
                    } else {
                        const correctlyIdentified = accusedTopTwoIds.every(id => roguePlayerIds.includes(id));
                        if (correctlyIdentified) {
                            result = { winner: 'agents' };
                        } else {
                            const accusedPlayer = currentLobbyPlayers.find(p => p.id === accusedTopTwoIds.find(id => !roguePlayerIds.includes(id)));
                            result = { winner: isFakeWordMode ? 'fakeWordPlayer' : 'imposter', reason: 'wrong_vote', accusedName: accusedPlayer?.name || 'an agent' };
                        }
                    }
                }
                
                const votingRecord = currentLobbyPlayers.flatMap((voter) => {
                    if (!voter.votedFor || voter.votedFor.length === 0) {
                         return [{
                            voterId: voter.id,
                            voterName: voter.name,
                            votedForName: 'No Vote'
                        }];
                    }
                    return voter.votedFor.map(voteId => ({
                        voterId: voter.id,
                        voterName: voter.name,
                        votedForName: currentLobbyPlayers.find(p => p.id === voteId)?.name || 'Unknown'
                    }));
                });

                await db.collection('lobbies').doc(lobbyId).update({ 
                    gameState: 'result', gameResult: result, votingRecord
                });
            };
            
            const handleRestartOnline = async () => {
                if (!lobbyData || user.uid !== lobbyData.hostId || lobbyData.gameState !== 'result') return;
                
                const updatePayload = {
                    gameState: 'waiting',
                    secretWord: firebase.firestore.FieldValue.delete(),
                    imposterIds: firebase.firestore.FieldValue.delete(),
                    fakeWordPlayerIds: firebase.firestore.FieldValue.delete(),
                    fakeWord: firebase.firestore.FieldValue.delete(),
                    turnOrder: firebase.firestore.FieldValue.delete(),
                    gameResult: firebase.firestore.FieldValue.delete(),
                    missionStartTime: firebase.firestore.FieldValue.delete(),
                    duration: firebase.firestore.FieldValue.delete(),
                    votingRecord: firebase.firestore.FieldValue.delete(),
                    lastRestartReason: firebase.firestore.FieldValue.delete(),
                };

                await db.collection('lobbies').doc(lobbyId).update(updatePayload);
            };

            const handleStart = () => {
                if (audioManagerRef.current) {
                    audioManagerRef.current.unlockAudio();
                    audioManagerRef.current.playSound('uiClick');
                }
                setIsLoading(false);
                if (initialLobbyParams) {
                    setGameMode('online');
                }
            };

            // --- RENDER LOGIC ---
            const renderContent = () => {
                if (isLoading || !user) {
                    return <LoadingScreen onStart={handleStart} onFinishedLoading={() => setAppReady(true)} />;
                }

                if (gameMode === 'select') {
                    return <GameModeSelectionScreen onSelectMode={setGameMode} onShowHowToPlay={() => setShowHowToPlay(true)} audioManager={audioManagerRef.current} onMuteToggle={handleMuteToggle} isMuted={isMuted} />;
                }

                if (gameMode === 'local') {
                    switch (localGameState) {
                        case 'setup': return <SetupScreen onStartGame={startLocalGame} audioManager={audioManagerRef.current} onBack={handleBackToHome} />;
                        case 'pass':
                            const isFakeWordPlayer = localGameData.isFakeWordMode && localGameData.fakeWordPlayerIndices.includes(localCurrentPlayerIndex);
                            const isImposter = !localGameData.isFakeWordMode && localGameData.imposterIndices.includes(localCurrentPlayerIndex);
                            const wordToShow = isImposter ? "IMPOSTER" : (isFakeWordPlayer ? localGameData.fakeWord : localGameData.secretWord);
                            return <CardRevealScreen key={localCurrentPlayerIndex} player={localGameData.players[localCurrentPlayerIndex]} word={wordToShow} onNext={handleLocalNextPlayer} isLastPlayer={localCurrentPlayerIndex === localGameData.players.length - 1} audioManager={audioManagerRef.current} />;
                        case 'turnOrder': return <TurnOrderScreen players={localGameData.turnOrder} onStartMission={handleStartLocalActiveGame} audioManager={audioManagerRef.current} isHost={true}/>;
                        case 'active': return <GameTimerScreen lobbyData={localGameData} onEndGame={handleLocalEndGame} firstPlayer={localGameData.firstPlayer} audioManager={audioManagerRef.current} isHost={true} lobbyId={null}/>;
                        case 'result': 
                            return <ResultScreen 
                                isLocal={true} lobbyData={localGameData} lobbyPlayers={localGameData.players} 
                                onRestart={handleLocalRestart} onBackToHome={handleBackToHome} audioManager={audioManagerRef.current} isHost={true} 
                            />;
                        default: return <SetupScreen onStartGame={startLocalGame} audioManager={audioManagerRef.current} onBack={handleBackToHome} />;
                    }
                }
                
                if (gameMode === 'online') {
                    if (!lobbyId || !lobbyData) {
                        return <OnlineLobbyScreen user={user} onCreate={handleCreateLobby} onJoin={handleJoinLobby} audioManager={audioManagerRef.current} onBack={handleBackToHome} initialParams={initialLobbyParams} />;
                    }
                    
                    const meAsPlayer = lobbyPlayers.find(p => p.id === user.uid);
                    const isHost = user.uid === lobbyData.hostId;
                    const onlineState = lobbyData.gameState;
                    
                    if (onlineState === 'waiting' || (onlineState === 'reveal' && meAsPlayer?.hasSeenCard)) {
                         return <WaitingRoom lobbyData={lobbyData} lobbyPlayers={lobbyPlayers} user={user} lobbyId={lobbyId} onStartGame={handleStartGameOnline} onStartMission={handleStartMissionOnline} onLeaveLobby={() => isHost ? handleBackToHome() : setShowExitConfirmModal(true)} audioManager={audioManagerRef.current} onConfusionVote={handleConfusionVote} season={currentSeason} />;
                    }
                    if (onlineState === 'reveal' && !meAsPlayer?.hasSeenCard) {
                        const isFakeWordPlayerOnline = lobbyData.isFakeWordMode && lobbyData.fakeWordPlayerIds?.includes(user.uid);
                        const isImposterOnline = !lobbyData.isFakeWordMode && lobbyData.imposterIds?.includes(user.uid);
                        const wordForOnlinePlayer = isImposterOnline ? "IMPOSTER" : (isFakeWordPlayerOnline ? lobbyData.fakeWord : lobbyData.secretWord);
                        return <CardRevealScreen 
                                        isOnline={true} player={{ name: meAsPlayer?.name }} 
                                        word={wordForOnlinePlayer}
                                        audioManager={audioManagerRef.current}
                                        onAcknowledge={handleAcknowledgeCard}
                                        onConfused={handleDeclareConfusion}
                                     />;
                    }
                    if (onlineState === 'turnOrder') {
                        return <TurnOrderScreen players={lobbyData.turnOrder || []} onStartMission={handleStartActiveMission} audioManager={audioManagerRef.current} isHost={isHost} />;
                    }
                    if (onlineState === 'active') {
                         return <GameTimerScreen 
                            lobbyData={lobbyData} onEndGame={handleEndGameOnline} 
                            firstPlayer={lobbyData.turnOrder ? lobbyData.turnOrder[0].name : ''} audioManager={audioManagerRef.current} isHost={isHost} lobbyId={lobbyId}
                        />;
                    }
                    if (onlineState === 'voting') {
                        return <VotingScreen lobbyData={lobbyData} lobbyPlayers={lobbyPlayers} user={user} lobbyId={lobbyId} audioManager={audioManagerRef.current} />;
                    }
                    if (onlineState === 'result') {
                        return <ResultScreen 
                            isLocal={false} lobbyData={lobbyData} lobbyPlayers={lobbyPlayers}
                            onRestart={handleRestartOnline} onBackToHome={handleBackToHome} 
                            onConfirmExit={() => setShowExitConfirmModal(true)}
                            audioManager={audioManagerRef.current} isHost={isHost}
                        />;
                    }
                    return <LoadingScreen onStart={handleStart} onFinishedLoading={() => setAppReady(true)} />; // Fallback
                }
            };
            
            return (
                <div className="w-full h-full text-slate-200 font-sans selection:bg-brand-500/30">
					{!isOnlineStatus && <OfflineScreen />} 
					
                    <div className="fixed inset-0 bg-[#020617] -z-10"></div>
                     <div className="absolute inset-0 pointer-events-none">
                        <div className="blob bg-brand-600/30 top-[-20%] left-[-20%] w-[60%] h-[60%]"></div>
                        <div className="blob bg-cyan-600/30 bottom-[-20%] right-[-20%] w-[60%] h-[60%] animation-delay-2000"></div>
                    </div>
                    {showHowToPlay && <HowToPlayModal onClose={() => setShowHowToPlay(false)} />}
                    {showRemovedModal && <RemovedModal onClose={() => {
                        setShowRemovedModal(false);
                        handleBackToHome(true);
                    }} />}
                    {lobbyClosedInfo && <LobbyClosedModal hostName={lobbyClosedInfo.hostName} onClose={() => {
                        setLobbyClosedInfo(null);
                        handleBackToHome(true);
                    }} />}
                    {restartNotification && <RestartNotificationModal word={restartNotification} onClose={() => setRestartNotification(null)} />}
                    {showImposterVoteNotification && <ImposterVoteNotificationModal onClose={() => setShowImposterVoteNotification(false)} />}
                    {showExitConfirmModal && <ExitLobbyConfirmModal onConfirm={() => { setShowExitConfirmModal(false); handleBackToHome(); }} onCancel={() => setShowExitConfirmModal(false)} />}
                    {renderContent()}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
